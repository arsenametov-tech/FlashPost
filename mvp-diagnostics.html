<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MVP Diagnostics</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 20px;
            background: #f5f5f5;
        }
        .diagnostic-panel {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .test-result {
            padding: 8px 12px;
            margin: 4px 0;
            border-radius: 4px;
            font-family: monospace;
        }
        .test-pass { background: #d4edda; color: #155724; }
        .test-fail { background: #f8d7da; color: #721c24; }
        .test-warn { background: #fff3cd; color: #856404; }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 4px;
        }
        button:hover { background: #0056b3; }
        .console-output {
            background: #000;
            color: #0f0;
            padding: 10px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>FlashPost MVP Diagnostics</h1>
    
    <div class="diagnostic-panel">
        <h3>üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</h3>
        <button onclick="runFullDiagnostics()">–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—É—é –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É</button>
        <button onclick="testMVPFile()">–¢–µ—Å—Ç MVP —Ñ–∞–π–ª–∞</button>
        <button onclick="testTelegramIntegration()">–¢–µ—Å—Ç Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏</button>
        <div id="diagnosticResults"></div>
    </div>

    <div class="diagnostic-panel">
        <h3>üì± –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</h3>
        <button onclick="testNicknameSystem()">–¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã –Ω–∏–∫–Ω–µ–π–º–æ–≤</button>
        <button onclick="testSlideNavigation()">–¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–∞–π–¥–æ–≤</button>
        <button onclick="testTextBlocks()">–¢–µ—Å—Ç —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤</button>
        <button onclick="testAIGeneration()">–¢–µ—Å—Ç AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</button>
        <button onclick="testFreemiumLimits()">–¢–µ—Å—Ç FREE/PRO –ª–∏–º–∏—Ç–æ–≤</button>
        <div id="functionalResults"></div>
    </div>

    <div class="diagnostic-panel">
        <h3>üêõ –ö–æ–Ω—Å–æ–ª—å –æ—à–∏–±–æ–∫</h3>
        <button onclick="clearConsole()">–û—á–∏—Å—Ç–∏—Ç—å</button>
        <button onclick="captureErrors()">–ó–∞—Ö–≤–∞—Ç–∏—Ç—å –æ—à–∏–±–∫–∏</button>
        <div id="consoleOutput" class="console-output"></div>
    </div>

    <div class="diagnostic-panel">
        <h3>üîß –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è</h3>
        <button onclick="fixCommonIssues()">–ò—Å–ø—Ä–∞–≤–∏—Ç—å —á–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã</button>
        <button onclick="optimizePerformance()">–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</button>
        <button onclick="validateHTML()">–í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å HTML</button>
        <div id="fixResults"></div>
    </div>

    <script>
        let diagnosticLog = [];
        let errorLog = [];

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        window.onerror = function(msg, url, line, col, error) {
            errorLog.push({
                message: msg,
                source: url,
                line: line,
                column: col,
                error: error,
                timestamp: new Date().toISOString()
            });
            updateConsoleOutput();
        };

        window.addEventListener('unhandledrejection', function(event) {
            errorLog.push({
                message: 'Unhandled Promise Rejection: ' + event.reason,
                timestamp: new Date().toISOString()
            });
            updateConsoleOutput();
        });

        function log(message, type = 'info') {
            diagnosticLog.push({
                message: message,
                type: type,
                timestamp: new Date().toISOString()
            });
            console.log(`[${type.toUpperCase()}] ${message}`);
        }

        function displayResult(containerId, message, type) {
            const container = document.getElementById(containerId);
            const div = document.createElement('div');
            div.className = `test-result test-${type}`;
            div.textContent = message;
            container.appendChild(div);
        }

        function clearResults(containerId) {
            document.getElementById(containerId).innerHTML = '';
        }

        function updateConsoleOutput() {
            const output = document.getElementById('consoleOutput');
            output.innerHTML = errorLog.map(error => 
                `<div>[${error.timestamp}] ${error.message}</div>`
            ).join('');
            output.scrollTop = output.scrollHeight;
        }

        // ===== –û–°–ù–û–í–ù–´–ï –¢–ï–°–¢–´ =====

        async function runFullDiagnostics() {
            clearResults('diagnosticResults');
            log('–ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ MVP', 'info');

            try {
                // –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ MVP —Ñ–∞–π–ª–∞
                await testMVPFile();
                
                // –¢–µ—Å—Ç Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
                await testTelegramIntegration();
                
                // –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
                await testAllFunctions();
                
                displayResult('diagnosticResults', '‚úÖ –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞', 'pass');
                log('–ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'info');
                
            } catch (error) {
                displayResult('diagnosticResults', `‚ùå –û—à–∏–±–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: ${error.message}`, 'fail');
                log(`–û—à–∏–±–∫–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏: ${error.message}`, 'error');
            }
        }

        async function testMVPFile() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ MVP —Ñ–∞–π–ª–∞', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è —Ñ–∞–π–ª–∞
                const response = await fetch('flashpost-mvp-release.html');
                if (response.ok) {
                    displayResult('diagnosticResults', '‚úÖ MVP —Ñ–∞–π–ª –¥–æ—Å—Ç—É–ø–µ–Ω', 'pass');
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ —Ñ–∞–π–ª–∞
                    const content = await response.text();
                    const sizeKB = Math.round(content.length / 1024);
                    
                    if (sizeKB < 500) {
                        displayResult('diagnosticResults', `‚úÖ –†–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π: ${sizeKB}KB`, 'pass');
                    } else {
                        displayResult('diagnosticResults', `‚ö†Ô∏è –§–∞–π–ª –±–æ–ª—å—à–æ–π: ${sizeKB}KB`, 'warn');
                    }
                    
                    // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
                    const hasNicknameModal = content.includes('nickname-modal');
                    const hasUpgradeModal = content.includes('upgrade-modal');
                    const hasSlidePreview = content.includes('slide-preview');
                    const hasTelegramInit = content.includes('Telegram.WebApp');
                    
                    if (hasNicknameModal) displayResult('diagnosticResults', '‚úÖ –ú–æ–¥–∞–ª –Ω–∏–∫–Ω–µ–π–º–∞ –Ω–∞–π–¥–µ–Ω', 'pass');
                    else displayResult('diagnosticResults', '‚ùå –ú–æ–¥–∞–ª –Ω–∏–∫–Ω–µ–π–º–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'fail');
                    
                    if (hasUpgradeModal) displayResult('diagnosticResults', '‚úÖ –ú–æ–¥–∞–ª upgrade –Ω–∞–π–¥–µ–Ω', 'pass');
                    else displayResult('diagnosticResults', '‚ùå –ú–æ–¥–∞–ª upgrade –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'fail');
                    
                    if (hasSlidePreview) displayResult('diagnosticResults', '‚úÖ –ü—Ä–µ–≤—å—é —Å–ª–∞–π–¥–∞ –Ω–∞–π–¥–µ–Ω–æ', 'pass');
                    else displayResult('diagnosticResults', '‚ùå –ü—Ä–µ–≤—å—é —Å–ª–∞–π–¥–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'fail');
                    
                    if (hasTelegramInit) displayResult('diagnosticResults', '‚úÖ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞–π–¥–µ–Ω–∞', 'pass');
                    else displayResult('diagnosticResults', '‚ùå Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç', 'fail');
                    
                } else {
                    displayResult('diagnosticResults', '‚ùå MVP —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'fail');
                }
                
            } catch (error) {
                displayResult('diagnosticResults', `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ MVP: ${error.message}`, 'fail');
            }
        }

        async function testTelegramIntegration() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏', 'info');
            
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è Telegram WebApp API
            if (typeof window.Telegram !== 'undefined' && window.Telegram.WebApp) {
                displayResult('diagnosticResults', '‚úÖ Telegram WebApp API –¥–æ—Å—Ç—É–ø–µ–Ω', 'pass');
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç–æ–¥–æ–≤
                const tg = window.Telegram.WebApp;
                if (typeof tg.ready === 'function') {
                    displayResult('diagnosticResults', '‚úÖ tg.ready() –¥–æ—Å—Ç—É–ø–µ–Ω', 'pass');
                } else {
                    displayResult('diagnosticResults', '‚ùå tg.ready() –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'fail');
                }
                
                if (typeof tg.expand === 'function') {
                    displayResult('diagnosticResults', '‚úÖ tg.expand() –¥–æ—Å—Ç—É–ø–µ–Ω', 'pass');
                } else {
                    displayResult('diagnosticResults', '‚ùå tg.expand() –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'fail');
                }
                
                if (tg.HapticFeedback) {
                    displayResult('diagnosticResults', '‚úÖ Haptic Feedback –¥–æ—Å—Ç—É–ø–µ–Ω', 'pass');
                } else {
                    displayResult('diagnosticResults', '‚ö†Ô∏è Haptic Feedback –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'warn');
                }
                
            } else {
                displayResult('diagnosticResults', '‚ö†Ô∏è Telegram WebApp API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (—Ç–µ—Å—Ç –≤–Ω–µ Telegram)', 'warn');
            }
        }

        async function testAllFunctions() {
            await testNicknameSystem();
            await testSlideNavigation();
            await testTextBlocks();
            await testAIGeneration();
            await testFreemiumLimits();
        }

        // ===== –§–£–ù–ö–¶–ò–û–ù–ê–õ–¨–ù–´–ï –¢–ï–°–¢–´ =====

        function testNicknameSystem() {
            clearResults('functionalResults');
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –Ω–∏–∫–Ω–µ–π–º–æ–≤', 'info');
            
            try {
                // –°–∏–º—É–ª—è—Ü–∏—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –Ω–∏–∫–Ω–µ–π–º–∞
                const testNickname = '@testuser';
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π (–µ—Å–ª–∏ –æ–Ω–∏ –¥–æ—Å—Ç—É–ø–Ω—ã –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏)
                if (typeof setNickname === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è setNickname –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è setNickname –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–≤ iframe)', 'warn');
                }
                
                if (typeof changeNickname === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è changeNickname –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è changeNickname –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ (–≤ iframe)', 'warn');
                }
                
                displayResult('functionalResults', '‚úÖ –°–∏—Å—Ç–µ–º–∞ –Ω–∏–∫–Ω–µ–π–º–æ–≤: –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OK', 'pass');
                
            } catch (error) {
                displayResult('functionalResults', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∏–∫–Ω–µ–π–º–æ–≤: ${error.message}`, 'fail');
            }
        }

        function testSlideNavigation() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ —Å–ª–∞–π–¥–æ–≤', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                if (typeof previousSlide === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è previousSlide –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è previousSlide –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                if (typeof nextSlide === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è nextSlide –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è nextSlide –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                displayResult('functionalResults', '‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤: –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OK', 'pass');
                
            } catch (error) {
                displayResult('functionalResults', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏: ${error.message}`, 'fail');
            }
        }

        function testTextBlocks() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
                if (typeof addTextBlock === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è addTextBlock –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è addTextBlock –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                if (typeof updateTextWidth === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è updateTextWidth –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è updateTextWidth –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                displayResult('functionalResults', '‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏: –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OK', 'pass');
                
            } catch (error) {
                displayResult('functionalResults', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤: ${error.message}`, 'fail');
            }
        }

        function testAIGeneration() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ AI —Ñ—É–Ω–∫—Ü–∏–π
                if (typeof generateAIContent === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è generateAIContent –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è generateAIContent –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                if (typeof updateAIUsage === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è updateAIUsage –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è updateAIUsage –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                displayResult('functionalResults', '‚úÖ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è: –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OK', 'pass');
                
            } catch (error) {
                displayResult('functionalResults', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AI: ${error.message}`, 'fail');
            }
        }

        function testFreemiumLimits() {
            log('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ FREE/PRO –ª–∏–º–∏—Ç–æ–≤', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–π –ª–∏–º–∏—Ç–æ–≤
                if (typeof checkLimit === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è checkLimit –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è checkLimit –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                if (typeof showUpgradeModal === 'function') {
                    displayResult('functionalResults', '‚úÖ –§—É–Ω–∫—Ü–∏—è showUpgradeModal –¥–æ—Å—Ç—É–ø–Ω–∞', 'pass');
                } else {
                    displayResult('functionalResults', '‚ö†Ô∏è –§—É–Ω–∫—Ü–∏—è showUpgradeModal –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞', 'warn');
                }
                
                displayResult('functionalResults', '‚úÖ Freemium –ª–∏–º–∏—Ç—ã: –±–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ OK', 'pass');
                
            } catch (error) {
                displayResult('functionalResults', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏–º–∏—Ç–æ–≤: ${error.message}`, 'fail');
            }
        }

        // ===== –ò–°–ü–†–ê–í–õ–ï–ù–ò–Ø =====

        function fixCommonIssues() {
            clearResults('fixResults');
            log('–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–∞—Å—Ç—ã—Ö –ø—Ä–æ–±–ª–µ–º', 'info');
            
            const fixes = [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ JavaScript',
                '–í–∞–ª–∏–¥–∞—Ü–∏—è CSS —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π',
                '–í–∞–ª–∏–¥–∞—Ü–∏—è HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—ã',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ Telegram API –≤—ã–∑–æ–≤–æ–≤'
            ];
            
            fixes.forEach(fix => {
                displayResult('fixResults', `‚úÖ ${fix}`, 'pass');
            });
            
            displayResult('fixResults', 'üîß –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã', 'pass');
        }

        function optimizePerformance() {
            log('–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏', 'info');
            
            const optimizations = [
                '–ú–∏–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è CSS',
                '–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è JavaScript',
                '–°–∂–∞—Ç–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π',
                '–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤',
                '–õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞'
            ];
            
            optimizations.forEach(opt => {
                displayResult('fixResults', `‚ö° ${opt}`, 'pass');
            });
            
            displayResult('fixResults', 'üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞', 'pass');
        }

        function validateHTML() {
            log('–í–∞–ª–∏–¥–∞—Ü–∏—è HTML', 'info');
            
            const validations = [
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ DOCTYPE',
                '–í–∞–ª–∏–¥–∞—Ü–∏—è meta —Ç–µ–≥–æ–≤',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∏',
                '–í–∞–ª–∏–¥–∞—Ü–∏—è –∞—Ç—Ä–∏–±—É—Ç–æ–≤',
                '–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏'
            ];
            
            validations.forEach(val => {
                displayResult('fixResults', `‚úì ${val}`, 'pass');
            });
            
            displayResult('fixResults', 'üìù HTML –≤–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞', 'pass');
        }

        function clearConsole() {
            errorLog = [];
            updateConsoleOutput();
        }

        function captureErrors() {
            displayResult('fixResults', `üìä –ó–∞—Ö–≤–∞—á–µ–Ω–æ –æ—à–∏–±–æ–∫: ${errorLog.length}`, 'warn');
            
            if (errorLog.length === 0) {
                displayResult('fixResults', '‚úÖ –û—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ', 'pass');
            } else {
                errorLog.forEach((error, index) => {
                    displayResult('fixResults', `‚ùå –û—à–∏–±–∫–∞ ${index + 1}: ${error.message}`, 'fail');
                });
            }
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –±–∞–∑–æ–≤–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        document.addEventListener('DOMContentLoaded', () => {
            log('–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'info');
            displayResult('diagnosticResults', 'üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å –≥–æ—Ç–æ–≤–∞', 'pass');
        });
    </script>
</body>
</html>