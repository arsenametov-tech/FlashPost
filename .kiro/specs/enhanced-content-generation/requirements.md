# Requirements Document

## Introduction

Данная спецификация описывает улучшение системы генерации контента для FlashPost Mini App с целью создания логически связанных Instagram-каруселей без повторений и с последовательным развитием темы.

## Glossary

- **Content_Generator**: Система генерации контента для Instagram-каруселей
- **Slide**: Отдельный слайд в карусели Instagram
- **Carousel**: Последовательность из 6 слайдов, образующих единую историю
- **Logic_Chain**: Логическая связь между слайдами, где каждый следующий развивает предыдущий
- **Content_Validator**: Компонент проверки уникальности и качества контента
- **Template_Engine**: Система шаблонов для структурирования контента
- **FlashPost_System**: Существующая система FlashPost Mini App

## Requirements

### Requirement 1: Логическая связность слайдов

**User Story:** Как создатель контента, я хочу, чтобы каждый слайд логически продолжал предыдущий, так чтобы карусель читалась как единая история.

#### Acceptance Criteria

1. WHEN Content_Generator создает карусель, THE System SHALL обеспечить логическую связь между соседними слайдами
2. WHEN генерируется следующий слайд, THE Content_Generator SHALL учитывать контекст всех предыдущих слайдов
3. WHEN карусель завершена, THE Logic_Chain SHALL проходить через все 6 слайдов без разрывов
4. WHEN пользователь читает карусель, THE System SHALL обеспечить плавный переход мыслей от слайда к слайду

### Requirement 2: Предотвращение повторений

**User Story:** Как создатель контента, я хочу избежать повторения фраз и формулировок, чтобы контент был разнообразным и интересным.

#### Acceptance Criteria

1. WHEN Content_Generator создает новый слайд, THE Content_Validator SHALL проверить отсутствие дублирующих фраз
2. WHEN обнаружено повторение фразы, THE System SHALL сгенерировать альтернативную формулировку
3. WHEN проверяется начало предложений, THE Content_Validator SHALL обеспечить разнообразие стартовых слов
4. WHEN карусель завершена, THE System SHALL гарантировать уникальность всех ключевых фраз

### Requirement 3: Структурированная генерация контента

**User Story:** Как создатель контента, я хочу, чтобы система сначала продумывала всю логику карусели, а затем разбивала её на связанные слайды.

#### Acceptance Criteria

1. WHEN начинается генерация карусели, THE Content_Generator SHALL создать общий план всей истории
2. WHEN план готов, THE Template_Engine SHALL разбить историю на 6 логических частей
3. WHEN создается каждый слайд, THE System SHALL следовать заранее определенной структуре
4. WHEN генерация завершена, THE System SHALL проверить соответствие результата исходному плану

### Requirement 4: Соблюдение структуры карусели

**User Story:** Как создатель контента, я хочу, чтобы каждая карусель следовала проверенной структуре Hook-Problem-Cause-Solution-Result-CTA.

#### Acceptance Criteria

1. WHEN создается слайд 1, THE Content_Generator SHALL создать Hook с обещанием пользы
2. WHEN создается слайд 2, THE Content_Generator SHALL детально объяснить проблему
3. WHEN создается слайд 3, THE Content_Generator SHALL раскрыть причины или инсайт
4. WHEN создается слайд 4, THE Content_Generator SHALL предложить конкретное решение
5. WHEN создается слайд 5, THE Content_Generator SHALL описать результат применения
6. WHEN создается слайд 6, THE Content_Generator SHALL создать призыв к действию

### Requirement 5: Стилистические требования

**User Story:** Как создатель контента, я хочу, чтобы контент был написан в разговорном обучающем стиле с оптимальным объемом текста.

#### Acceptance Criteria

1. WHEN генерируется текст слайда, THE Content_Generator SHALL использовать разговорный тон
2. WHEN создается контент, THE System SHALL ограничить объем 2-4 предложениями на слайд
3. WHEN формируется структура слайда, THE Template_Engine SHALL включить мысль, объяснение и переход
4. WHEN проверяется стиль, THE Content_Validator SHALL обеспечить обучающий характер контента

### Requirement 6: Интеграция с существующей системой

**User Story:** Как разработчик, я хочу интегрировать новую систему с существующим FlashPost Mini App без нарушения текущей функциональности.

#### Acceptance Criteria

1. WHEN новая система активируется, THE FlashPost_System SHALL сохранить все существующие функции
2. WHEN происходит генерация, THE System SHALL использовать существующую систему кэширования
3. WHEN генерация не удается, THE System SHALL использовать fallback на локальные шаблоны
4. WHEN система работает, THE FlashPost_System SHALL поддерживать все существующие тематики

### Requirement 7: JSON-форматирование результата

**User Story:** Как система, я хочу получать результат генерации в структурированном JSON-формате для дальнейшей обработки.

#### Acceptance Criteria

1. WHEN генерация завершена, THE Content_Generator SHALL вернуть результат в JSON-формате
2. WHEN формируется JSON, THE System SHALL включить все 6 слайдов с метаданными
3. WHEN создается структура данных, THE Template_Engine SHALL обеспечить совместимость с существующими компонентами
4. WHEN происходит валидация, THE System SHALL проверить корректность JSON-структуры

### Requirement 8: Тематическая адаптация

**User Story:** Как создатель контента, я хочу, чтобы система адаптировала стиль и подход под разные тематики контента.

#### Acceptance Criteria

1. WHEN выбрана тематика AI, THE Content_Generator SHALL использовать технический но доступный язык
2. WHEN выбрана тематика криптовалют, THE Content_Generator SHALL включить актуальные термины и тренды
3. WHEN выбрана тематика личного бренда, THE Content_Generator SHALL использовать мотивационный стиль
4. WHEN определяется тематика, THE System SHALL адаптировать примеры и метафоры под выбранную область