<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üî¨ Deep Error Analysis</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0a0a0f; color: #fff; font-family: 'Courier New', monospace; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; }
        .header { text-align: center; margin-bottom: 30px; }
        .title { font-size: 28px; color: #00ff88; margin-bottom: 10px; }
        .subtitle { color: #888; }
        .test-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr)); gap: 20px; margin: 20px 0; }
        .test-panel { background: rgba(255,255,255,0.05); border: 1px solid rgba(0,255,136,0.3); border-radius: 8px; padding: 20px; }
        .panel-title { color: #00ff88; font-size: 18px; margin-bottom: 15px; border-bottom: 1px solid rgba(0,255,136,0.3); padding-bottom: 5px; }
        .log-area { background: #000; border: 1px solid #333; border-radius: 4px; padding: 10px; font-size: 11px; max-height: 300px; overflow-y: auto; margin: 10px 0; }
        .btn { background: linear-gradient(45deg, #00ff88, #0088ff); color: #000; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; margin: 5px; font-weight: bold; }
        .btn:hover { transform: translateY(-1px); box-shadow: 0 4px 12px rgba(0,255,136,0.3); }
        .status { padding: 8px 12px; border-radius: 4px; margin: 5px 0; font-weight: bold; }
        .success { background: rgba(0,255,136,0.2); border: 1px solid #00ff88; }
        .error { background: rgba(255,68,68,0.2); border: 1px solid #ff4444; }
        .warning { background: rgba(255,193,7,0.2); border: 1px solid #ffc107; }
        .info { background: rgba(0,136,255,0.2); border: 1px solid #0088ff; }
        .metric { display: flex; justify-content: space-between; padding: 5px 0; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .metric-label { color: #aaa; }
        .metric-value { color: #00ff88; font-weight: bold; }
        iframe { width: 100%; height: 200px; border: 1px solid #333; border-radius: 4px; background: #fff; }
        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">üî¨ Deep Error Analysis</h1>
            <p class="subtitle">–ì–ª—É–±–æ–∫–∏–π –∞–Ω–∞–ª–∏–∑ –æ—à–∏–±–æ–∫ –∏ –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        </div>
        
        <div class="test-panel">
            <div class="panel-title">üöÄ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏</div>
            <button class="btn" onclick="runFullAnalysis()">üî¨ –ü–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑</button>
            <button class="btn" onclick="testMainApp()">üì± –¢–µ—Å—Ç index.html</button>
            <button class="btn" onclick="testWorkingApp()">üéØ –¢–µ—Å—Ç working-app.html</button>
            <button class="btn" onclick="testModules()">üîß –¢–µ—Å—Ç –º–æ–¥—É–ª–µ–π</button>
            <button class="btn" onclick="clearLogs()">üßπ –û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥–∏</button>
        </div>

        <div class="test-grid">
            <div class="test-panel">
                <div class="panel-title">üìä –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</div>
                <div id="overallStats">
                    <div class="metric">
                        <span class="metric-label">–°—Ç–∞—Ç—É—Å:</span>
                        <span class="metric-value" id="overallStatus">–û–∂–∏–¥–∞–Ω–∏–µ</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">–û—à–∏–±–∫–∏:</span>
                        <span class="metric-value" id="errorCount">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è:</span>
                        <span class="metric-value" id="warningCount">0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">–¢–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ:</span>
                        <span class="metric-value" id="testsCompleted">0/0</span>
                    </div>
                </div>
            </div>

            <div class="test-panel">
                <div class="panel-title">üì± index.html</div>
                <div id="mainAppStatus" class="status info">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                <div class="log-area" id="mainAppLog">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
                <iframe id="mainAppFrame" class="hidden" src="index.html"></iframe>
            </div>

            <div class="test-panel">
                <div class="panel-title">üéØ working-app.html</div>
                <div id="workingAppStatus" class="status info">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                <div class="log-area" id="workingAppLog">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
                <iframe id="workingAppFrame" class="hidden" src="working-app.html"></iframe>
            </div>

            <div class="test-panel">
                <div class="panel-title">üîß –ú–æ–¥—É–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞</div>
                <div id="modulesStatus" class="status info">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                <div class="log-area" id="modulesLog">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
            </div>

            <div class="test-panel">
                <div class="panel-title">üñ±Ô∏è UI –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ</div>
                <div id="uiStatus" class="status info">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                <div class="log-area" id="uiLog">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
            </div>

            <div class="test-panel">
                <div class="panel-title">‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å</div>
                <div id="performanceStatus" class="status info">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
                <div class="log-area" id="performanceLog">–û–∂–∏–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...</div>
            </div>
        </div>

        <div class="test-panel">
            <div class="panel-title">üìã –î–µ—Ç–∞–ª—å–Ω—ã–π –ª–æ–≥ –∞–Ω–∞–ª–∏–∑–∞</div>
            <div class="log-area" id="masterLog" style="max-height: 500px;">
                –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∞–Ω–∞–ª–∏–∑—É...<br>
            </div>
        </div>
    </div>

    <script>
        let errorCount = 0;
        let warningCount = 0;
        let testsCompleted = 0;
        let totalTests = 6;
        let testResults = {};

        function log(message, type = 'info', targetLog = 'masterLog') {
            const timestamp = new Date().toLocaleTimeString();
            const icons = { error: '‚ùå', success: '‚úÖ', warning: '‚ö†Ô∏è', info: '‚ÑπÔ∏è' };
            const colors = { error: '#ff4444', success: '#00ff88', warning: '#ffc107', info: '#0088ff' };
            
            const logElement = document.getElementById(targetLog);
            if (logElement) {
                logElement.innerHTML += `<span style="color: ${colors[type]}">[${timestamp}] ${icons[type]} ${message}</span><br>`;
                logElement.scrollTop = logElement.scrollHeight;
            }
            
            if (type === 'error') errorCount++;
            if (type === 'warning') warningCount++;
            
            updateStats();
        }

        function updateStats() {
            document.getElementById('errorCount').textContent = errorCount;
            document.getElementById('warningCount').textContent = warningCount;
            document.getElementById('testsCompleted').textContent = `${testsCompleted}/${totalTests}`;
            
            const overallStatus = document.getElementById('overallStatus');
            if (errorCount > 0) {
                overallStatus.textContent = '–ï—Å—Ç—å –æ—à–∏–±–∫–∏';
                overallStatus.style.color = '#ff4444';
            } else if (warningCount > 0) {
                overallStatus.textContent = '–ï—Å—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è';
                overallStatus.style.color = '#ffc107';
            } else if (testsCompleted === totalTests) {
                overallStatus.textContent = '–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã';
                overallStatus.style.color = '#00ff88';
            } else {
                overallStatus.textContent = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...';
                overallStatus.style.color = '#0088ff';
            }
        }

        function updateStatus(statusId, message, type) {
            const element = document.getElementById(statusId);
            if (element) {
                element.className = `status ${type}`;
                element.textContent = message;
            }
        }

        async function testMainApp() {
            log('üì± –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ index.html...', 'info');
            log('üì± –ó–∞–≥—Ä—É–∑–∫–∞ index.html...', 'info', 'mainAppLog');
            updateStatus('mainAppStatus', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'warning');
            
            try {
                const frame = document.getElementById('mainAppFrame');
                frame.classList.remove('hidden');
                
                // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏
                await new Promise(resolve => {
                    frame.onload = resolve;
                    setTimeout(resolve, 5000);
                });
                
                const frameDoc = frame.contentDocument || frame.contentWindow.document;
                const frameWindow = frame.contentWindow;
                
                // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
                let consoleErrors = [];
                const originalError = frameWindow.console.error;
                frameWindow.console.error = function(...args) {
                    consoleErrors.push(args.join(' '));
                    originalError.apply(console, args);
                };
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                const checks = [
                    { name: 'HTML —Å—Ç—Ä—É–∫—Ç—É—Ä–∞', test: () => frameDoc.body !== null },
                    { name: '–ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', test: () => frameDoc.querySelector('.title') !== null },
                    { name: '–ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', test: () => frameDoc.querySelector('#generateBtn') !== null },
                    { name: '–ü–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–º—ã', test: () => frameDoc.querySelector('#topicInput') !== null },
                    { name: '–ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞', test: () => frameDoc.querySelector('#manualBtn') !== null },
                    { name: '–ü–æ–ª–µ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞', test: () => frameDoc.querySelector('#manualInput') !== null },
                    { name: '–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∫–∞—Ä—É—Å–µ–ª–∏', test: () => frameDoc.querySelector('#carouselContainer') !== null },
                    { name: 'CSS —Å—Ç–∏–ª–∏', test: () => frameWindow.getComputedStyle(frameDoc.body).backgroundColor !== 'rgba(0, 0, 0, 0)' }
                ];
                
                let passed = 0;
                let failed = 0;
                
                checks.forEach(check => {
                    try {
                        if (check.test()) {
                            passed++;
                            log(`‚úÖ ${check.name}: OK`, 'success', 'mainAppLog');
                        } else {
                            failed++;
                            log(`‚ùå ${check.name}: FAIL`, 'error', 'mainAppLog');
                        }
                    } catch (e) {
                        failed++;
                        log(`‚ùå ${check.name}: ERROR - ${e.message}`, 'error', 'mainAppLog');
                    }
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                setTimeout(() => {
                    try {
                        if (frameWindow.currentSlides !== undefined) {
                            log('‚úÖ JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã', 'success', 'mainAppLog');
                            passed++;
                        } else {
                            log('‚ùå JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error', 'mainAppLog');
                            failed++;
                        }
                        
                        if (consoleErrors.length > 0) {
                            log(`‚ùå –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏: ${consoleErrors.length}`, 'error', 'mainAppLog');
                            consoleErrors.forEach(err => log(`  - ${err}`, 'error', 'mainAppLog'));
                            failed += consoleErrors.length;
                        } else {
                            log('‚úÖ –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫', 'success', 'mainAppLog');
                        }
                        
                        const success = failed === 0;
                        updateStatus('mainAppStatus', success ? `‚úÖ OK (${passed} –ø—Ä–æ–≤–µ—Ä–æ–∫)` : `‚ùå –ü—Ä–æ–±–ª–µ–º—ã (${failed} –æ—à–∏–±–æ–∫)`, success ? 'success' : 'error');
                        testResults.mainApp = { success, passed, failed, errors: consoleErrors };
                        testsCompleted++;
                        
                        log(`üì± index.html: ${success ? 'OK' : '–ü–†–û–ë–õ–ï–ú–´'} - ${passed} —É—Å–ø–µ—à–Ω–æ, ${failed} –æ—à–∏–±–æ–∫`, success ? 'success' : 'error');
                        
                    }, 2000);
                }, 1000);
                
            } catch (error) {
                log(`‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è index.html: ${error.message}`, 'error');
                log(`‚ùå ${error.message}`, 'error', 'mainAppLog');
                updateStatus('mainAppStatus', '‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞', 'error');
                testResults.mainApp = { success: false, error: error.message };
                testsCompleted++;
            }
        }

        async function testWorkingApp() {
            log('üéØ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ working-app.html...', 'info');
            log('üéØ –ó–∞–≥—Ä—É–∑–∫–∞ working-app.html...', 'info', 'workingAppLog');
            updateStatus('workingAppStatus', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'warning');
            
            try {
                const frame = document.getElementById('workingAppFrame');
                frame.classList.remove('hidden');
                
                await new Promise(resolve => {
                    frame.onload = resolve;
                    setTimeout(resolve, 5000);
                });
                
                const frameDoc = frame.contentDocument || frame.contentWindow.document;
                const frameWindow = frame.contentWindow;
                
                let consoleErrors = [];
                const originalError = frameWindow.console.error;
                frameWindow.console.error = function(...args) {
                    consoleErrors.push(args.join(' '));
                    originalError.apply(console, args);
                };
                
                // –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è working-app
                const checks = [
                    { name: '–ë–∞–∑–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞', test: () => frameDoc.body !== null },
                    { name: '–†–µ–¥–∞–∫—Ç–æ—Ä —Å–ª–∞–π–¥–æ–≤', test: () => frameDoc.querySelector('#editorContainer') !== null },
                    { name: '–ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞', test: () => frameDoc.querySelector('#addTextBtn') !== null },
                    { name: '–†–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤', test: () => frameDoc.querySelector('#textBlockEditor') !== null },
                    { name: '–ö–æ–Ω—Ç—Ä–æ–ª—ã —à—Ä–∏—Ñ—Ç–æ–≤', test: () => frameDoc.querySelector('#blockFont') !== null },
                    { name: 'Google Fonts', test: () => frameDoc.querySelectorAll('link[href*="fonts.googleapis.com"]').length > 0 },
                    { name: '–°–∏—Å—Ç–µ–º–∞ —à—Ä–∏—Ñ—Ç–æ–≤ –≤ JS', test: () => frameWindow.fontSystem !== undefined },
                    { name: '–§—É–Ω–∫—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤', test: () => typeof frameWindow.createNewTextBlock === 'function' }
                ];
                
                let passed = 0;
                let failed = 0;
                
                checks.forEach(check => {
                    try {
                        if (check.test()) {
                            passed++;
                            log(`‚úÖ ${check.name}: OK`, 'success', 'workingAppLog');
                        } else {
                            failed++;
                            log(`‚ùå ${check.name}: FAIL`, 'error', 'workingAppLog');
                        }
                    } catch (e) {
                        failed++;
                        log(`‚ùå ${check.name}: ERROR - ${e.message}`, 'error', 'workingAppLog');
                    }
                });
                
                setTimeout(() => {
                    if (consoleErrors.length > 0) {
                        log(`‚ùå –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏: ${consoleErrors.length}`, 'error', 'workingAppLog');
                        consoleErrors.forEach(err => log(`  - ${err}`, 'error', 'workingAppLog'));
                        failed += consoleErrors.length;
                    } else {
                        log('‚úÖ –ù–µ—Ç –∫–æ–Ω—Å–æ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫', 'success', 'workingAppLog');
                    }
                    
                    const success = failed === 0;
                    updateStatus('workingAppStatus', success ? `‚úÖ OK (${passed} –ø—Ä–æ–≤–µ—Ä–æ–∫)` : `‚ùå –ü—Ä–æ–±–ª–µ–º—ã (${failed} –æ—à–∏–±–æ–∫)`, success ? 'success' : 'error');
                    testResults.workingApp = { success, passed, failed, errors: consoleErrors };
                    testsCompleted++;
                    
                    log(`üéØ working-app.html: ${success ? 'OK' : '–ü–†–û–ë–õ–ï–ú–´'} - ${passed} —É—Å–ø–µ—à–Ω–æ, ${failed} –æ—à–∏–±–æ–∫`, success ? 'success' : 'error');
                    
                }, 2000);
                
            } catch (error) {
                log(`‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è working-app.html: ${error.message}`, 'error');
                log(`‚ùå ${error.message}`, 'error', 'workingAppLog');
                updateStatus('workingAppStatus', '‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞', 'error');
                testResults.workingApp = { success: false, error: error.message };
                testsCompleted++;
            }
        }

        async function testModules() {
            log('üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –º–æ–¥—É–ª—å–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã...', 'info');
            log('üîß –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–æ–¥—É–ª–µ–π...', 'info', 'modulesLog');
            updateStatus('modulesStatus', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'warning');
            
            try {
                const modules = [
                    'src/app.js',
                    'src/state.js',
                    'src/renderer.js',
                    'src/editor.js',
                    'src/drag.js',
                    'src/export.js',
                    'src/ai.js',
                    'src/templates.js'
                ];
                
                let found = 0;
                let missing = 0;
                let errors = [];
                
                for (const module of modules) {
                    try {
                        const response = await fetch(module);
                        if (response.ok) {
                            const content = await response.text();
                            found++;
                            log(`‚úÖ ${module}: –Ω–∞–π–¥–µ–Ω (${(content.length/1024).toFixed(1)}KB)`, 'success', 'modulesLog');
                            
                            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
                            if (content.includes('function') || content.includes('const') || content.includes('let')) {
                                log(`  ‚îî‚îÄ –°–æ–¥–µ—Ä–∂–∏—Ç JavaScript –∫–æ–¥`, 'info', 'modulesLog');
                            } else {
                                log(`  ‚îî‚îÄ ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω–æ –ø—É—Å—Ç–æ–π —Ñ–∞–π–ª`, 'warning', 'modulesLog');
                            }
                        } else {
                            missing++;
                            errors.push(`${module}: HTTP ${response.status}`);
                            log(`‚ùå ${module}: –Ω–µ –Ω–∞–π–¥–µ–Ω (${response.status})`, 'error', 'modulesLog');
                        }
                    } catch (error) {
                        missing++;
                        errors.push(`${module}: ${error.message}`);
                        log(`‚ùå ${module}: –æ—à–∏–±–∫–∞ - ${error.message}`, 'error', 'modulesLog');
                    }
                }
                
                const success = missing === 0;
                updateStatus('modulesStatus', success ? `‚úÖ OK (${found}/${modules.length})` : `‚ùå –ü—Ä–æ–±–ª–µ–º—ã (${missing} –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç)`, success ? 'success' : 'error');
                testResults.modules = { success, found, missing, errors };
                testsCompleted++;
                
                log(`üîß –ú–æ–¥—É–ª–∏: ${success ? 'OK' : '–ü–†–û–ë–õ–ï–ú–´'} - ${found} –Ω–∞–π–¥–µ–Ω–æ, ${missing} –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç`, success ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–¥—É–ª–µ–π: ${error.message}`, 'error');
                log(`‚ùå ${error.message}`, 'error', 'modulesLog');
                updateStatus('modulesStatus', '‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞', 'error');
                testResults.modules = { success: false, error: error.message };
                testsCompleted++;
            }
        }

        function testUI() {
            log('üñ±Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è...', 'info');
            log('üñ±Ô∏è –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏...', 'info', 'uiLog');
            updateStatus('uiStatus', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'warning');
            
            try {
                const buttons = document.querySelectorAll('button');
                let clickable = 0;
                let nonClickable = 0;
                
                buttons.forEach((btn, index) => {
                    const style = window.getComputedStyle(btn);
                    const isClickable = style.pointerEvents !== 'none' && 
                                      style.cursor === 'pointer' && 
                                      !btn.disabled;
                    
                    if (isClickable) {
                        clickable++;
                        log(`‚úÖ –ö–Ω–æ–ø–∫–∞ ${index + 1}: –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞`, 'success', 'uiLog');
                    } else {
                        nonClickable++;
                        log(`‚ùå –ö–Ω–æ–ø–∫–∞ ${index + 1}: –Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞`, 'error', 'uiLog');
                    }
                });
                
                const success = nonClickable === 0;
                updateStatus('uiStatus', success ? `‚úÖ OK (${clickable} –∫–Ω–æ–ø–æ–∫)` : `‚ùå –ü—Ä–æ–±–ª–µ–º—ã (${nonClickable} –Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã)`, success ? 'success' : 'error');
                testResults.ui = { success, clickable, nonClickable };
                testsCompleted++;
                
                log(`üñ±Ô∏è UI: ${success ? 'OK' : '–ü–†–û–ë–õ–ï–ú–´'} - ${clickable} –∫–ª–∏–∫–∞–±–µ–ª—å–Ω—ã, ${nonClickable} –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö`, success ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è UI: ${error.message}`, 'error');
                log(`‚ùå ${error.message}`, 'error', 'uiLog');
                updateStatus('uiStatus', '‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                testResults.ui = { success: false, error: error.message };
                testsCompleted++;
            }
        }

        function testPerformance() {
            log('‚ö° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏...', 'info');
            log('‚ö° –ò–∑–º–µ—Ä–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫...', 'info', 'performanceLog');
            updateStatus('performanceStatus', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'warning');
            
            try {
                const startTime = performance.now();
                
                // –¢–µ—Å—Ç DOM –æ–ø–µ—Ä–∞—Ü–∏–π
                const testDiv = document.createElement('div');
                testDiv.innerHTML = '<span>Test</span>'.repeat(1000);
                document.body.appendChild(testDiv);
                const domTime = performance.now() - startTime;
                document.body.removeChild(testDiv);
                
                log(`‚úÖ DOM –æ–ø–µ—Ä–∞—Ü–∏–∏: ${domTime.toFixed(2)}ms`, domTime < 100 ? 'success' : 'warning', 'performanceLog');
                
                // –¢–µ—Å—Ç –ø–∞–º—è—Ç–∏ (–ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ)
                const memoryInfo = performance.memory ? {
                    used: (performance.memory.usedJSHeapSize / 1024 / 1024).toFixed(2),
                    total: (performance.memory.totalJSHeapSize / 1024 / 1024).toFixed(2)
                } : null;
                
                if (memoryInfo) {
                    log(`‚úÖ –ü–∞–º—è—Ç—å: ${memoryInfo.used}MB / ${memoryInfo.total}MB`, 'info', 'performanceLog');
                }
                
                // –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
                const loadTime = performance.timing ? 
                    performance.timing.loadEventEnd - performance.timing.navigationStart : 0;
                
                if (loadTime > 0) {
                    log(`‚úÖ –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏: ${loadTime}ms`, loadTime < 3000 ? 'success' : 'warning', 'performanceLog');
                }
                
                const success = domTime < 200;
                updateStatus('performanceStatus', success ? '‚úÖ –•–æ—Ä–æ—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å' : '‚ö†Ô∏è –ú–µ–¥–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å', success ? 'success' : 'warning');
                testResults.performance = { success, domTime, memoryInfo, loadTime };
                testsCompleted++;
                
                log(`‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å: ${success ? 'OK' : '–ú–ï–î–õ–ï–ù–ù–û'} - DOM: ${domTime.toFixed(2)}ms`, success ? 'success' : 'warning');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏: ${error.message}`, 'error');
                log(`‚ùå ${error.message}`, 'error', 'performanceLog');
                updateStatus('performanceStatus', '‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                testResults.performance = { success: false, error: error.message };
                testsCompleted++;
            }
        }

        async function runFullAnalysis() {
            log('üî¨ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞...', 'info');
            
            // –°–±—Ä–æ—Å —Å—á–µ—Ç—á–∏–∫–æ–≤
            errorCount = 0;
            warningCount = 0;
            testsCompleted = 0;
            testResults = {};
            
            // –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
            testUI();
            testPerformance();
            await testModules();
            await testMainApp();
            await testWorkingApp();
            
            // –§–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç —á–µ—Ä–µ–∑ 8 —Å–µ–∫—É–Ω–¥
            setTimeout(() => {
                log('üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞...', 'info');
                
                const allTests = Object.values(testResults);
                const successfulTests = allTests.filter(t => t.success).length;
                
                log(`üéØ –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:`, 'info');
                log(`  ‚úÖ –£—Å–ø–µ—à–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤: ${successfulTests}/${totalTests}`, successfulTests === totalTests ? 'success' : 'warning');
                log(`  ‚ùå –û—à–∏–±–æ–∫: ${errorCount}`, errorCount === 0 ? 'success' : 'error');
                log(`  ‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: ${warningCount}`, warningCount === 0 ? 'success' : 'warning');
                
                if (errorCount === 0 && successfulTests === totalTests) {
                    log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!', 'success');
                } else {
                    log('üîß –¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º', 'warning');
                }
                
            }, 8000);
        }

        function clearLogs() {
            const logs = ['masterLog', 'mainAppLog', 'workingAppLog', 'modulesLog', 'uiLog', 'performanceLog'];
            logs.forEach(logId => {
                const logElement = document.getElementById(logId);
                if (logElement) {
                    logElement.innerHTML = '–õ–æ–≥ –æ—á–∏—â–µ–Ω...<br>';
                }
            });
            
            errorCount = 0;
            warningCount = 0;
            testsCompleted = 0;
            updateStats();
            
            log('üßπ –õ–æ–≥–∏ –æ—á–∏—â–µ–Ω—ã', 'info');
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            log('üî¨ Deep Error Analysis –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ', 'success');
            updateStats();
        });
    </script>
</body>
</html>