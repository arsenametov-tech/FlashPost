<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö° Quick Functionality Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #1a1a2e; color: #fff; font-family: Arial, sans-serif; padding: 20px; }
        .container { max-width: 800px; margin: 0 auto; }
        .test-card { background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin: 20px 0; }
        .btn { background: linear-gradient(45deg, #833ab4, #fd1d1d); color: white; border: none; padding: 12px 24px; border-radius: 8px; cursor: pointer; margin: 10px; }
        .status { padding: 10px; border-radius: 8px; margin: 10px 0; font-weight: bold; }
        .success { background: #1a5f1a; border: 2px solid #28a745; }
        .error { background: #5f1a1a; border: 2px solid #dc3545; }
        .warning { background: #5f4a1a; border: 2px solid #ffc107; }
        .log { background: #2a2a2a; border-radius: 8px; padding: 15px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; margin: 10px 0; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; }
        .test-item { background: rgba(0,0,0,0.3); padding: 15px; border-radius: 8px; text-align: center; }
        .test-result { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚ö° Quick Functionality Test</h1>
        <p>–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        
        <div id="overallStatus" class="status warning">üîÑ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é...</div>
        
        <div class="test-card">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ —Ç–µ—Å—Ç—ã</h2>
            <button class="btn" onclick="runAllTests()">‚ö° –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn" onclick="testMainApp()">üì± –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
            <button class="btn" onclick="testWorkingApp()">üéØ –¢–µ—Å—Ç —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏</button>
        </div>

        <div class="grid">
            <div class="test-item">
                <h3>üì± –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
                <div id="mainAppResult" class="test-result">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
            </div>
            
            <div class="test-item">
                <h3>üéØ –†–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è</h3>
                <div id="workingAppResult" class="test-result">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
            </div>
            
            <div class="test-item">
                <h3>üñ±Ô∏è –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å</h3>
                <div id="clickabilityResult" class="test-result">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
            </div>
            
            <div class="test-item">
                <h3>üîß JavaScript</h3>
                <div id="jsResult" class="test-result">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ</div>
            </div>
        </div>

        <div class="test-card">
            <h2>üìã –õ–æ–≥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <div id="testLog" class="log">–û–∂–∏–¥–∞–Ω–∏–µ –∑–∞–ø—É—Å–∫–∞ —Ç–µ—Å—Ç–æ–≤...<br></div>
        </div>
    </div>

    <script>
        let testLog = document.getElementById('testLog');
        let testResults = {};

        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : type === 'warning' ? '‚ö†Ô∏è' : '‚ÑπÔ∏è';
            const color = type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : type === 'warning' ? '#ffd43b' : '#74c0fc';
            
            testLog.innerHTML += `<span style="color: ${color}">[${timestamp}] ${icon} ${message}</span><br>`;
            testLog.scrollTop = testLog.scrollHeight;
        }

        function updateResult(elementId, message, success) {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = success ? `‚úÖ ${message}` : `‚ùå ${message}`;
                element.style.color = success ? '#51cf66' : '#ff6b6b';
            }
        }

        async function testMainApp() {
            log('üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
            
            try {
                // –°–æ–∑–¥–∞–µ–º —Å–∫—Ä—ã—Ç—ã–π iframe –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                const iframe = document.createElement('iframe');
                iframe.src = 'index.html';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                await new Promise(resolve => {
                    iframe.onload = resolve;
                    setTimeout(resolve, 3000); // –¢–∞–π–º–∞—É—Ç 3 —Å–µ–∫
                });
                
                const frameDoc = iframe.contentDocument || iframe.contentWindow.document;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                const checks = [
                    { name: '–ó–∞–≥–æ–ª–æ–≤–æ–∫', selector: '.title', required: true },
                    { name: '–ö–Ω–æ–ø–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', selector: '#generateBtn', required: true },
                    { name: '–ü–æ–ª–µ –≤–≤–æ–¥–∞ —Ç–µ–º—ã', selector: '#topicInput', required: true },
                    { name: '–ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞', selector: '#manualBtn', required: true },
                    { name: '–ü–æ–ª–µ —Ä—É—á–Ω–æ–≥–æ –≤–≤–æ–¥–∞', selector: '#manualInput', required: true }
                ];
                
                let passed = 0;
                let failed = 0;
                
                checks.forEach(check => {
                    const element = frameDoc.querySelector(check.selector);
                    if (element) {
                        passed++;
                        log(`‚úÖ ${check.name}: –Ω–∞–π–¥–µ–Ω`, 'success');
                    } else {
                        failed++;
                        log(`‚ùå ${check.name}: –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                    }
                });
                
                document.body.removeChild(iframe);
                
                const success = failed === 0;
                updateResult('mainAppResult', `${passed}/${checks.length} —ç–ª–µ–º–µ–Ω—Ç–æ–≤`, success);
                testResults.mainApp = success;
                
                log(`üìä –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: ${passed}/${checks.length} –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ`, success ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ${error.message}`, 'error');
                updateResult('mainAppResult', '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', false);
                testResults.mainApp = false;
            }
        }

        async function testWorkingApp() {
            log('üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏...', 'info');
            
            try {
                const iframe = document.createElement('iframe');
                iframe.src = 'working-app.html';
                iframe.style.display = 'none';
                document.body.appendChild(iframe);
                
                await new Promise(resolve => {
                    iframe.onload = resolve;
                    setTimeout(resolve, 3000);
                });
                
                const frameDoc = iframe.contentDocument || iframe.contentWindow.document;
                const frameWindow = iframe.contentWindow;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                const checks = [
                    { name: '–†–µ–¥–∞–∫—Ç–æ—Ä —Å–ª–∞–π–¥–æ–≤', selector: '#editorContainer', required: true },
                    { name: '–ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞', selector: '#addTextBtn', required: true },
                    { name: '–†–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤', selector: '#textBlockEditor', required: true },
                    { name: '–°–∏—Å—Ç–µ–º–∞ —à—Ä–∏—Ñ—Ç–æ–≤', check: () => frameDoc.querySelectorAll('link[href*="fonts.googleapis.com"]').length > 0 }
                ];
                
                let passed = 0;
                let failed = 0;
                
                checks.forEach(check => {
                    let found = false;
                    
                    if (check.selector) {
                        found = frameDoc.querySelector(check.selector) !== null;
                    } else if (check.check) {
                        found = check.check();
                    }
                    
                    if (found) {
                        passed++;
                        log(`‚úÖ ${check.name}: –Ω–∞–π–¥–µ–Ω`, 'success');
                    } else {
                        failed++;
                        log(`‚ùå ${check.name}: –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                    }
                });
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
                if (frameWindow.currentSlides !== undefined) {
                    passed++;
                    log('‚úÖ JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω—ã', 'success');
                } else {
                    failed++;
                    log('‚ùå JavaScript –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ: –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 'error');
                }
                
                document.body.removeChild(iframe);
                
                const success = failed === 0;
                updateResult('workingAppResult', `${passed}/${checks.length + 1} –ø—Ä–æ–≤–µ—Ä–æ–∫`, success);
                testResults.workingApp = success;
                
                log(`üìä –†–∞–±–æ—á–∞—è –≤–µ—Ä—Å–∏—è: ${passed}/${checks.length + 1} –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ`, success ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—á–µ–π –≤–µ—Ä—Å–∏–∏: ${error.message}`, 'error');
                updateResult('workingAppResult', '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', false);
                testResults.workingApp = false;
            }
        }

        function testClickability() {
            log('üñ±Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏...', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–Ω–æ–ø–∫–∏ –Ω–∞ —ç—Ç–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
                const buttons = document.querySelectorAll('button');
                let clickableCount = 0;
                
                buttons.forEach((btn, index) => {
                    const style = window.getComputedStyle(btn);
                    const isClickable = style.pointerEvents !== 'none' && 
                                      style.cursor === 'pointer' && 
                                      !btn.disabled;
                    
                    if (isClickable) {
                        clickableCount++;
                        log(`‚úÖ –ö–Ω–æ–ø–∫–∞ ${index + 1}: –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞`, 'success');
                    } else {
                        log(`‚ùå –ö–Ω–æ–ø–∫–∞ ${index + 1}: –Ω–µ –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞`, 'error');
                    }
                });
                
                const success = clickableCount === buttons.length;
                updateResult('clickabilityResult', `${clickableCount}/${buttons.length} –∫–Ω–æ–ø–æ–∫`, success);
                testResults.clickability = success;
                
                log(`üìä –ö–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç—å: ${clickableCount}/${buttons.length} –∫–Ω–æ–ø–æ–∫ —Ä–∞–±–æ—Ç–∞—é—Ç`, success ? 'success' : 'warning');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–ª–∏–∫–∞–±–µ–ª—å–Ω–æ—Å—Ç–∏: ${error.message}`, 'error');
                updateResult('clickabilityResult', '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', false);
                testResults.clickability = false;
            }
        }

        function testJavaScript() {
            log('üîß –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ JavaScript...', 'info');
            
            try {
                let passed = 0;
                let total = 0;
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –±–∞–∑–æ–≤—ã–µ JavaScript —Ñ—É–Ω–∫—Ü–∏–∏
                const tests = [
                    { name: 'Array methods', test: () => [1,2,3].map(x => x * 2).length === 3 },
                    { name: 'DOM manipulation', test: () => document.createElement('div') !== null },
                    { name: 'Event handling', test: () => typeof addEventListener === 'function' },
                    { name: 'Local storage', test: () => typeof localStorage !== 'undefined' },
                    { name: 'Fetch API', test: () => typeof fetch === 'function' }
                ];
                
                tests.forEach(test => {
                    total++;
                    try {
                        if (test.test()) {
                            passed++;
                            log(`‚úÖ ${test.name}: —Ä–∞–±–æ—Ç–∞–µ—Ç`, 'success');
                        } else {
                            log(`‚ùå ${test.name}: –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç`, 'error');
                        }
                    } catch (e) {
                        log(`‚ùå ${test.name}: –æ—à–∏–±–∫–∞ - ${e.message}`, 'error');
                    }
                });
                
                const success = passed === total;
                updateResult('jsResult', `${passed}/${total} —Ñ—É–Ω–∫—Ü–∏–π`, success);
                testResults.javascript = success;
                
                log(`üìä JavaScript: ${passed}/${total} —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞—é—Ç`, success ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è JavaScript: ${error.message}`, 'error');
                updateResult('jsResult', '–û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', false);
                testResults.javascript = false;
            }
        }

        async function runAllTests() {
            log('‚ö° –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤...', 'info');
            document.getElementById('overallStatus').className = 'status warning';
            document.getElementById('overallStatus').textContent = 'üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ...';
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º —Ç–µ—Å—Ç—ã –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ
            testJavaScript();
            testClickability();
            await testMainApp();
            await testWorkingApp();
            
            // –ü–æ–¥–≤–æ–¥–∏–º –∏—Ç–æ–≥–∏
            setTimeout(() => {
                const results = Object.values(testResults);
                const passed = results.filter(r => r).length;
                const total = results.length;
                const success = passed === total;
                
                const status = document.getElementById('overallStatus');
                status.className = `status ${success ? 'success' : 'error'}`;
                status.textContent = success ? 
                    '‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!' : 
                    `‚ùå –ü—Ä–æ–π–¥–µ–Ω–æ ${passed}/${total} —Ç–µ—Å—Ç–æ–≤`;
                
                log(`üéØ –ò–¢–û–ì–û–í–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢: ${passed}/${total} —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ`, success ? 'success' : 'error');
                
                if (success) {
                    log('üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!', 'success');
                } else {
                    log('‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤', 'warning');
                }
                
            }, 2000);
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            log('‚ö° Quick Functionality Test –∑–∞–≥—Ä—É–∂–µ–Ω', 'info');
        });
    </script>
</body>
</html>