<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∞–≤—Ç–æ-–∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</title>
    <link rel="stylesheet" href="app.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800;900&family=Bebas+Neue&family=Playfair+Display:wght@400;500;600;700;800;900&family=Manrope:wght@300;400;500;600;700;800&family=Rubik:wght@300;400;500;600;700;800;900&family=Oswald:wght@300;400;500;600;700&family=PT+Sans:wght@400;700&family=Lora:wght@400;500;600;700&display=swap&subset=cyrillic" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-title {
            font-size: 28px;
            font-weight: 800;
            color: #333;
            margin-bottom: 10px;
        }
        
        .test-subtitle {
            color: #666;
            font-size: 16px;
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 12px;
            border-left: 4px solid #833ab4;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #833ab4, #fd1d1d);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(131, 58, 180, 0.3);
        }
        
        .test-result {
            margin-top: 15px;
            padding: 15px;
            background: white;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
        }
        
        .keyword-highlight.manual {
            color: #ff6b6b;
            font-weight: 800;
            text-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
        }
        
        .keyword-highlight.auto {
            color: #4ecdc4;
            font-weight: 700;
            text-shadow: 0 0 6px rgba(78, 205, 196, 0.3);
            opacity: 0.9;
        }
        
        .status {
            padding: 10px;
            border-radius: 6px;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        
        .status.info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1 class="test-title">üîç –¢–µ—Å—Ç –∞–≤—Ç–æ-–∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</h1>
            <p class="test-subtitle">–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π AI —Å–∏—Å—Ç–µ–º—ã –∏ –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏</p>
        </div>
        
        <div class="test-section">
            <h2 class="section-title">1. –¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é extractKeywordsFromText:</p>
            <button class="test-button" onclick="testKeywordExtraction()">–¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</button>
            <div id="keywordResult" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2 class="section-title">2. –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ—É–Ω–∫—Ü–∏—é parseTextWithKeywords:</p>
            <button class="test-button" onclick="testTextParsing()">–¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞</button>
            <div id="parsingResult" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2 class="section-title">3. –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º —Ä–∞–±–æ—Ç—É –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫—É:</p>
            <button class="test-button" onclick="testAutoHighlightToggle()">–¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è</button>
            <div id="toggleResult" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2 class="section-title">4. –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞</h2>
            <p>–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è ‚Üí –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ ‚Üí –ø–æ–¥—Å–≤–µ—Ç–∫–∞:</p>
            <button class="test-button" onclick="testFullCycle()">–ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
            <div id="fullCycleResult" class="test-result" style="display: none;"></div>
        </div>
        
        <div class="test-section">
            <h2 class="section-title">5. –í–∏–∑—É–∞–ª—å–Ω—ã–π —Ç–µ—Å—Ç</h2>
            <p>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏:</p>
            <button class="test-button" onclick="showVisualDemo()">–ü–æ–∫–∞–∑–∞—Ç—å –¥–µ–º–æ</button>
            <div id="visualDemo" class="test-result" style="display: none;"></div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        let app;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            console.log('üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            app = new FlashPostApp();
        });
        
        // –¢–µ—Å—Ç 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        async function testKeywordExtraction() {
            const result = document.getElementById('keywordResult');
            result.style.display = 'block';
            result.innerHTML = '<div class="status info">‚è≥ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...</div>';
            
            const testTexts = [
                "–ö–∞–∫ —Å–æ–∑–¥–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–π –±–∏–∑–Ω–µ—Å –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–µ –∏ –∑–∞—Ä–∞–±–æ—Ç–∞—Ç—å –ø–µ—Ä–≤—ã–π –º–∏–ª–ª–∏–æ–Ω",
                "–ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ –¥–ª—è –ø–æ—Ö—É–¥–µ–Ω–∏—è: —Ç–æ–ø-10 –ø—Ä–æ–¥—É–∫—Ç–æ–≤",
                "–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏–∑–º–µ–Ω–∏—Ç –º–∏—Ä —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π –Ω–∞–≤—Å–µ–≥–¥–∞"
            ];
            
            let html = '<div class="status success">‚úÖ –¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</div>';
            
            for (let i = 0; i < testTexts.length; i++) {
                const text = testTexts[i];
                html += `<h4>–¢–µ–∫—Å—Ç ${i + 1}:</h4>`;
                html += `<p><strong>–ò—Å—Ö–æ–¥–Ω—ã–π:</strong> ${text}</p>`;
                
                try {
                    // –¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ
                    const basicKeywords = app.extractBasicKeywords(text);
                    html += `<p><strong>–ë–∞–∑–æ–≤—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> ${basicKeywords.join(', ')}</p>`;
                    
                    // –¢–µ—Å—Ç–∏—Ä—É–µ–º AI –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
                    try {
                        const aiKeywords = await app.extractKeywordsFromText(text);
                        html += `<p><strong>AI –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> ${aiKeywords.join(', ')}</p>`;
                    } catch (error) {
                        html += `<p><strong>AI –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> <em>AI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –±–∞–∑–æ–≤—ã–µ</em></p>`;
                    }
                    
                } catch (error) {
                    html += `<p class="status error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</p>`;
                }
                
                html += '<hr>';
            }
            
            result.innerHTML = html;
        }
        
        // –¢–µ—Å—Ç 2: –ü–∞—Ä—Å–∏–Ω–≥ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
        function testTextParsing() {
            const result = document.getElementById('parsingResult');
            result.style.display = 'block';
            
            const testText = "–°–æ–∑–¥–∞–Ω–∏–µ *—É—Å–ø–µ—à–Ω–æ–≥–æ* –±–∏–∑–Ω–µ—Å–∞ —Ç—Ä–µ–±—É–µ—Ç –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π";
            const autoKeywords = ["–±–∏–∑–Ω–µ—Å–∞", "–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è", "–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–π"];
            const keywordColor = '#ff6b6b';
            
            let html = '<div class="status success">‚úÖ –¢–µ—Å—Ç –ø–∞—Ä—Å–∏–Ω–≥–∞ —Ç–µ–∫—Å—Ç–∞</div>';
            html += `<h4>–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:</h4>`;
            html += `<p>${testText}</p>`;
            html += `<h4>–ê–≤—Ç–æ-–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</h4>`;
            html += `<p>${autoKeywords.join(', ')}</p>`;
            
            // –¢–µ—Å—Ç —Å –≤–∫–ª—é—á–µ–Ω–Ω–æ–π –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
            const parsedWithAuto = app.parseTextWithKeywords(testText, keywordColor, true, autoKeywords);
            html += `<h4>–° –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–æ–π:</h4>`;
            html += `<div style="padding: 15px; background: #f0f0f0; border-radius: 8px; margin: 10px 0;">${parsedWithAuto}</div>`;
            
            // –¢–µ—Å—Ç –±–µ–∑ –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏
            const parsedWithoutAuto = app.parseTextWithKeywords(testText, keywordColor, true, []);
            html += `<h4>–ë–µ–∑ –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏:</h4>`;
            html += `<div style="padding: 15px; background: #f0f0f0; border-radius: 8px; margin: 10px 0;">${parsedWithoutAuto}</div>`;
            
            html += `<p><small><strong>–õ–µ–≥–µ–Ω–¥–∞:</strong> <span class="keyword-highlight manual">–†—É—á–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ (*—Å–ª–æ–≤–æ*)</span>, <span class="keyword-highlight auto">–ê–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ç AI</span></small></p>`;
            
            result.innerHTML = html;
        }
        
        // –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏
        function testAutoHighlightToggle() {
            const result = document.getElementById('toggleResult');
            result.style.display = 'block';
            
            let html = '<div class="status success">‚úÖ –¢–µ—Å—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–∏</div>';
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫
            const testBlock = {
                id: 'test_block',
                text: '–ò–∑—É—á–µ–Ω–∏–µ *–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è* –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∫–∞—Ä—å–µ—Ä—ã',
                autoHighlight: true,
                highlightEnabled: true,
                keywordColor: '#ff6b6b',
                glow: false
            };
            
            const autoKeywords = ['–ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è', '–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏', '–∫–∞—Ä—å–µ—Ä—ã'];
            
            html += `<h4>–¢–µ—Å—Ç–æ–≤—ã–π –±–ª–æ–∫:</h4>`;
            html += `<p><strong>–¢–µ–∫—Å—Ç:</strong> ${testBlock.text}</p>`;
            html += `<p><strong>–ê–≤—Ç–æ-–∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> ${autoKeywords.join(', ')}</p>`;
            
            // –¢–µ—Å—Ç –±–µ–∑ —Å–≤–µ—á–µ–Ω–∏—è
            html += `<h4>–ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–≤–µ—á–µ–Ω–∏—è (glow = false):</h4>`;
            const withAutoKeywords = testBlock.autoHighlight ? autoKeywords : [];
            const resultWithoutGlow = app.parseTextWithKeywords(testBlock.text, testBlock.keywordColor, testBlock.highlightEnabled, withAutoKeywords, false);
            html += `<div style="padding: 15px; background: #f0f0f0; border-radius: 8px; margin: 10px 0;">${resultWithoutGlow}</div>`;
            
            // –¢–µ—Å—Ç —Å —Å–≤–µ—á–µ–Ω–∏–µ–º
            html += `<h4>–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è (glow = true):</h4>`;
            testBlock.glow = true;
            const resultWithGlow = app.parseTextWithKeywords(testBlock.text, testBlock.keywordColor, testBlock.highlightEnabled, withAutoKeywords, true);
            html += `<div style="padding: 15px; background: #2c3e50; color: white; border-radius: 8px; margin: 10px 0;">${resultWithGlow}</div>`;
            
            // –¢–µ—Å—Ç —Å –≤—ã–∫–ª—é—á–µ–Ω–Ω–æ–π –∞–≤—Ç–æ-–ø–æ–¥—Å–≤–µ—Ç–∫–æ–π
            html += `<h4>autoHighlight = false (—Ç–æ–ª—å–∫–æ —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞):</h4>`;
            testBlock.autoHighlight = false;
            const withoutAutoKeywords = testBlock.autoHighlight ? autoKeywords : [];
            const resultWithoutAuto = app.parseTextWithKeywords(testBlock.text, testBlock.keywordColor, testBlock.highlightEnabled, withoutAutoKeywords, true);
            html += `<div style="padding: 15px; background: #2c3e50; color: white; border-radius: 8px; margin: 10px 0;">${resultWithoutAuto}</div>`;
            
            html += `<div class="status info">‚ÑπÔ∏è –≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º, –∞ –Ω–µ –∫–æ –≤—Å–µ–º—É –±–ª–æ–∫—É!</div>`;
            
            result.innerHTML = html;
        }
        
        // –¢–µ—Å—Ç 4: –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª
        async function testFullCycle() {
            const result = document.getElementById('fullCycleResult');
            result.style.display = 'block';
            result.innerHTML = '<div class="status info">‚è≥ –í—ã–ø–æ–ª–Ω—è–µ–º –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Ü–∏–∫–ª–∞...</div>';
            
            try {
                let html = '<div class="status success">‚úÖ –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Ü–∏–∫–ª–∞</div>';
                
                // –®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª–∞–π–¥—ã
                const testSlides = [
                    {
                        id: 'slide_1',
                        title: '–°–ª–∞–π–¥ 1',
                        text: '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç —Ä–µ–≤–æ–ª—é—Ü–∏–æ–Ω–∏–∑–∏—Ä—É–µ—Ç —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏'
                    },
                    {
                        id: 'slide_2', 
                        title: '–°–ª–∞–π–¥ 2',
                        text: '–ú–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å—ã'
                    }
                ];
                
                html += `<h4>–®–∞–≥ 1: –ò—Å—Ö–æ–¥–Ω—ã–µ —Å–ª–∞–π–¥—ã</h4>`;
                testSlides.forEach((slide, index) => {
                    html += `<p><strong>–°–ª–∞–π–¥ ${index + 1}:</strong> ${slide.text}</p>`;
                });
                
                // –®–∞–≥ 2: –ò–∑–≤–ª–µ–∫–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                html += `<h4>–®–∞–≥ 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</h4>`;
                const slidesWithKeywords = await app.extractKeywordsForSlides(testSlides);
                
                slidesWithKeywords.forEach((slide, index) => {
                    html += `<p><strong>–°–ª–∞–π–¥ ${index + 1} –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> ${(slide.keywords || []).join(', ')}</p>`;
                });
                
                // –®–∞–≥ 3: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å—Ç–∏–ª–∏ —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –±–ª–æ–∫–∞–º–∏
                app.slides = slidesWithKeywords;
                app.initializeSlideStyles();
                
                html += `<h4>–®–∞–≥ 3: –†–µ–∑—É–ª—å—Ç–∞—Ç —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π</h4>`;
                slidesWithKeywords.forEach((slide, index) => {
                    const slideStyle = app.slideStyles[index];
                    if (slideStyle && slideStyle.textBlocks && slideStyle.textBlocks.length > 0) {
                        const block = slideStyle.textBlocks[0];
                        const autoKeywords = block.autoHighlight !== false ? (slide.autoKeywords || []) : [];
                        const parsedText = app.parseTextWithKeywords(block.text, block.keywordColor || '#ff6b6b', block.highlightEnabled !== false, autoKeywords);
                        html += `<div style="padding: 15px; background: #f0f0f0; border-radius: 8px; margin: 10px 0;"><strong>–°–ª–∞–π–¥ ${index + 1}:</strong><br>${parsedText}</div>`;
                    }
                });
                
                html += `<div class="status success">‚úÖ –ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!</div>`;
                result.innerHTML = html;
                
            } catch (error) {
                result.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ –≤ –ø–æ–ª–Ω–æ–º —Ü–∏–∫–ª–µ: ${error.message}</div>`;
            }
        }
        
        // –¢–µ—Å—Ç 5: –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è
        function showVisualDemo() {
            const result = document.getElementById('visualDemo');
            result.style.display = 'block';
            
            let html = '<div class="status success">‚úÖ –í–∏–∑—É–∞–ª—å–Ω–∞—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è</div>';
            
            const demoTexts = [
                {
                    text: "–°–æ–∑–¥–∞–Ω–∏–µ *—É—Å–ø–µ—à–Ω–æ–≥–æ* —Å—Ç–∞—Ä—Ç–∞–ø–∞ —Ç—Ä–µ–±—É–µ—Ç –∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ä–µ—à–µ–Ω–∏–π –∏ –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –ø—Ä–æ–¥—É–∫—Ç–∞",
                    autoKeywords: ["—Å—Ç–∞—Ä—Ç–∞–ø–∞", "–∏–Ω–Ω–æ–≤–∞—Ü–∏–æ–Ω–Ω—ã—Ö", "—Ä–µ—à–µ–Ω–∏–π", "–ø—Ä–æ–¥—É–∫—Ç–∞"]
                },
                {
                    text: "–ó–¥–æ—Ä–æ–≤–æ–µ *–ø–∏—Ç–∞–Ω–∏–µ* –≤–∫–ª—é—á–∞–µ—Ç –æ–≤–æ—â–∏, —Ñ—Ä—É–∫—Ç—ã –∏ –ø–æ–ª–µ–∑–Ω—ã–µ –∂–∏—Ä—ã",
                    autoKeywords: ["–ø–∏—Ç–∞–Ω–∏–µ", "–æ–≤–æ—â–∏", "—Ñ—Ä—É–∫—Ç—ã", "–∂–∏—Ä—ã"]
                },
                {
                    text: "*–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏* –≤ –æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–Ω–æ—Å—è—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—É—é –ø—Ä–∏–±—ã–ª—å –∏ —Ä–∞–∑–≤–∏—Ç–∏–µ",
                    autoKeywords: ["–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ", "–ø—Ä–∏–±—ã–ª—å", "—Ä–∞–∑–≤–∏—Ç–∏–µ"]
                }
            ];
            
            demoTexts.forEach((demo, index) => {
                html += `<h4>–ü—Ä–∏–º–µ—Ä ${index + 1}:</h4>`;
                html += `<p><strong>–ò—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç:</strong> ${demo.text}</p>`;
                html += `<p><strong>AI –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞:</strong> ${demo.autoKeywords.join(', ')}</p>`;
                
                // –ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–≤–µ—á–µ–Ω–∏—è
                const withoutGlow = app.parseTextWithKeywords(demo.text, '#ff6b6b', true, demo.autoKeywords, false);
                html += `<p><strong>–ë–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–∞ —Å–≤–µ—á–µ–Ω–∏—è:</strong></p>`;
                html += `<div style="padding: 15px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border-radius: 8px; margin: 10px 0; font-size: 16px; line-height: 1.4;">${withoutGlow}</div>`;
                
                // –° —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è
                const withGlow = app.parseTextWithKeywords(demo.text, '#ff6b6b', true, demo.autoKeywords, true);
                html += `<p><strong>–° —ç—Ñ—Ñ–µ–∫—Ç–æ–º —Å–≤–µ—á–µ–Ω–∏—è:</strong></p>`;
                html += `<div style="padding: 15px; background: #2c3e50; color: white; border-radius: 8px; margin: 10px 0; font-size: 16px; line-height: 1.4;">${withGlow}</div>`;
                
                // –¢–æ–ª—å–∫–æ —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                const onlyManual = app.parseTextWithKeywords(demo.text, '#ff6b6b', true, [], true);
                html += `<p><strong>–¢–æ–ª—å–∫–æ —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (*—Å–ª–æ–≤–æ*):</strong></p>`;
                html += `<div style="padding: 15px; background: #f8f9fa; border: 1px solid #e0e0e0; border-radius: 8px; margin: 10px 0; font-size: 16px; line-height: 1.4;">${onlyManual}</div>`;
                
                html += '<hr>';
            });
            
            html += `<div class="status info">‚ÑπÔ∏è <strong>–ù–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:</strong><br>
                     üî• <strong>–≠—Ñ—Ñ–µ–∫—Ç —Å–≤–µ—á–µ–Ω–∏—è –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º</strong><br>
                     <span class="keyword-highlight manual">–ö—Ä–∞—Å–Ω–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞</span> - —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (*—Å–ª–æ–≤–æ*)<br>
                     <span class="keyword-highlight auto">–ì–æ–ª—É–±–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞</span> - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –æ—Ç AI<br>
                     ‚ú® –°–≤–µ—á–µ–Ω–∏–µ —É—Å–∏–ª–∏–≤–∞–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫—É –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, –Ω–æ –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –≤–µ—Å—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫</div>`;
            
            result.innerHTML = html;
        }
    </script>
</body>
</html>