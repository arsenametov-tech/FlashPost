<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashPost - –¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ Preview</title>
    <link rel="stylesheet" href="app.css">
    <style>
        /* –ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª—è–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã–µ CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ */
        :root {
            --tg-bg: #ffffff;
            --tg-text: #000000;
            --primary: #833ab4;
        }
        
        /* –ò—Å–ø—Ä–∞–≤–ª—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ —Å—Ç–∏–ª–∏ */
        .editor-section {
            background: #ffffff !important;
            color: #333 !important;
        }
        
        .carousel-section {
            background: transparent !important;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(20px) !important;
            border: 1px solid rgba(255, 255, 255, 0.2) !important;
        }
        
        /* –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å */
        .debug-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            z-index: 1000;
            max-width: 300px;
            font-size: 12px;
        }
        
        .debug-panel h3 {
            margin: 0 0 12px 0;
            font-size: 14px;
            color: #333;
        }
        
        .debug-info {
            margin-bottom: 8px;
            padding: 4px 8px;
            background: #f8f9fa;
            border-radius: 4px;
            font-family: monospace;
        }
        
        .debug-info.error {
            background: #ffebee;
            color: #c62828;
        }
        
        .debug-info.success {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .debug-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .debug-btn {
            padding: 6px 12px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 4px;
            cursor: pointer;
            font-size: 11px;
        }
        
        .debug-btn:hover {
            background: #f0f0f0;
        }
    </style>
</head>
<body>
    <!-- –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∞—è –ø–∞–Ω–µ–ª—å -->
    <div class="debug-panel">
        <h3>üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</h3>
        <div class="debug-info" id="currentState">–°–æ—Å—Ç–æ—è–Ω–∏–µ: –ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div class="debug-info" id="slidesCount">–°–ª–∞–π–¥–æ–≤: 0</div>
        <div class="debug-info" id="currentSlide">–¢–µ–∫—É—â–∏–π —Å–ª–∞–π–¥: 0</div>
        <div class="debug-info" id="lastError">–û—à–∏–±–æ–∫: –Ω–µ—Ç</div>
        
        <div class="debug-buttons">
            <button class="debug-btn" onclick="testShowCarousel()">–ö–∞—Ä—É—Å–µ–ª—å</button>
            <button class="debug-btn" onclick="testOpenEditor()">–†–µ–¥–∞–∫—Ç–æ—Ä</button>
            <button class="debug-btn" onclick="testSaveAndExit()">–ì–æ—Ç–æ–≤–æ</button>
        </div>
    </div>

    <div id="app">
        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JS -->
    </div>

    <script src="app.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        const app = new FlashPostApp();
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        const testSlides = [
            {
                title: "Hook",
                text: "üî• –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª–∞–π–¥ 1\n\n–ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è."
            },
            {
                title: "Problem", 
                text: "‚ùå –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª–∞–π–¥ 2\n\n–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤ –ø—Ä–æ—Å–º–æ—Ç—Ä."
            },
            {
                title: "Solution",
                text: "‚úÖ –¢–µ—Å—Ç–æ–≤—ã–π —Å–ª–∞–π–¥ 3\n\n–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –ø—Ä–∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏."
            }
        ];

        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        app.slides = testSlides;
        app.initializeSlideStyles();
        
        // –î–æ–±–∞–≤–ª—è–µ–º Instagram –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        const instagramInput = document.createElement('input');
        instagramInput.id = 'instagramInput';
        instagramInput.value = '@test_preview';
        instagramInput.style.display = 'none';
        document.body.appendChild(instagramInput);
        
        // –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        function updateDebugInfo() {
            const currentStateEl = document.getElementById('currentState');
            const slidesCountEl = document.getElementById('slidesCount');
            const currentSlideEl = document.getElementById('currentSlide');
            const lastErrorEl = document.getElementById('lastError');
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
            const appEl = document.getElementById('app');
            let currentState = '–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ';
            
            if (appEl.querySelector('#carouselSection')) {
                currentState = '–ö–∞—Ä—É—Å–µ–ª—å (Preview)';
                currentStateEl.className = 'debug-info success';
            } else if (appEl.querySelector('#editorSection')) {
                currentState = '–†–µ–¥–∞–∫—Ç–æ—Ä';
                currentStateEl.className = 'debug-info';
            } else if (appEl.querySelector('#startSection')) {
                currentState = '–ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω';
                currentStateEl.className = 'debug-info';
            } else {
                currentState = '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏';
                currentStateEl.className = 'debug-info error';
            }
            
            currentStateEl.textContent = `–°–æ—Å—Ç–æ—è–Ω–∏–µ: ${currentState}`;
            slidesCountEl.textContent = `–°–ª–∞–π–¥–æ–≤: ${app.slides.length}`;
            currentSlideEl.textContent = `–¢–µ–∫—É—â–∏–π —Å–ª–∞–π–¥: ${app.currentSlide + 1}`;
        }
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        window.addEventListener('error', (e) => {
            const lastErrorEl = document.getElementById('lastError');
            lastErrorEl.textContent = `–û—à–∏–±–∫–∞: ${e.message}`;
            lastErrorEl.className = 'debug-info error';
            console.error('üö® –ü–µ—Ä–µ—Ö–≤–∞—á–µ–Ω–∞ –æ—à–∏–±–∫–∞:', e);
        });
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º console.error
        const originalConsoleError = console.error;
        console.error = function(...args) {
            const lastErrorEl = document.getElementById('lastError');
            if (lastErrorEl) {
                lastErrorEl.textContent = `Console Error: ${args[0]}`;
                lastErrorEl.className = 'debug-info error';
            }
            originalConsoleError.apply(console, args);
        };
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
        function testShowCarousel() {
            console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º showCarousel()');
            try {
                app.showCarousel();
                setTimeout(updateDebugInfo, 100);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ showCarousel():', error);
            }
        }
        
        function testOpenEditor() {
            console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º openEditor()');
            try {
                app.openEditor();
                setTimeout(updateDebugInfo, 100);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ openEditor():', error);
            }
        }
        
        function testSaveAndExit() {
            console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º saveAndExit()');
            try {
                app.saveAndExit();
                setTimeout(updateDebugInfo, 100);
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ saveAndExit():', error);
            }
        }
        
        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—É—Å–µ–ª—å —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É
        setTimeout(() => {
            console.log('üöÄ –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—É—Å–µ–ª—å –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...');
            testShowCarousel();
        }, 1000);
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫—É–Ω–¥—ã
        setInterval(updateDebugInfo, 2000);
        
        console.log(`
üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê –ù–ê–í–ò–ì–ê–¶–ò–ò PREVIEW

–¢–µ—Å—Ç–∏—Ä—É–µ–º –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏:

1. –ö–ê–†–£–°–ï–õ–¨ (Preview):
   ‚Ä¢ –§—É–Ω–∫—Ü–∏—è: app.showCarousel()
   ‚Ä¢ –≠–ª–µ–º–µ–Ω—Ç: #carouselSection
   ‚Ä¢ –ö–Ω–æ–ø–∫–∏: "–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å", –Ω–∞–≤–∏–≥–∞—Ü–∏—è —Å–ª–∞–π–¥–æ–≤

2. –†–ï–î–ê–ö–¢–û–†:
   ‚Ä¢ –§—É–Ω–∫—Ü–∏—è: app.openEditor()
   ‚Ä¢ –≠–ª–µ–º–µ–Ω—Ç: #editorSection
   ‚Ä¢ –ö–Ω–æ–ø–∫–∏: "–ì–æ—Ç–æ–≤–æ", "–ù–∞–∑–∞–¥"

3. –ü–ï–†–ï–•–û–î –ì–û–¢–û–í–û ‚Üí PREVIEW:
   ‚Ä¢ –§—É–Ω–∫—Ü–∏—è: app.saveAndExit() ‚Üí app.exitEditor() ‚Üí app.showCarousel()
   ‚Ä¢ –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ –∫–∞—Ä—É—Å–µ–ª–∏

–ü—Ä–æ–≤–µ—Ä—è–µ–º:
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è
‚úÖ –†–µ–Ω–¥–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚úÖ –ù–∞–≤–∏–≥–∞—Ü–∏—è –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–Ω–æ–ø–∫–∏ –≤ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –ø–∞–Ω–µ–ª–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è!
        `);
        
        console.log('‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
    </script>
</body>
</html>