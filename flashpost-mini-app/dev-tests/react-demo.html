<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashPost React Demo</title>
    <link rel="stylesheet" href="app.css">
    <style>
        .spinner {
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-top: 2px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .editor-placeholder {
            text-align: center;
            padding: 40px;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            border-radius: var(--radius);
            border: 1px solid var(--glass-border);
            color: rgba(255, 255, 255, 0.9);
        }
        
        .editor-placeholder h2 {
            margin-bottom: 20px;
            font-size: 24px;
        }
    </style>
</head>
<body>
    <!-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø—É–∑—ã—Ä—å–∫–∏ -->
    <div class="bubbles">
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
        <div class="bubble"></div>
    </div>

    <!-- React App –±—É–¥–µ—Ç –º–æ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è –∑–¥–µ—Å—å -->
    <div id="react-root"></div>

    <!-- React CDN –¥–ª—è –¥–µ–º–æ -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <!-- React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç -->
    <script type="text/babel">
        const { useState, useEffect } = React;

        // Simplified React version based on your JSX structure
        const SimpleCarousel = ({ slides }) => {
            const [currentSlide, setCurrentSlide] = useState(0);
            const [isSaving, setIsSaving] = useState(false);

            // Save slide function using html2canvas
            const saveSlide = async (slideIndex) => {
                setIsSaving(true);
                
                try {
                    const slideElement = document.getElementById(`react-slide-${slideIndex}`);
                    if (!slideElement) {
                        throw new Error('Slide element not found');
                    }

                    const canvas = await html2canvas(slideElement, {
                        backgroundColor: null,
                        scale: 2,
                        useCORS: true,
                        allowTaint: true,
                        width: 1080,
                        height: 1080
                    });

                    const link = document.createElement('a');
                    link.download = `flashpost-react-slide-${slideIndex + 1}.png`;
                    link.href = canvas.toDataURL('image/png', 1.0);
                    
                    document.body.appendChild(link);
                    link.click();
                    document.body.removeChild(link);
                    
                } catch (error) {
                    console.error('Error saving slide:', error);
                    alert('–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–ª–∞–π–¥–∞');
                } finally {
                    setIsSaving(false);
                }
            };

            return (
                <div className="carousel">
                    {slides.map((s, i) => (
                        <div 
                            key={i} 
                            id={`react-slide-${i}`}
                            className={`slide ${i === currentSlide ? 'active' : ''}`}
                            style={{ display: i === currentSlide ? 'flex' : 'none' }}
                        >
                            <div className="slide-content">
                                <h2 style={{ color: 'white', marginBottom: '16px', fontSize: '18px' }}>
                                    {s.title}
                                </h2>
                                <p style={{ color: 'white', fontSize: '16px', lineHeight: '1.4' }}>
                                    {s.text}
                                </p>
                            </div>
                            <div className="slide-number">{i + 1}/{slides.length}</div>
                            
                            {/* Save button for current slide */}
                            {i === currentSlide && (
                                <button 
                                    className="slide-save-btn"
                                    onClick={() => saveSlide(i)}
                                    disabled={isSaving}
                                    title="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ª–∞–π–¥"
                                >
                                    {isSaving ? (
                                        <div className="spinner-small"></div>
                                    ) : (
                                        'üíæ'
                                    )}
                                </button>
                            )}
                        </div>
                    ))}
                    
                    <div className="carousel-nav" style={{ marginTop: '16px' }}>
                        <button 
                            className="nav-btn" 
                            onClick={() => setCurrentSlide(Math.max(0, currentSlide - 1))}
                            disabled={currentSlide === 0}
                        >
                            ‚Äπ
                        </button>
                        
                        <div className="indicators">
                            {slides.map((_, index) => (
                                <div
                                    key={index}
                                    className={`indicator ${index === currentSlide ? 'active' : ''}`}
                                    onClick={() => setCurrentSlide(index)}
                                />
                            ))}
                        </div>
                        
                        <button 
                            className="nav-btn" 
                            onClick={() => setCurrentSlide(Math.min(slides.length - 1, currentSlide + 1))}
                            disabled={currentSlide === slides.length - 1}
                        >
                            ‚Ä∫
                        </button>
                    </div>
                </div>
            );
        };

        const FlashPostReactDemo = () => {
            const [slides, setSlides] = useState([]);
            const [topic, setTopic] = useState('');
            const [currentView, setCurrentView] = useState('start');
            const [isGenerating, setIsGenerating] = useState(false);

            const popularTopics = [
                "AI –∏ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏", "–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã", "–õ–∏—á–Ω—ã–π –±—Ä–µ–Ω–¥", 
                "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å", "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏", "–°–∞–º–æ—Ä–∞–∑–≤–∏—Ç–∏–µ"
            ];

            const generateSlides = async (selectedTopic) => {
                setIsGenerating(true);
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                const generatedSlides = [
                    { title: "Hook", text: `üî• –°–µ–∫—Ä–µ—Ç—ã ${selectedTopic.toLowerCase()}, –∫–æ—Ç–æ—Ä—ã–µ –∏–∑–º–µ–Ω—è—Ç –∂–∏–∑–Ω—å` },
                    { title: "Problem", text: `‚ùå –ì–ª–∞–≤–Ω–∞—è –æ—à–∏–±–∫–∞ –≤ ${selectedTopic.toLowerCase()}` },
                    { title: "Solution", text: `‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —É—Å–ø–µ—Ö–∞` },
                    { title: "Step1", text: `1Ô∏è‚É£ –ü–µ—Ä–≤—ã–π —à–∞–≥ –∫ –º–∞—Å—Ç–µ—Ä—Å—Ç–≤—É` },
                    { title: "Step2", text: `2Ô∏è‚É£ –ö–∞–∫ –∏–∑–±–µ–∂–∞—Ç—å –æ—à–∏–±–æ–∫` },
                    { title: "Step3", text: `3Ô∏è‚É£ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏` },
                    { title: "Tools", text: `üõ†Ô∏è Must-have –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã` },
                    { title: "Results", text: `üìä –†–µ–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã` },
                    { title: "CTA", text: `üéØ –ù–∞—á–Ω–∏—Ç–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å —Å–µ–≥–æ–¥–Ω—è!` }
                ];
                
                setSlides(generatedSlides);
                setCurrentView('carousel');
                setIsGenerating(false);
            };

            if (currentView === 'carousel') {
                return (
                    <div className="app">
                        <div className="carousel-section">
                            <div className="carousel-header glass-card">
                                <h2>–í–∞—à–∞ –∫–∞—Ä—É—Å–µ–ª—å –≥–æ—Ç–æ–≤–∞!</h2>
                                <p>–°–ª–∞–π–¥–æ–≤: {slides.length} ‚Ä¢ React –≤–µ—Ä—Å–∏—è</p>
                            </div>
                            
                            <div className="carousel-container glass-card">
                                <SimpleCarousel slides={slides} />
                            </div>
                            
                            <div className="actions">
                                <button 
                                    className="btn btn-secondary" 
                                    onClick={() => setCurrentView('start')}
                                >
                                    ‚Üê –ù–æ–≤–∞—è –∫–∞—Ä—É—Å–µ–ª—å
                                </button>
                            </div>
                        </div>
                    </div>
                );
            }

            return (
                <div className="app">
                    <div className="section active">
                        <div className="start-section">
                            <div className="glass-card header">
                                <h1 className="title">‚ö° FlashPost React</h1>
                                <p className="subtitle">–°–æ–∑–¥–∞–π –∫–∞—Ä—É—Å–µ–ª—å –∑–∞ 30 —Å–µ–∫—É–Ω–¥</p>
                            </div>
                            
                            <div className="ideas glass-card">
                                <h3>üí° –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Ç–µ–º—ã</h3>
                                <div className="ideas-grid">
                                    {popularTopics.map((topicItem, index) => (
                                        <div 
                                            key={index}
                                            className="idea"
                                            onClick={() => setTopic(topicItem)}
                                        >
                                            {topicItem}
                                        </div>
                                    ))}
                                </div>
                            </div>
                            
                            <div className="input-section glass-card">
                                <label className="input-label">–û —á–µ–º —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å?</label>
                                <div className="input-wrapper">
                                    <textarea 
                                        className="topic-input" 
                                        placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ó–¥–æ—Ä–æ–≤–æ–µ –ø–∏—Ç–∞–Ω–∏–µ, –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å..."
                                        rows="2"
                                        value={topic}
                                        onChange={(e) => setTopic(e.target.value)}
                                    />
                                    <div className="input-counter">{topic.length}/200</div>
                                </div>
                            </div>
                            
                            <div className="actions">
                                <button 
                                    className="btn btn-primary" 
                                    onClick={() => generateSlides(topic)}
                                    disabled={isGenerating || topic.length < 3}
                                >
                                    {isGenerating ? (
                                        <>
                                            <div className="spinner"></div>
                                            –°–æ–∑–¥–∞–Ω–∏–µ...
                                        </>
                                    ) : (
                                        'üöÄ –°–æ–∑–¥–∞—Ç—å'
                                    )}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Render the app
        ReactDOM.render(<FlashPostReactDemo />, document.getElementById('react-root'));
    </script>
</body>
</html>