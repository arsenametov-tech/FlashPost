<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ - FlashPost</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Inter, sans-serif;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 25%, #fcb045 50%, #f77737 75%, #e1306c 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .title {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .demo-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .control-group {
            background: #f8f9fa;
            padding: 16px;
            border-radius: 12px;
        }
        
        .control-group h3 {
            margin: 0 0 12px 0;
            color: #495057;
            font-size: 16px;
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            margin: 4px;
            transition: all 0.2s ease;
            font-weight: 600;
        }
        
        .btn-primary {
            background: #833ab4;
            color: white;
        }
        
        .btn-primary:hover {
            background: #6d2d96;
        }
        
        .btn-success {
            background: #28a745;
            color: white;
        }
        
        .btn-success:hover {
            background: #218838;
        }
        
        .btn-info {
            background: #17a2b8;
            color: white;
        }
        
        .btn-info:hover {
            background: #138496;
        }
        
        .slides-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .slide-demo {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            border: 2px solid #dee2e6;
        }
        
        .slide-demo.active {
            border-color: #833ab4;
        }
        
        .slide-preview {
            position: relative;
            width: 100%;
            height: 200px;
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
        }
        
        .slide-text {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            font-size: 16px;
            line-height: 1.4;
            color: white;
            text-shadow: 0 1px 3px rgba(0,0,0,0.3);
        }
        
        /* –°—Ç–∏–ª–∏ –¥–ª—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ */
        .auto-keyword {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            text-shadow: none;
            box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }
        
        .manual-keyword {
            background: linear-gradient(45deg, #48cae4, #0077b6);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
            text-shadow: none;
            box-shadow: 0 0 8px rgba(72, 202, 228, 0.4);
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow-pulse {
            0% {
                box-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
            }
            100% {
                box-shadow: 0 0 16px rgba(255, 107, 107, 0.8);
            }
        }
        
        .slide-info {
            font-size: 12px;
            color: #6c757d;
        }
        
        .keywords-list {
            margin-top: 8px;
        }
        
        .keyword-tag {
            display: inline-block;
            background: #e9ecef;
            color: #495057;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 11px;
            margin: 2px;
        }
        
        .keyword-tag.auto {
            background: #ffebee;
            color: #c62828;
        }
        
        .keyword-tag.manual {
            background: #e3f2fd;
            color: #1565c0;
        }
        
        .generation-log {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
        
        .log-entry {
            margin-bottom: 8px;
            padding: 4px 0;
            border-bottom: 1px solid #eee;
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-step {
            font-weight: bold;
            color: #833ab4;
        }
        
        .log-result {
            color: #28a745;
            margin-left: 16px;
        }
        
        .log-error {
            color: #dc3545;
            margin-left: 16px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">üéØ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</h1>
        
        <div class="demo-controls">
            <div class="control-group">
                <h3>–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞</h3>
                <button class="btn btn-primary" onclick="generateSlides()">ü§ñ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–∞–π–¥—ã</button>
                <button class="btn btn-success" onclick="extractKeywords()">üîç –ò–∑–≤–ª–µ—á—å –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞</button>
                <button class="btn btn-info" onclick="addManualKeywords()">‚úèÔ∏è –î–æ–±–∞–≤–∏—Ç—å —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ</button>
            </div>
            
            <div class="control-group">
                <h3>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h3>
                <button class="btn btn-primary" onclick="testFullPipeline()">‚ö° –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç</button>
                <button class="btn btn-success" onclick="clearAll()">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ</button>
                <button class="btn btn-info" onclick="showKeywordStats()">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
            </div>
        </div>
        
        <div class="slides-container" id="slidesContainer">
            <!-- –°–ª–∞–π–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã JS -->
        </div>
        
        <div class="generation-log" id="generationLog">
            <div class="log-entry">
                <span class="log-step">üìã –õ–æ–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</span>
                <div class="log-result">–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ</div>
            </div>
        </div>
    </div>

    <script>
        // ===== –°–ò–°–¢–ï–ú–ê –ê–í–¢–û–ú–ê–¢–ò–ß–ï–°–ö–ò–• –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í =====
        
        class AutoKeywordsSystem {
            constructor() {
                this.slides = [];
                this.currentSlideIndex = 0;
                this.generationLog = [];
                
                console.log('üéØ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤');
                this.init();
            }
            
            init() {
                this.logStep('–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞');
                this.render();
            }
            
            // ===== –≠–¢–ê–ü 1: –ì–ï–ù–ï–†–ê–¶–ò–Ø –¢–ï–ö–°–¢–ê =====
            
            async generateSlides() {
                this.logStep('ü§ñ –≠—Ç–∞–ø 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —á–µ—Ä–µ–∑ Gemini');
                
                // –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞ –∫ Gemini API
                const topics = [
                    '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É',
                    '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞', 
                    '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏'
                ];
                
                this.slides = [];
                
                for (let i = 0; i < topics.length; i++) {
                    const topic = topics[i];
                    this.logResult(`–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–ª–∞–π–¥–∞ ${i + 1}: "${topic}"`);
                    
                    // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ Gemini
                    const generatedText = await this.simulateGeminiResponse(topic);
                    
                    const slide = {
                        id: `slide_${i + 1}`,
                        topic: topic,
                        text: generatedText,
                        background: this.getRandomBackground(),
                        autoKeywords: [], // –ë—É–¥—É—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω—ã –Ω–∞ —ç—Ç–∞–ø–µ 2
                        manualKeywords: [], // –†—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                        generatedAt: new Date().toISOString()
                    };
                    
                    this.slides.push(slide);
                    this.logResult(`‚úÖ –°–ª–∞–π–¥ ${i + 1} —Å–æ–∑–¥–∞–Ω: ${generatedText.length} —Å–∏–º–≤–æ–ª–æ–≤`);
                }
                
                this.logStep('‚úÖ –≠—Ç–∞–ø 1 –∑–∞–≤–µ—Ä—à–µ–Ω: —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ ' + this.slides.length + ' —Å–ª–∞–π–¥–æ–≤');
                this.render();
            }
            
            // –°–∏–º—É–ª—è—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ Gemini API
            async simulateGeminiResponse(topic) {
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ API
                await this.delay(800);
                
                const responses = {
                    '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—É': '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã–π —Ä—ã–Ω–æ–∫ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–ª—è –∏–Ω–≤–µ—Å—Ç–æ—Ä–æ–≤. –í–∞–∂–Ω–æ –ø–æ–Ω–∏–º–∞—Ç—å –≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å –∏ —Ä–∏—Å–∫–∏. –î–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ—Ä—Ç—Ñ–µ–ª—è –ø–æ–º–æ–∂–µ—Ç –º–∏–Ω–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ—Ç–µ—Ä–∏ –∏ –º–∞–∫—Å–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–±—ã–ª—å.',
                    '–ü—Å–∏—Ö–æ–ª–æ–≥–∏—è —Ç—Ä–µ–π–¥–∏–Ω–≥–∞': '–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–æ–ª—å - –∫–ª—é—á –∫ —É—Å–ø–µ—à–Ω–æ–º—É —Ç—Ä–µ–π–¥–∏–Ω–≥—É. –°—Ç—Ä–∞—Ö –∏ –∂–∞–¥–Ω–æ—Å—Ç—å —á–∞—Å—Ç–æ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –æ—à–∏–±–∫–∞–º. –î–∏—Å—Ü–∏–ø–ª–∏–Ω–∞ –∏ —Ç–µ—Ä–ø–µ–Ω–∏–µ –ø–æ–º–æ–≥–∞—é—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ä–∞—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è –Ω–∞ —Ä—ã–Ω–∫–µ.',
                    '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏': '–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ –∑–∞—â–∏—â–∞–µ—Ç –∫–∞–ø–∏—Ç–∞–ª —Ç—Ä–µ–π–¥–µ—Ä–∞. –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ä–∏—Å–∫—É–π—Ç–µ –±–æ–ª—å—à–µ —á–µ–º –º–æ–∂–µ—Ç–µ –ø–æ–∑–≤–æ–ª–∏—Ç—å —Å–µ–±–µ –ø–æ—Ç–µ—Ä—è—Ç—å. –°—Ç–æ–ø-–ª–æ—Å—Å—ã –∏ –ø–æ–∑–∏—Ü–∏–æ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ - –æ—Å–Ω–æ–≤–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏.'
                };
                
                return responses[topic] || '–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è —Ç–µ–º—ã: ' + topic;
            }
            
            // ===== –≠–¢–ê–ü 2: –ò–ó–í–õ–ï–ß–ï–ù–ò–ï –ö–õ–Æ–ß–ï–í–´–• –°–õ–û–í =====
            
            async extractKeywords() {
                if (this.slides.length === 0) {
                    this.logError('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª–∞–π–¥—ã!');
                    return;
                }
                
                this.logStep('üîç –≠—Ç–∞–ø 2: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤');
                
                for (let i = 0; i < this.slides.length; i++) {
                    const slide = this.slides[i];
                    this.logResult(`–ê–Ω–∞–ª–∏–∑ —Å–ª–∞–π–¥–∞ ${i + 1}: "${slide.topic}"`);
                    
                    // –°–∏–º—É–ª—è—Ü–∏—è –≤—Ç–æ—Ä–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ –∫ Gemini –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
                    const keywords = await this.simulateKeywordExtraction(slide.text);
                    
                    slide.autoKeywords = keywords;
                    this.logResult(`‚úÖ –ù–∞–π–¥–µ–Ω–æ ${keywords.length} –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${keywords.join(', ')}`);
                }
                
                this.logStep('‚úÖ –≠—Ç–∞–ø 2 –∑–∞–≤–µ—Ä—à–µ–Ω: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∏–∑–≤–ª–µ—á–µ–Ω—ã');
                this.render();
            }
            
            // –°–∏–º—É–ª—è—Ü–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            async simulateKeywordExtraction(text) {
                this.logResult('–ó–∞–ø—Ä–æ—Å: Extract 5-7 most important keywords from this text. Return as JSON array of strings.');
                
                // –ò–º–∏—Ç–∞—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ API
                await this.delay(600);
                
                // –ü—Ä–æ—Å—Ç–∞—è –ª–æ–≥–∏–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –¥–ª—è –¥–µ–º–æ
                const allWords = text.toLowerCase()
                    .replace(/[.,!?;]/g, '')
                    .split(' ')
                    .filter(word => word.length > 3);
                
                const keywordCandidates = [
                    '—Ä—ã–Ω–æ–∫', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '–∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–∞', '–ø—Ä–∏–±—ã–ª—å', '—Ä–∏—Å–∫–∏',
                    '—Ç—Ä–µ–π–¥–∏–Ω–≥', '—Å—Ç—Ä–∞—Ö', '–∂–∞–¥–Ω–æ—Å—Ç—å', '–¥–∏—Å—Ü–∏–ø–ª–∏–Ω–∞', '–∫–∞–ø–∏—Ç–∞–ª',
                    '–≤–æ–ª–∞—Ç–∏–ª—å–Ω–æ—Å—Ç—å', '–ø–æ—Ä—Ç—Ñ–µ–ª—å', '–¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è', '—Å—Ç–æ–ø-–ª–æ—Å—Å'
                ];
                
                // –ù–∞—Ö–æ–¥–∏–º –ø–µ—Ä–µ—Å–µ—á–µ–Ω–∏—è
                const foundKeywords = keywordCandidates.filter(keyword => 
                    text.toLowerCase().includes(keyword)
                );
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Å–ª—É—á–∞–π–Ω—ã–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                const additionalKeywords = keywordCandidates
                    .filter(k => !foundKeywords.includes(k))
                    .sort(() => 0.5 - Math.random())
                    .slice(0, Math.max(0, 6 - foundKeywords.length));
                
                const result = [...foundKeywords, ...additionalKeywords].slice(0, 6);
                
                this.logResult(`–û—Ç–≤–µ—Ç API: ${JSON.stringify(result)}`);
                return result;
            }
            
            // ===== –≠–¢–ê–ü 3: –†–ï–ù–î–ï–†–ò–ù–ì –° –ü–û–î–°–í–ï–¢–ö–û–ô =====
            
            // –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–∫—Å—Ç–∞ —Å –≤—ã–¥–µ–ª–µ–Ω–∏–µ–º –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            parseTextWithKeywords(text, autoKeywords = [], manualKeywords = []) {
                if (!text) return '';
                
                let parsedText = text;
                
                // –°–Ω–∞—á–∞–ª–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                autoKeywords.forEach(keyword => {
                    const regex = new RegExp(`\\b(${keyword})\\b`, 'gi');
                    parsedText = parsedText.replace(regex, '<span class="auto-keyword">$1</span>');
                });
                
                // –ó–∞—Ç–µ–º —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (–æ–Ω–∏ –∏–º–µ—é—Ç –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
                manualKeywords.forEach(keyword => {
                    const regex = new RegExp(`\\b(${keyword})\\b`, 'gi');
                    parsedText = parsedText.replace(regex, '<span class="manual-keyword">$1</span>');
                });
                
                return parsedText;
            }
            
            // ===== –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä—É—á–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            addManualKeywords() {
                if (this.slides.length === 0) {
                    this.logError('–°–Ω–∞—á–∞–ª–∞ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–ª–∞–π–¥—ã!');
                    return;
                }
                
                this.logStep('‚úèÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ä—É—á–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤');
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –∫ –∫–∞–∂–¥–æ–º—É —Å–ª–∞–π–¥—É
                this.slides.forEach((slide, index) => {
                    const manualKeywords = ['—É—Å–ø–µ—Ö', '–¥–µ–Ω—å–≥–∏', '—Å—Ç—Ä–∞—Ç–µ–≥–∏—è'];
                    slide.manualKeywords = manualKeywords;
                    this.logResult(`–°–ª–∞–π–¥ ${index + 1}: –¥–æ–±–∞–≤–ª–µ–Ω—ã —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ - ${manualKeywords.join(', ')}`);
                });
                
                this.logStep('‚úÖ –†—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–æ–±–∞–≤–ª–µ–Ω—ã');
                this.render();
            }
            
            // –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –ø–∞–π–ø–ª–∞–π–Ω–∞
            async testFullPipeline() {
                this.logStep('‚ö° –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞');
                
                await this.generateSlides();
                await this.delay(500);
                await this.extractKeywords();
                await this.delay(500);
                this.addManualKeywords();
                
                this.logStep('üéâ –ü–æ–ª–Ω—ã–π —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ!');
            }
            
            // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            showKeywordStats() {
                if (this.slides.length === 0) {
                    this.logError('–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏');
                    return;
                }
                
                this.logStep('üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤');
                
                let totalAuto = 0;
                let totalManual = 0;
                
                this.slides.forEach((slide, index) => {
                    const autoCount = slide.autoKeywords.length;
                    const manualCount = slide.manualKeywords.length;
                    
                    totalAuto += autoCount;
                    totalManual += manualCount;
                    
                    this.logResult(`–°–ª–∞–π–¥ ${index + 1}: ${autoCount} –∞–≤—Ç–æ + ${manualCount} —Ä—É—á–Ω—ã—Ö = ${autoCount + manualCount} –≤—Å–µ–≥–æ`);
                });
                
                this.logResult(`üìà –ò—Ç–æ–≥–æ: ${totalAuto} –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö, ${totalManual} —Ä—É—á–Ω—ã—Ö, ${totalAuto + totalManual} –≤—Å–µ–≥–æ`);
            }
            
            // –û—á–∏—Å—Ç–∫–∞ –≤—Å–µ—Ö –¥–∞–Ω–Ω—ã—Ö
            clearAll() {
                this.slides = [];
                this.generationLog = [];
                this.logStep('üóëÔ∏è –í—Å–µ –¥–∞–Ω–Ω—ã–µ –æ—á–∏—â–µ–Ω—ã');
                this.render();
            }
            
            // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –§–£–ù–ö–¶–ò–ò =====
            
            delay(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            
            getRandomBackground() {
                const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#feca57', '#ff9ff3'];
                return colors[Math.floor(Math.random() * colors.length)];
            }
            
            logStep(message) {
                const entry = {
                    type: 'step',
                    message: message,
                    timestamp: new Date().toLocaleTimeString()
                };
                this.generationLog.push(entry);
                console.log('üìã', message);
                this.updateLog();
            }
            
            logResult(message) {
                const entry = {
                    type: 'result',
                    message: message,
                    timestamp: new Date().toLocaleTimeString()
                };
                this.generationLog.push(entry);
                console.log('‚úÖ', message);
                this.updateLog();
            }
            
            logError(message) {
                const entry = {
                    type: 'error',
                    message: message,
                    timestamp: new Date().toLocaleTimeString()
                };
                this.generationLog.push(entry);
                console.error('‚ùå', message);
                this.updateLog();
            }
            
            updateLog() {
                const logContainer = document.getElementById('generationLog');
                const recentEntries = this.generationLog.slice(-20); // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ 20 –∑–∞–ø–∏—Å–µ–π
                
                logContainer.innerHTML = recentEntries.map(entry => `
                    <div class="log-entry">
                        <span class="log-${entry.type}">[${entry.timestamp}] ${entry.message}</span>
                    </div>
                `).join('');
                
                // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –≤–Ω–∏–∑
                logContainer.scrollTop = logContainer.scrollHeight;
            }
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ª–∞–π–¥–æ–≤
            render() {
                const container = document.getElementById('slidesContainer');
                
                if (this.slides.length === 0) {
                    container.innerHTML = `
                        <div style="grid-column: 1 / -1; text-align: center; padding: 40px; color: #6c757d;">
                            <h3>–ù–µ—Ç —Å–ª–∞–π–¥–æ–≤</h3>
                            <p>–ù–∞–∂–º–∏—Ç–µ "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª–∞–π–¥—ã" –¥–ª—è –Ω–∞—á–∞–ª–∞</p>
                        </div>
                    `;
                    return;
                }
                
                container.innerHTML = this.slides.map((slide, index) => `
                    <div class="slide-demo ${index === this.currentSlideIndex ? 'active' : ''}">
                        <div class="slide-preview" style="background: ${slide.background};">
                            <div class="slide-text">
                                ${this.parseTextWithKeywords(slide.text, slide.autoKeywords, slide.manualKeywords)}
                            </div>
                        </div>
                        
                        <div class="slide-info">
                            <strong>–°–ª–∞–π–¥ ${index + 1}:</strong> ${slide.topic}<br>
                            <small>–°–æ–∑–¥–∞–Ω: ${new Date(slide.generatedAt).toLocaleTimeString()}</small>
                            
                            <div class="keywords-list">
                                <div style="margin-bottom: 4px;">
                                    <strong>–ê–≤—Ç–æ –∫–ª—é—á–µ–≤—ã–µ:</strong>
                                    ${slide.autoKeywords.map(keyword => 
                                        `<span class="keyword-tag auto">${keyword}</span>`
                                    ).join('')}
                                </div>
                                
                                <div>
                                    <strong>–†—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ:</strong>
                                    ${slide.manualKeywords.map(keyword => 
                                        `<span class="keyword-tag manual">${keyword}</span>`
                                    ).join('')}
                                </div>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
        let keywordsSystem;
        
        document.addEventListener('DOMContentLoaded', () => {
            keywordsSystem = new AutoKeywordsSystem();
            console.log('üéØ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
        });
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –∫–Ω–æ–ø–æ–∫
        function generateSlides() {
            keywordsSystem.generateSlides();
        }
        
        function extractKeywords() {
            keywordsSystem.extractKeywords();
        }
        
        function addManualKeywords() {
            keywordsSystem.addManualKeywords();
        }
        
        function testFullPipeline() {
            keywordsSystem.testFullPipeline();
        }
        
        function clearAll() {
            keywordsSystem.clearAll();
        }
        
        function showKeywordStats() {
            keywordsSystem.showKeywordStats();
        }
    </script>
</body>
</html>