<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Advanced Features Test - FlashPost</title>
    <link rel="stylesheet" href="../app.css">
    <style>
        body {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-btn {
            padding: 10px 16px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
            font-weight: 500;
        }
        
        .test-results {
            background: white;
            padding: 15px;
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 10px;
        }
        
        .demo-slide {
            width: 300px;
            height: 300px;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
            border-radius: 12px;
            position: relative;
            margin: 20px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }
        
        .demo-text-block {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
            padding: 10px;
            border-radius: 4px;
            cursor: move;
            user-select: none;
            border: 2px solid transparent;
        }
        
        .demo-text-block:hover {
            border-color: #667eea;
        }
        
        .demo-text-block.dragging {
            opacity: 0.7;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üî¨ Advanced Features Test</h1>
        <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π FlashPost</p>

        <!-- Drag & Drop —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
        <div class="test-section">
            <h3>üñ±Ô∏è Drag & Drop System</h3>
            <button class="test-btn" onclick="testDragAndDrop()">–¢–µ—Å—Ç Drag & Drop</button>
            <button class="test-btn" onclick="testResizeHandles()">–¢–µ—Å—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞</button>
            <button class="test-btn" onclick="testSnapToGrid()">–¢–µ—Å—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å–µ—Ç–∫–µ</button>
            
            <div class="demo-slide" id="dragTestSlide">
                <div class="demo-text-block" id="dragBlock1" style="top: 20%; left: 20%;">
                    –ü–µ—Ä–µ—Ç–∞—â–∏ –º–µ–Ω—è!
                </div>
                <div class="demo-text-block" id="dragBlock2" style="top: 60%; left: 60%;">
                    –ò –º–µ–Ω—è —Ç–æ–∂–µ!
                </div>
            </div>
            <div id="drag-results" class="test-results"></div>
        </div>

        <!-- –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ —ç–∫—Å–ø–æ—Ä—Ç -->
        <div class="test-section">
            <h3>üé® Rendering & Export</h3>
            <button class="test-btn" onclick="testCanvasRendering()">–¢–µ—Å—Ç Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞</button>
            <button class="test-btn" onclick="testImageExport()">–¢–µ—Å—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
            <button class="test-btn" onclick="testZipGeneration()">–¢–µ—Å—Ç —Å–æ–∑–¥–∞–Ω–∏—è ZIP</button>
            <button class="test-btn" onclick="testExportQuality()">–¢–µ—Å—Ç –∫–∞—á–µ—Å—Ç–≤–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞</button>
            
            <canvas id="testCanvas" width="300" height="300" style="border: 1px solid #ddd; margin: 10px;"></canvas>
            <div id="export-results" class="test-results"></div>
        </div>

        <!-- Performance —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ -->
        <div class="test-section">
            <h3>‚ö° Performance Tests</h3>
            <button class="test-btn" onclick="testLargeSlideCount()">–¢–µ—Å—Ç –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–∞–π–¥–æ–≤</button>
            <button class="test-btn" onclick="testMemoryLeaks()">–¢–µ—Å—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏</button>
            <button class="test-btn" onclick="testRenderingSpeed()">–¢–µ—Å—Ç —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞</button>
            <button class="test-btn" onclick="testBatchOperations()">–¢–µ—Å—Ç –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</button>
            
            <div id="performance-results" class="test-results"></div>
        </div>

        <!-- AI Integration -->
        <div class="test-section">
            <h3>ü§ñ AI Integration</h3>
            <button class="test-btn" onclick="testAIContentGeneration()">–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</button>
            <button class="test-btn" onclick="testKeywordExtraction()">–¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</button>
            <button class="test-btn" onclick="testAIErrorHandling()">–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ AI</button>
            
            <div id="ai-results" class="test-results"></div>
        </div>

        <!-- Edge Cases -->
        <div class="test-section">
            <h3>üß™ Edge Cases</h3>
            <button class="test-btn" onclick="testEmptyStates()">–¢–µ—Å—Ç –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π</button>
            <button class="test-btn" onclick="testInvalidData()">–¢–µ—Å—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö</button>
            <button class="test-btn" onclick="testBoundaryValues()">–¢–µ—Å—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π</button>
            <button class="test-btn" onclick="testConcurrentOperations()">–¢–µ—Å—Ç –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π</button>
            
            <div id="edge-results" class="test-results"></div>
        </div>
    </div>

    <!-- –ú–æ–¥—É–ª–∏ -->
    <script src="../src/state.js"></script>
    <script src="../src/renderer.js"></script>
    <script src="../src/editor.js"></script>
    <script src="../src/drag.js"></script>
    <script src="../src/export.js"></script>
    <script src="../src/ai.js"></script>
    <script src="../src/template-manager.js"></script>
    <script src="../src/app.js"></script>

    <script>
        let testResults = {};
        
        function log(section, message, type = 'info') {
            if (!testResults[section]) testResults[section] = [];
            
            const timestamp = new Date().toLocaleTimeString();
            const logMessage = `[${timestamp}] ${message}`;
            
            testResults[section].push({ message: logMessage, type });
            updateResults(section);
            console.log(`${type.toUpperCase()}: ${logMessage}`);
        }

        function updateResults(section) {
            const container = document.getElementById(`${section}-results`);
            if (!container) return;
            
            const colors = {
                success: '#d4edda',
                error: '#f8d7da', 
                warning: '#fff3cd',
                info: '#d1ecf1'
            };
            
            container.innerHTML = testResults[section]
                .map(result => `<div style="background: ${colors[result.type] || colors.info}; padding: 5px; margin: 2px 0; border-radius: 3px;">${result.message}</div>`)
                .join('');
            
            container.scrollTop = container.scrollHeight;
        }

        // Drag & Drop —Ç–µ—Å—Ç—ã
        function testDragAndDrop() {
            log('drag', '–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è Drag & Drop...', 'info');
            
            try {
                const dragManager = window.flashPostApp?.dragManager;
                if (!dragManager) {
                    log('drag', '‚ùå DragManager –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    return;
                }
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–∏–≤—è–∑–∫—É —Å–æ–±—ã—Ç–∏–π
                const testBlock = document.getElementById('dragBlock1');
                if (testBlock) {
                    // –°–∏–º—É–ª–∏—Ä—É–µ–º —Å–æ–±—ã—Ç–∏—è –º—ã—à–∏
                    const mouseDown = new MouseEvent('mousedown', {
                        clientX: 100,
                        clientY: 100,
                        bubbles: true
                    });
                    
                    const mouseMove = new MouseEvent('mousemove', {
                        clientX: 150,
                        clientY: 150,
                        bubbles: true
                    });
                    
                    const mouseUp = new MouseEvent('mouseup', {
                        bubbles: true
                    });
                    
                    testBlock.dispatchEvent(mouseDown);
                    log('drag', '‚úÖ MouseDown —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ', 'success');
                    
                    document.dispatchEvent(mouseMove);
                    log('drag', '‚úÖ MouseMove —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ', 'success');
                    
                    document.dispatchEvent(mouseUp);
                    log('drag', '‚úÖ MouseUp —Å–æ–±—ã—Ç–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ', 'success');
                    
                    log('drag', '‚úÖ Drag & Drop —Ç–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                } else {
                    log('drag', '‚ùå –¢–µ—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
            } catch (error) {
                log('drag', `‚ùå –û—à–∏–±–∫–∞ Drag & Drop: ${error.message}`, 'error');
            }
        }

        function testResizeHandles() {
            log('drag', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) {
                    log('drag', '‚ùå StateManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º –±–ª–æ–∫ –∏ —Ç–µ—Å—Ç–∏—Ä—É–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞
                const block = state.addTextBlock();
                if (block) {
                    const originalWidth = block.width;
                    
                    // –ò–∑–º–µ–Ω—è–µ–º —à–∏—Ä–∏–Ω—É
                    state.updateTextBlockProperty(block.id, 'width', originalWidth + 20);
                    
                    const updatedBlock = state.getActiveSlide()?.textBlocks.find(b => b.id === block.id);
                    if (updatedBlock && updatedBlock.width === originalWidth + 20) {
                        log('drag', '‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —à–∏—Ä–∏–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                    } else {
                        log('drag', '‚ùå –û—à–∏–±–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —à–∏—Ä–∏–Ω—ã', 'error');
                    }
                }
                
            } catch (error) {
                log('drag', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–∑–º–µ—Ä–∞: ${error.message}`, 'error');
            }
        }

        function testSnapToGrid() {
            log('drag', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å–µ—Ç–∫–µ...', 'info');
            
            // –¢–µ—Å—Ç —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Å–µ—Ç–∫–µ
            function snapToGrid(value, gridSize = 5) {
                return Math.round(value / gridSize) * gridSize;
            }
            
            const testValues = [12, 17, 23, 28, 33];
            testValues.forEach(value => {
                const snapped = snapToGrid(value);
                log('drag', `‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ ${value} –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ ${snapped}`, 'success');
            });
        }

        // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ –∏ —ç–∫—Å–ø–æ—Ä—Ç —Ç–µ—Å—Ç—ã
        function testCanvasRendering() {
            log('export', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞...', 'info');
            
            try {
                const canvas = document.getElementById('testCanvas');
                const ctx = canvas.getContext('2d');
                
                // –û—á–∏—â–∞–µ–º canvas
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // –†–∏—Å—É–µ–º –≥—Ä–∞–¥–∏–µ–Ω—Ç —Ñ–æ–Ω
                const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
                gradient.addColorStop(0, '#833ab4');
                gradient.addColorStop(0.5, '#fd1d1d');
                gradient.addColorStop(1, '#fcb045');
                
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
                ctx.fillStyle = 'white';
                ctx.font = 'bold 24px Inter';
                ctx.textAlign = 'center';
                ctx.fillText('Test Slide', canvas.width / 2, canvas.height / 2);
                
                log('export', '‚úÖ Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω —É—Å–ø–µ—à–Ω–æ', 'success');
                
            } catch (error) {
                log('export', `‚ùå –û—à–∏–±–∫–∞ Canvas —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: ${error.message}`, 'error');
            }
        }

        function testImageExport() {
            log('export', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π...', 'info');
            
            try {
                const canvas = document.getElementById('testCanvas');
                
                // –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞–∫ Data URL
                const dataURL = canvas.toDataURL('image/png');
                if (dataURL && dataURL.startsWith('data:image/png')) {
                    log('export', '‚úÖ PNG —ç–∫—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                    log('export', `–†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö: ${Math.round(dataURL.length / 1024)} KB`, 'info');
                } else {
                    log('export', '‚ùå –û—à–∏–±–∫–∞ PNG —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                }
                
                // –¢–µ—Å—Ç JPEG —ç–∫—Å–ø–æ—Ä—Ç–∞
                const jpegURL = canvas.toDataURL('image/jpeg', 0.9);
                if (jpegURL && jpegURL.startsWith('data:image/jpeg')) {
                    log('export', '‚úÖ JPEG —ç–∫—Å–ø–æ—Ä—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                } else {
                    log('export', '‚ùå –û—à–∏–±–∫–∞ JPEG —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                }
                
            } catch (error) {
                log('export', `‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: ${error.message}`, 'error');
            }
        }

        function testZipGeneration() {
            log('export', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è ZIP –∞—Ä—Ö–∏–≤–æ–≤...', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å JSZip
                if (typeof JSZip !== 'undefined') {
                    const zip = new JSZip();
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Ñ–∞–π–ª—ã
                    zip.file('test.txt', '–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª');
                    zip.file('slide1.png', 'fake-image-data', {base64: false});
                    
                    // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º ZIP
                    zip.generateAsync({type: 'blob'}).then(function(content) {
                        log('export', `‚úÖ ZIP –∞—Ä—Ö–∏–≤ —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ (${Math.round(content.size / 1024)} KB)`, 'success');
                    }).catch(function(error) {
                        log('export', `‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è ZIP: ${error.message}`, 'error');
                    });
                    
                } else {
                    log('export', '‚ö†Ô∏è JSZip –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω–∞', 'warning');
                }
                
            } catch (error) {
                log('export', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è ZIP: ${error.message}`, 'error');
            }
        }

        function testExportQuality() {
            log('export', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞...', 'info');
            
            try {
                const canvas = document.getElementById('testCanvas');
                
                // –¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –∫–∞—á–µ—Å—Ç–≤ JPEG
                const qualities = [0.1, 0.5, 0.8, 1.0];
                qualities.forEach(quality => {
                    const dataURL = canvas.toDataURL('image/jpeg', quality);
                    const sizeKB = Math.round(dataURL.length / 1024);
                    log('export', `‚úÖ –ö–∞—á–µ—Å—Ç–≤–æ ${quality}: ${sizeKB} KB`, 'success');
                });
                
            } catch (error) {
                log('export', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞: ${error.message}`, 'error');
            }
        }

        // Performance —Ç–µ—Å—Ç—ã
        function testLargeSlideCount() {
            log('performance', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª—å—à–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Å–ª–∞–π–¥–æ–≤...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const startTime = performance.now();
                
                // –°–æ–∑–¥–∞–µ–º 50 —Å–ª–∞–π–¥–æ–≤
                for (let i = 0; i < 50; i++) {
                    state.createSlide({
                        title: `–°–ª–∞–π–¥ ${i + 1}`,
                        text: `–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ª–∞–π–¥–∞ ${i + 1}`,
                        background: { type: 'color', color: '#833ab4' }
                    });
                }
                
                const endTime = performance.now();
                const duration = Math.round(endTime - startTime);
                
                log('performance', `‚úÖ –°–æ–∑–¥–∞–Ω–æ 50 —Å–ª–∞–π–¥–æ–≤ –∑–∞ ${duration}ms`, 'success');
                
                const totalSlides = state.getSlidesCount();
                log('performance', `‚úÖ –í—Å–µ–≥–æ —Å–ª–∞–π–¥–æ–≤ –≤ –ø—Ä–æ–µ–∫—Ç–µ: ${totalSlides}`, 'success');
                
            } catch (error) {
                log('performance', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–ª–∞–π–¥–æ–≤: ${error.message}`, 'error');
            }
        }

        function testMemoryLeaks() {
            log('performance', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏...', 'info');
            
            try {
                const initialMemory = performance.memory ? performance.memory.usedJSHeapSize : 0;
                
                // –°–æ–∑–¥–∞–µ–º –∏ —É–¥–∞–ª—è–µ–º –º–Ω–æ–≥–æ –æ–±—ä–µ–∫—Ç–æ–≤
                for (let i = 0; i < 1000; i++) {
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = `–¢–µ—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç ${i}`;
                    document.body.appendChild(tempDiv);
                    document.body.removeChild(tempDiv);
                }
                
                // –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è —Å–±–æ—Ä–∫–∞ –º—É—Å–æ—Ä–∞ (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–∞)
                if (window.gc) {
                    window.gc();
                }
                
                const finalMemory = performance.memory ? performance.memory.usedJSHeapSize : 0;
                const memoryDiff = finalMemory - initialMemory;
                
                if (performance.memory) {
                    log('performance', `‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: ${Math.round(memoryDiff / 1024)} KB`, 
                        memoryDiff < 1024 * 1024 ? 'success' : 'warning');
                } else {
                    log('performance', '‚ö†Ô∏è Performance.memory API –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'warning');
                }
                
            } catch (error) {
                log('performance', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏: ${error.message}`, 'error');
            }
        }

        function testRenderingSpeed() {
            log('performance', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞...', 'info');
            
            try {
                const renderer = window.flashPostApp?.renderer;
                if (!renderer) return;
                
                const startTime = performance.now();
                
                // –í—ã–ø–æ–ª–Ω—è–µ–º –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–µ–Ω–¥–µ—Ä–æ–≤
                for (let i = 0; i < 10; i++) {
                    renderer.render();
                }
                
                const endTime = performance.now();
                const avgTime = Math.round((endTime - startTime) / 10);
                
                log('performance', `‚úÖ –°—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è —Ä–µ–Ω–¥–µ—Ä–∞: ${avgTime}ms`, 
                    avgTime < 50 ? 'success' : avgTime < 100 ? 'warning' : 'error');
                
            } catch (error) {
                log('performance', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞: ${error.message}`, 'error');
            }
        }

        function testBatchOperations() {
            log('performance', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const startTime = performance.now();
                
                // –°–æ–∑–¥–∞–µ–º —Å–ª–∞–π–¥ —Å –º–Ω–æ–∂–µ—Å—Ç–≤–æ–º –±–ª–æ–∫–æ–≤
                const slide = state.createSlide({
                    title: '–¢–µ—Å—Ç —Å–ª–∞–π–¥',
                    text: '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ',
                    background: { type: 'color', color: '#833ab4' }
                });
                
                // –î–æ–±–∞–≤–ª—è–µ–º 20 —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
                for (let i = 0; i < 20; i++) {
                    state.createTextBlock(slide.id, {
                        text: `–ë–ª–æ–∫ ${i + 1}`,
                        x: (i % 5) * 20,
                        y: Math.floor(i / 5) * 25,
                        width: 15,
                        font: 'Inter',
                        size: 14,
                        color: '#ffffff'
                    });
                }
                
                const endTime = performance.now();
                const duration = Math.round(endTime - startTime);
                
                log('performance', `‚úÖ –°–æ–∑–¥–∞–Ω —Å–ª–∞–π–¥ —Å 20 –±–ª–æ–∫–∞–º–∏ –∑–∞ ${duration}ms`, 'success');
                
            } catch (error) {
                log('performance', `‚ùå –û—à–∏–±–∫–∞ –ø–∞–∫–µ—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: ${error.message}`, 'error');
            }
        }

        // AI —Ç–µ—Å—Ç—ã
        function testAIContentGeneration() {
            log('ai', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ AI...', 'info');
            
            try {
                const aiManager = window.flashPostApp?.aiManager;
                if (!aiManager) {
                    log('ai', '‚ùå AIManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                // –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–¥–µ–π
                const topics = ['AI', 'Web Development', 'Mobile Apps'];
                topics.forEach(topic => {
                    try {
                        // –°–∏–º—É–ª–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                        const mockContent = aiManager.generateMockContent ? aiManager.generateMockContent(topic) : null;
                        if (mockContent) {
                            log('ai', `‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –¥–ª—è "${topic}" —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω`, 'success');
                        } else {
                            log('ai', `‚ö†Ô∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –¥–ª—è "${topic}" –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞`, 'warning');
                        }
                    } catch (error) {
                        log('ai', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è "${topic}": ${error.message}`, 'error');
                    }
                });
                
            } catch (error) {
                log('ai', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è AI: ${error.message}`, 'error');
            }
        }

        function testKeywordExtraction() {
            log('ai', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...', 'info');
            
            try {
                const aiManager = window.flashPostApp?.aiManager;
                if (!aiManager) return;
                
                const testTexts = [
                    '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ',
                    '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º JavaScript, React –∏ Node.js',
                    '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è iOS –∏ Android –ø–ª–∞—Ç—Ñ–æ—Ä–º'
                ];
                
                testTexts.forEach((text, index) => {
                    try {
                        const keywords = aiManager.extractKeywordsLocally(text);
                        if (keywords && keywords.length > 0) {
                            log('ai', `‚úÖ –¢–µ–∫—Å—Ç ${index + 1}: –Ω–∞–π–¥–µ–Ω–æ ${keywords.length} –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤`, 'success');
                            log('ai', `   –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ${keywords.join(', ')}`, 'info');
                        } else {
                            log('ai', `‚ö†Ô∏è –¢–µ–∫—Å—Ç ${index + 1}: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, 'warning');
                        }
                    } catch (error) {
                        log('ai', `‚ùå –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞ ${index + 1}: ${error.message}`, 'error');
                    }
                });
                
            } catch (error) {
                log('ai', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        function testAIErrorHandling() {
            log('ai', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ AI...', 'info');
            
            try {
                const aiManager = window.flashPostApp?.aiManager;
                if (!aiManager) return;
                
                // –¢–µ—Å—Ç —Å –ø—É—Å—Ç—ã–º —Ç–µ–∫—Å—Ç–æ–º
                try {
                    const result1 = aiManager.extractKeywordsLocally('');
                    log('ai', '‚úÖ –ü—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                } catch (error) {
                    log('ai', `‚úÖ –ü—É—Å—Ç–æ–π —Ç–µ–∫—Å—Ç –≤—ã–∑–≤–∞–ª –æ–∂–∏–¥–∞–µ–º—É—é –æ—à–∏–±–∫—É: ${error.message}`, 'success');
                }
                
                // –¢–µ—Å—Ç —Å –æ—á–µ–Ω—å –¥–ª–∏–Ω–Ω—ã–º —Ç–µ–∫—Å—Ç–æ–º
                try {
                    const longText = '—Å–ª–æ–≤–æ '.repeat(1000);
                    const result2 = aiManager.extractKeywordsLocally(longText);
                    log('ai', '‚úÖ –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                } catch (error) {
                    log('ai', `‚ö†Ô∏è –î–ª–∏–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç –≤—ã–∑–≤–∞–ª –æ—à–∏–±–∫—É: ${error.message}`, 'warning');
                }
                
                // –¢–µ—Å—Ç —Å —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–º–∏ —Å–∏–º–≤–æ–ª–∞–º–∏
                try {
                    const specialText = '!@#$%^&*()_+{}|:"<>?[];\'\\,./`~';
                    const result3 = aiManager.extractKeywordsLocally(specialText);
                    log('ai', '‚úÖ –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                } catch (error) {
                    log('ai', `‚ö†Ô∏è –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã –≤—ã–∑–≤–∞–ª–∏ –æ—à–∏–±–∫—É: ${error.message}`, 'warning');
                }
                
            } catch (error) {
                log('ai', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫: ${error.message}`, 'error');
            }
        }

        // Edge Cases —Ç–µ—Å—Ç—ã
        function testEmptyStates() {
            log('edge', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                // –û—á–∏—â–∞–µ–º –ø—Ä–æ–µ–∫—Ç
                state.clearProject();
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø—É—Å—Ç—ã–º –ø—Ä–æ–µ–∫—Ç–æ–º
                const slidesCount = state.getSlidesCount();
                if (slidesCount === 0) {
                    log('edge', '‚úÖ –ü—É—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è', 'success');
                } else {
                    log('edge', `‚ùå –û–∂–∏–¥–∞–ª–æ—Å—å 0 —Å–ª–∞–π–¥–æ–≤, –ø–æ–ª—É—á–µ–Ω–æ ${slidesCount}`, 'error');
                }
                
                // –¢–µ—Å—Ç –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞ –∏–∑ –ø—É—Å—Ç–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞
                const activeSlide = state.getActiveSlide();
                if (!activeSlide) {
                    log('edge', '‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π —Å–ª–∞–π–¥ –≤ –ø—É—Å—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç null', 'success');
                } else {
                    log('edge', '‚ùå –ê–∫—Ç–∏–≤–Ω—ã–π —Å–ª–∞–π–¥ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å null –≤ –ø—É—Å—Ç–æ–º –ø—Ä–æ–µ–∫—Ç–µ', 'error');
                }
                
            } catch (error) {
                log('edge', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—É—Å—Ç—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π: ${error.message}`, 'error');
            }
        }

        function testInvalidData() {
            log('edge', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                // –°–æ–∑–¥–∞–µ–º —Å–ª–∞–π–¥ –¥–ª—è —Ç–µ—Å—Ç–æ–≤
                const slide = state.createSlide({
                    title: '–¢–µ—Å—Ç —Å–ª–∞–π–¥',
                    text: '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ',
                    background: { type: 'color', color: '#833ab4' }
                });
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
                const invalidTests = [
                    { prop: 'size', value: -10, expected: 'error' },
                    { prop: 'size', value: 1000, expected: 'warning' },
                    { prop: 'x', value: -50, expected: 'warning' },
                    { prop: 'x', value: 150, expected: 'warning' },
                    { prop: 'color', value: 'invalid-color', expected: 'warning' },
                    { prop: 'font', value: '', expected: 'warning' }
                ];
                
                invalidTests.forEach(({ prop, value, expected }) => {
                    try {
                        const result = state.updateTextBlockProperty(block.id, prop, value);
                        if (expected === 'error' && !result) {
                            log('edge', `‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ`, 'success');
                        } else if (expected === 'warning' && result) {
                            log('edge', `‚ö†Ô∏è –ù–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –ø—Ä–∏–Ω—è—Ç–æ (–º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏–∏)`, 'warning');
                        } else {
                            log('edge', `‚úÖ –ó–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ`, 'success');
                        }
                    } catch (error) {
                        log('edge', `‚úÖ –ù–µ–≤–∞–ª–∏–¥–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –≤—ã–∑–≤–∞–ª–æ –æ–∂–∏–¥–∞–µ–º—É—é –æ—à–∏–±–∫—É`, 'success');
                    }
                });
                
            } catch (error) {
                log('edge', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –Ω–µ–≤–∞–ª–∏–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö: ${error.message}`, 'error');
            }
        }

        function testBoundaryValues() {
            log('edge', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
                const boundaryTests = [
                    { prop: 'size', values: [1, 12, 72, 100] },
                    { prop: 'x', values: [0, 50, 100] },
                    { prop: 'y', values: [0, 50, 100] },
                    { prop: 'width', values: [1, 50, 100] },
                    { prop: 'opacity', values: [0, 0.5, 1] }
                ];
                
                boundaryTests.forEach(({ prop, values }) => {
                    values.forEach(value => {
                        try {
                            const result = state.updateTextBlockProperty(block.id, prop, value);
                            if (result) {
                                log('edge', `‚úÖ –ì—Ä–∞–Ω–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –ø—Ä–∏–Ω—è—Ç–æ`, 'success');
                            } else {
                                log('edge', `‚ö†Ô∏è –ì—Ä–∞–Ω–∏—á–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ ${prop}:${value} –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ`, 'warning');
                            }
                        } catch (error) {
                            log('edge', `‚ùå –û—à–∏–±–∫–∞ –≥—Ä–∞–Ω–∏—á–Ω–æ–≥–æ –∑–Ω–∞—á–µ–Ω–∏—è ${prop}:${value}: ${error.message}`, 'error');
                        }
                    });
                });
                
            } catch (error) {
                log('edge', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥—Ä–∞–Ω–∏—á–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π: ${error.message}`, 'error');
            }
        }

        function testConcurrentOperations() {
            log('edge', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π...', 'info');
            
            try {
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                // –°–æ–∑–¥–∞–µ–º —Å–ª–∞–π–¥
                const slide = state.createSlide({
                    title: '–¢–µ—Å—Ç —Å–ª–∞–π–¥',
                    text: '–°–æ–¥–µ—Ä–∂–∏–º–æ–µ',
                    background: { type: 'color', color: '#833ab4' }
                });
                
                // –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –±–ª–æ–∫–æ–≤
                const promises = [];
                for (let i = 0; i < 10; i++) {
                    promises.push(new Promise(resolve => {
                        setTimeout(() => {
                            const block = state.addTextBlock();
                            resolve(block ? 'success' : 'failed');
                        }, Math.random() * 100);
                    }));
                }
                
                Promise.all(promises).then(results => {
                    const successCount = results.filter(r => r === 'success').length;
                    log('edge', `‚úÖ –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–æ–≤: ${successCount}/10 —É—Å–ø–µ—à–Ω–æ`, 
                        successCount >= 8 ? 'success' : 'warning');
                }).catch(error => {
                    log('edge', `‚ùå –û—à–∏–±–∫–∞ –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π: ${error.message}`, 'error');
                });
                
            } catch (error) {
                log('edge', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç–∏: ${error.message}`, 'error');
            }
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('drag', 'üîÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–º—É —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é', 'info');
            }, 1000);
        });
    </script>
</body>
</html>