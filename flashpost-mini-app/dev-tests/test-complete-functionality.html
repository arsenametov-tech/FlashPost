<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Functionality Test - FlashPost</title>
    <link rel="stylesheet" href="../app.css">
    <style>
        body {
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 1400px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .test-header {
            text-align: center;
            margin-bottom: 30px;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 20px;
        }
        
        .test-section {
            padding: 20px;
            border: 1px solid #e5e5e5;
            border-radius: 8px;
            background: #f8f9fa;
        }
        
        .test-section h3 {
            margin-top: 0;
            color: #333;
            border-bottom: 2px solid #667eea;
            padding-bottom: 8px;
        }
        
        .test-buttons {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-bottom: 15px;
        }
        
        .test-btn {
            padding: 8px 12px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 500;
            transition: all 0.2s ease;
        }
        
        .test-btn:hover {
            background: #5a6fd8;
            transform: translateY(-1px);
        }
        
        .test-results {
            background: white;
            padding: 12px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 11px;
            white-space: pre-wrap;
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #ddd;
        }
        
        .status {
            padding: 2px 6px;
            border-radius: 2px;
            font-weight: 600;
            margin: 2px 0;
            display: block;
        }
        
        .status.success { background: #d4edda; color: #155724; }
        .status.error { background: #f8d7da; color: #721c24; }
        .status.info { background: #d1ecf1; color: #0c5460; }
        .status.warning { background: #fff3cd; color: #856404; }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1>üß™ Complete Functionality Test</h1>
            <p>–ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π FlashPost Mini App</p>
        </div>

        <div class="test-grid">
            <!-- 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è -->
            <div class="test-section">
                <h3>1. üöÄ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testModuleLoading()">–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π</button>
                    <button class="test-btn" onclick="testAppInit()">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è App</button>
                </div>
                <div id="init-results" class="test-results"></div>
            </div>

            <!-- 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º -->
            <div class="test-section">
                <h3>2. üìä State Management</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testStateOperations()">–û–ø–µ—Ä–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è</button>
                    <button class="test-btn" onclick="testSlideManagement()">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–ª–∞–π–¥–∞–º–∏</button>
                </div>
                <div id="state-results" class="test-results"></div>
            </div>
            <!-- 3. –¢–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏ -->
            <div class="test-section">
                <h3>3. üìù Text Blocks</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testTextBlockCRUD()">CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏</button>
                    <button class="test-btn" onclick="testTextBlockStyles()">–°—Ç–∏–ª–∏ –±–ª–æ–∫–æ–≤</button>
                    <button class="test-btn" onclick="testTextBlockEffects()">–≠—Ñ—Ñ–µ–∫—Ç—ã</button>
                </div>
                <div id="textblock-results" class="test-results"></div>
            </div>

            <!-- 4. –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ -->
            <div class="test-section">
                <h3>4. üîç Keyword Highlighting</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testManualKeywords()">–†—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞</button>
                    <button class="test-btn" onclick="testAutoKeywords()">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ</button>
                    <button class="test-btn" onclick="testKeywordColors()">–¶–≤–µ—Ç–∞ –ø–æ–¥—Å–≤–µ—Ç–∫–∏</button>
                </div>
                <div id="keywords-results" class="test-results"></div>
            </div>

            <!-- 5. –°–∏—Å—Ç–µ–º–∞ —à–∞–±–ª–æ–Ω–æ–≤ -->
            <div class="test-section">
                <h3>5. üéØ Template System</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testTemplateSave()">–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ</button>
                    <button class="test-btn" onclick="testTemplateApply()">–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ</button>
                    <button class="test-btn" onclick="testTemplateManagement()">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</button>
                </div>
                <div id="template-results" class="test-results"></div>
            </div>

            <!-- 6. Drag & Drop -->
            <div class="test-section">
                <h3>6. üñ±Ô∏è Drag & Drop</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testDragFunctionality()">–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ</button>
                    <button class="test-btn" onclick="testResizing()">–ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞</button>
                    <button class="test-btn" onclick="testPositioning()">–ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ</button>
                </div>
                <div id="drag-results" class="test-results"></div>
            </div>

            <!-- 7. –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ -->
            <div class="test-section">
                <h3>7. üé® Rendering</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testModeRendering()">–†–µ–∂–∏–º—ã –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</button>
                    <button class="test-btn" onclick="testSlideRendering()">–†–µ–Ω–¥–µ—Ä —Å–ª–∞–π–¥–æ–≤</button>
                    <button class="test-btn" onclick="testLivePreview()">–ñ–∏–≤–æ–µ –ø—Ä–µ–≤—å—é</button>
                </div>
                <div id="render-results" class="test-results"></div>
            </div>

            <!-- 8. –≠–∫—Å–ø–æ—Ä—Ç -->
            <div class="test-section">
                <h3>8. üì§ Export System</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testImageExport()">–≠–∫—Å–ø–æ—Ä—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π</button>
                    <button class="test-btn" onclick="testZipExport()">ZIP –∞—Ä—Ö–∏–≤</button>
                    <button class="test-btn" onclick="testExportQuality()">–ö–∞—á–µ—Å—Ç–≤–æ —ç–∫—Å–ø–æ—Ä—Ç–∞</button>
                </div>
                <div id="export-results" class="test-results"></div>
            </div>

            <!-- 9. AI Integration -->
            <div class="test-section">
                <h3>9. ü§ñ AI Integration</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testAIGeneration()">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞</button>
                    <button class="test-btn" onclick="testKeywordExtraction()">–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</button>
                    <button class="test-btn" onclick="testAIErrorHandling()">–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫</button>
                </div>
                <div id="ai-results" class="test-results"></div>
            </div>

            <!-- 10. UI/UX -->
            <div class="test-section">
                <h3>10. üé≠ UI/UX</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testNavigation()">–ù–∞–≤–∏–≥–∞—Ü–∏—è</button>
                    <button class="test-btn" onclick="testResponsiveness()">–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å</button>
                    <button class="test-btn" onclick="testAnimations()">–ê–Ω–∏–º–∞—Ü–∏–∏</button>
                </div>
                <div id="ui-results" class="test-results"></div>
            </div>

            <!-- 11. Performance -->
            <div class="test-section">
                <h3>11. ‚ö° Performance</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testLoadingSpeed()">–°–∫–æ—Ä–æ—Å—Ç—å –∑–∞–≥—Ä—É–∑–∫–∏</button>
                    <button class="test-btn" onclick="testMemoryUsage()">–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏</button>
                    <button class="test-btn" onclick="testLargeDatasets()">–ë–æ–ª—å—à–∏–µ –¥–∞–Ω–Ω—ã–µ</button>
                </div>
                <div id="performance-results" class="test-results"></div>
            </div>

            <!-- 12. Error Handling -->
            <div class="test-section">
                <h3>12. üõ°Ô∏è Error Handling</h3>
                <div class="test-buttons">
                    <button class="test-btn" onclick="testErrorRecovery()">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ</button>
                    <button class="test-btn" onclick="testValidation()">–í–∞–ª–∏–¥–∞—Ü–∏—è</button>
                    <button class="test-btn" onclick="testEdgeCases()">–ì—Ä–∞–Ω–∏—á–Ω—ã–µ —Å–ª—É—á–∞–∏</button>
                </div>
                <div id="error-results" class="test-results"></div>
            </div>
        </div>

        <!-- –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="test-section" style="margin-top: 30px;">
            <h3>üìä –û–±—â–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            <div class="test-buttons">
                <button class="test-btn" onclick="runAllTests()" style="background: #28a745;">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
                <button class="test-btn" onclick="generateReport()" style="background: #17a2b8;">üìã –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –æ—Ç—á–µ—Ç</button>
                <button class="test-btn" onclick="clearResults()" style="background: #dc3545;">üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã</button>
            </div>
            <div id="summary-results" class="test-results" style="max-height: 400px;"></div>
        </div>
    </div>

    <!-- –ú–æ–¥—É–ª–∏ -->
    <script src="../src/state.js"></script>
    <script src="../src/renderer.js"></script>
    <script src="../src/editor.js"></script>
    <script src="../src/drag.js"></script>
    <script src="../src/export.js"></script>
    <script src="../src/ai.js"></script>
    <script src="../src/template-manager.js"></script>
    <script src="../src/app.js"></script>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        let testResults = {};
        let testStats = {
            total: 0,
            passed: 0,
            failed: 0,
            warnings: 0
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –≤—Å–µ—Ö —Å–µ–∫—Ü–∏–π
        const sections = ['init', 'state', 'textblock', 'keywords', 'template', 'drag', 'render', 'export', 'ai', 'ui', 'performance', 'error', 'summary'];
        sections.forEach(section => {
            testResults[section] = [];
        });

        // –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
        function log(section, message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logMessage = `[${timestamp}] ${message}`;
            
            testResults[section].push({ message: logMessage, type });
            updateResults(section);
            
            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            testStats.total++;
            if (type === 'success') testStats.passed++;
            else if (type === 'error') testStats.failed++;
            else if (type === 'warning') testStats.warnings++;
            
            console.log(`${type.toUpperCase()}: ${logMessage}`);
        }

        function updateResults(section) {
            const container = document.getElementById(`${section}-results`);
            if (!container) return;
            
            container.innerHTML = testResults[section]
                .map(result => `<div class="status ${result.type}">${result.message}</div>`)
                .join('');
            
            container.scrollTop = container.scrollHeight;
        }

        // 1. –¢–µ—Å—Ç—ã –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
        function testModuleLoading() {
            log('init', '–ù–∞—á–∞–ª–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π...', 'info');
            
            const requiredModules = [
                'StateManager', 'Renderer', 'Editor', 'DragManager', 
                'ExportManager', 'AIManager', 'TemplateManager'
            ];
            
            requiredModules.forEach(moduleName => {
                if (typeof window[moduleName] !== 'undefined') {
                    log('init', `‚úÖ ${moduleName} –∑–∞–≥—Ä—É–∂–µ–Ω`, 'success');
                } else {
                    log('init', `‚ùå ${moduleName} –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                }
            });
        }

        function testAppInit() {
            try {
                log('init', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
                
                if (window.flashPostApp) {
                    log('init', '‚úÖ FlashPostApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ', 'success');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
                    const components = ['state', 'renderer', 'editor', 'templateManager'];
                    components.forEach(comp => {
                        if (window.flashPostApp[comp]) {
                            log('init', `‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ${comp} –¥–æ—Å—Ç—É–ø–µ–Ω`, 'success');
                        } else {
                            log('init', `‚ùå –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ${comp} –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                        }
                    });
                } else {
                    log('init', '‚ùå FlashPostApp –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ', 'error');
                }
            } catch (error) {
                log('init', `‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
            }
        }

        // 2. –¢–µ—Å—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
        function testStateOperations() {
            try {
                log('state', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–π —Å–æ—Å—Ç–æ—è–Ω–∏—è...', 'info');
                
                if (!window.flashPostApp?.state) {
                    log('state', '‚ùå StateManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                const state = window.flashPostApp.state;
                
                // –¢–µ—Å—Ç —Ä–µ–∂–∏–º–æ–≤
                const modes = ['start', 'preview', 'edit', 'export'];
                modes.forEach(mode => {
                    state.setMode(mode);
                    if (state.getMode() === mode) {
                        log('state', `‚úÖ –†–µ–∂–∏–º ${mode} —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω`, 'success');
                    } else {
                        log('state', `‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Ä–µ–∂–∏–º–∞ ${mode}`, 'error');
                    }
                });
                
                // –¢–µ—Å—Ç –ø—Ä–æ–µ–∫—Ç–∞
                state.clearProject();
                log('state', '‚úÖ –ü—Ä–æ–µ–∫—Ç –æ—á–∏—â–µ–Ω', 'success');
                
            } catch (error) {
                log('state', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        function testSlideManagement() {
            try {
                log('state', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–∞–π–¥–∞–º–∏...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) {
                    log('state', '‚ùå StateManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–µ —Å–ª–∞–π–¥—ã
                for (let i = 1; i <= 3; i++) {
                    const slide = state.createSlide({
                        title: `–¢–µ—Å—Ç —Å–ª–∞–π–¥ ${i}`,
                        text: `–°–æ–¥–µ—Ä–∂–∏–º–æ–µ ${i}`,
                        background: { type: 'color', color: '#833ab4' }
                    });
                    
                    if (slide) {
                        log('state', `‚úÖ –°–ª–∞–π–¥ ${i} —Å–æ–∑–¥–∞–Ω: ${slide.id}`, 'success');
                    } else {
                        log('state', `‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–∞ ${i}`, 'error');
                    }
                }
                
                // –¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏
                const totalSlides = state.getSlidesCount();
                log('state', `‚úÖ –í—Å–µ–≥–æ —Å–ª–∞–π–¥–æ–≤: ${totalSlides}`, 'success');
                
                // –¢–µ—Å—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞
                state.setActiveSlideByIndex(1);
                const activeIndex = state.getActiveSlideIndex();
                if (activeIndex === 1) {
                    log('state', '‚úÖ –ê–∫—Ç–∏–≤–Ω—ã–π —Å–ª–∞–π–¥ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ', 'success');
                } else {
                    log('state', '‚ùå –û—à–∏–±–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞', 'error');
                }
                
            } catch (error) {
                log('state', `‚ùå –û—à–∏–±–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–ª–∞–π–¥–∞–º–∏: ${error.message}`, 'error');
            }
        }

        // 3. –¢–µ—Å—Ç—ã —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
        function testTextBlockCRUD() {
            try {
                log('textblock', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ç–µ–∫—Å—Ç–æ–≤—ã–º–∏ –±–ª–æ–∫–∞–º–∏...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) {
                    log('textblock', '‚ùå StateManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                // –°–æ–∑–¥–∞–Ω–∏–µ –±–ª–æ–∫–∞
                const block = state.addTextBlock();
                if (block) {
                    log('textblock', `‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —Å–æ–∑–¥–∞–Ω: ${block.id}`, 'success');
                    
                    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤
                    const updates = [
                        { prop: 'text', value: '–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç' },
                        { prop: 'font', value: 'Montserrat' },
                        { prop: 'size', value: 24 },
                        { prop: 'color', value: '#ff0000' }
                    ];
                    
                    updates.forEach(({ prop, value }) => {
                        const success = state.updateTextBlockProperty(block.id, prop, value);
                        if (success) {
                            log('textblock', `‚úÖ –°–≤–æ–π—Å—Ç–≤–æ ${prop} –æ–±–Ω–æ–≤–ª–µ–Ω–æ`, 'success');
                        } else {
                            log('textblock', `‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è ${prop}`, 'error');
                        }
                    });
                    
                    // –£–¥–∞–ª–µ–Ω–∏–µ –±–ª–æ–∫–∞
                    const deleted = state.deleteTextBlock(block.id);
                    if (deleted) {
                        log('textblock', '‚úÖ –¢–µ–∫—Å—Ç–æ–≤—ã–π –±–ª–æ–∫ —É–¥–∞–ª–µ–Ω', 'success');
                    } else {
                        log('textblock', '‚ùå –û—à–∏–±–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –±–ª–æ–∫–∞', 'error');
                    }
                } else {
                    log('textblock', '‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞', 'error');
                }
                
            } catch (error) {
                log('textblock', `‚ùå –û—à–∏–±–∫–∞ CRUD –æ–ø–µ—Ä–∞—Ü–∏–π: ${error.message}`, 'error');
            }
        }

        function testTextBlockStyles() {
            try {
                log('textblock', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–∏–ª–µ–π —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Å—Ç–∏–ª–µ–π
                const styleTests = [
                    { prop: 'font', values: ['Inter', 'Montserrat', 'Oswald'] },
                    { prop: 'size', values: [12, 16, 24, 32] },
                    { prop: 'weight', values: [300, 400, 700, 900] },
                    { prop: 'textAlign', values: ['left', 'center', 'right'] }
                ];
                
                styleTests.forEach(({ prop, values }) => {
                    values.forEach(value => {
                        const success = state.updateTextBlockProperty(block.id, prop, value);
                        if (success) {
                            log('textblock', `‚úÖ –°—Ç–∏–ª—å ${prop}: ${value}`, 'success');
                        } else {
                            log('textblock', `‚ùå –û—à–∏–±–∫–∞ —Å—Ç–∏–ª—è ${prop}: ${value}`, 'error');
                        }
                    });
                });
                
            } catch (error) {
                log('textblock', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—Ç–∏–ª–µ–π: ${error.message}`, 'error');
            }
        }

        function testTextBlockEffects() {
            try {
                log('textblock', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç —ç—Ñ—Ñ–µ–∫—Ç–æ–≤
                const effects = [
                    'effects.shadow.enabled',
                    'effects.outline.enabled', 
                    'effects.glow.enabled',
                    'effects.gradient.enabled'
                ];
                
                effects.forEach(effect => {
                    const success = state.updateTextBlockProperty(block.id, effect, true);
                    if (success) {
                        log('textblock', `‚úÖ –≠—Ñ—Ñ–µ–∫—Ç ${effect} –≤–∫–ª—é—á–µ–Ω`, 'success');
                    } else {
                        log('textblock', `‚ùå –û—à–∏–±–∫–∞ —ç—Ñ—Ñ–µ–∫—Ç–∞ ${effect}`, 'error');
                    }
                });
                
            } catch (error) {
                log('textblock', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —ç—Ñ—Ñ–µ–∫—Ç–æ–≤: ${error.message}`, 'error');
            }
        }

        // 4. –¢–µ—Å—Ç—ã –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
        function testManualKeywords() {
            try {
                log('keywords', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä—É—á–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç —Ç–µ–∫—Å—Ç–∞ —Å —Ä—É—á–Ω—ã–º–∏ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
                const testTexts = [
                    '–≠—Ç–æ *–≤–∞–∂–Ω—ã–π* —Ç–µ–∫—Å—Ç —Å *–∫–ª—é—á–µ–≤—ã–º–∏* —Å–ª–æ–≤–∞–º–∏',
                    '*–ù–∞—á–∞–ª–æ* —Ç–µ–∫—Å—Ç–∞ –∏ *–∫–æ–Ω–µ—Ü*',
                    '–¢–µ–∫—Å—Ç –±–µ–∑ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤',
                    '*–û–¥–Ω–æ* —Å–ª–æ–≤–æ *–¥–≤–∞* —Å–ª–æ–≤–∞ *—Ç—Ä–∏*'
                ];
                
                testTexts.forEach((text, index) => {
                    state.updateTextBlockProperty(block.id, 'text', text);
                    
                    // –ü–æ–¥—Å—á–∏—Ç—ã–≤–∞–µ–º –æ–∂–∏–¥–∞–µ–º—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                    const expectedKeywords = (text.match(/\*([^*]+)\*/g) || []).length;
                    log('keywords', `‚úÖ –¢–µ—Å—Ç ${index + 1}: "${text}" (–æ–∂–∏–¥–∞–µ—Ç—Å—è ${expectedKeywords} –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤)`, 'success');
                });
                
            } catch (error) {
                log('keywords', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ä—É—á–Ω—ã—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${error.message}`, 'error');
            }
        }

        function testAutoKeywords() {
            try {
                log('keywords', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...', 'info');
                
                const state = window.flashPostApp?.state;
                const aiManager = window.flashPostApp?.aiManager;
                
                if (!state || !aiManager) {
                    log('keywords', '‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –º–æ–¥—É–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã', 'error');
                    return;
                }
                
                // –¢–µ—Å—Ç –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
                const testTexts = [
                    '–ò—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç –∏ –º–∞—à–∏–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ',
                    '–í–µ–±-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ —Å JavaScript –∏ React',
                    '–ú–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è iOS –∏ Android'
                ];
                
                testTexts.forEach((text, index) => {
                    try {
                        const keywords = aiManager.extractKeywordsLocally(text);
                        if (keywords && keywords.length > 0) {
                            log('keywords', `‚úÖ –¢–µ—Å—Ç ${index + 1}: –Ω–∞–π–¥–µ–Ω–æ ${keywords.length} –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${keywords.join(', ')}`, 'success');
                        } else {
                            log('keywords', `‚ö†Ô∏è –¢–µ—Å—Ç ${index + 1}: –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã`, 'warning');
                        }
                    } catch (error) {
                        log('keywords', `‚ùå –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–ª—è —Ç–µ–∫—Å—Ç–∞ ${index + 1}: ${error.message}`, 'error');
                    }
                });
                
            } catch (error) {
                log('keywords', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${error.message}`, 'error');
            }
        }

        function testKeywordColors() {
            try {
                log('keywords', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–≤–µ—Ç–æ–≤ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤...', 'info');
                
                const state = window.flashPostApp?.state;
                if (!state) return;
                
                const block = state.addTextBlock();
                if (!block) return;
                
                // –¢–µ—Å—Ç –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ–¥—Å–≤–µ—Ç–∫–∏
                const colorSettings = [
                    { prop: 'keywordHighlighting.keywordColor', value: '#ff0000' },
                    { prop: 'keywordHighlighting.autoKeywordColor', value: '#0000ff' },
                    { prop: 'keywordHighlighting.autoHighlight', value: true },
                    { prop: 'keywordHighlighting.glowEnabled', value: true },
                    { prop: 'keywordHighlighting.glowIntensity', value: 0.8 }
                ];
                
                colorSettings.forEach(({ prop, value }) => {
                    const success = state.updateTextBlockProperty(block.id, prop, value);
                    if (success) {
                        log('keywords', `‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ ${prop}: ${value}`, 'success');
                    } else {
                        log('keywords', `‚ùå –û—à–∏–±–∫–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ ${prop}`, 'error');
                    }
                });
                
            } catch (error) {
                log('keywords', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ü–≤–µ—Ç–æ–≤: ${error.message}`, 'error');
            }
        }

        // 5. –¢–µ—Å—Ç—ã —Å–∏—Å—Ç–µ–º—ã —à–∞–±–ª–æ–Ω–æ–≤
        function testTemplateSave() {
            try {
                log('template', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤...', 'info');
                
                const templateManager = window.flashPostApp?.templateManager;
                if (!templateManager) {
                    log('template', '‚ùå TemplateManager –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    return;
                }
                
                // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —à–∞–±–ª–æ–Ω
                const templateName = `–¢–µ—Å—Ç —à–∞–±–ª–æ–Ω ${Date.now()}`;
                const success = templateManager.saveCurrentSlideAsTemplate(templateName);
                
                if (success) {
                    log('template', `‚úÖ –®–∞–±–ª–æ–Ω "${templateName}" —Å–æ—Ö—Ä–∞–Ω–µ–Ω`, 'success');
                    
                    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —à–∞–±–ª–æ–Ω –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ —Å–æ—Ö—Ä–∞–Ω–∏–ª—Å—è
                    const templates = templateManager.getTemplatesFromStorage();
                    const savedTemplate = templates.find(t => t.name === templateName);
                    
                    if (savedTemplate) {
                        log('template', `‚úÖ –®–∞–±–ª–æ–Ω –Ω–∞–π–¥–µ–Ω –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ: ${savedTemplate.textBlocksLayout.length} –±–ª–æ–∫–æ–≤`, 'success');
                    } else {
                        log('template', '‚ùå –®–∞–±–ª–æ–Ω –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ', 'error');
                    }
                } else {
                    log('template', '‚ùå –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞', 'error');
                }
                
            } catch (error) {
                log('template', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        function testTemplateApply() {
            try {
                log('template', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–æ–≤...', 'info');
                
                const templateManager = window.flashPostApp?.templateManager;
                if (!templateManager) return;
                
                const templates = templateManager.getTemplatesFromStorage();
                if (templates.length === 0) {
                    log('template', '‚ö†Ô∏è –ù–µ—Ç —à–∞–±–ª–æ–Ω–æ–≤ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è', 'warning');
                    return;
                }
                
                const template = templates[0];
                
                // –¢–µ—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫ —Ç–µ–∫—É—â–µ–º—É —Å–ª–∞–π–¥—É
                const success1 = templateManager.applyTemplateToCurrentSlide(template.id, true);
                if (success1) {
                    log('template', `‚úÖ –®–∞–±–ª–æ–Ω "${template.name}" –ø—Ä–∏–º–µ–Ω–µ–Ω –∫ —Ç–µ–∫—É—â–µ–º—É —Å–ª–∞–π–¥—É`, 'success');
                } else {
                    log('template', '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫ —Ç–µ–∫—É—â–µ–º—É —Å–ª–∞–π–¥—É', 'error');
                }
                
                // –¢–µ—Å—Ç –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º —Å–ª–∞–π–¥–∞–º
                const success2 = templateManager.applyTemplateToAllSlides(template.id, true);
                if (success2) {
                    log('template', `‚úÖ –®–∞–±–ª–æ–Ω "${template.name}" –ø—Ä–∏–º–µ–Ω–µ–Ω –∫–æ –≤—Å–µ–º —Å–ª–∞–π–¥–∞–º`, 'success');
                } else {
                    log('template', '‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∫–æ –≤—Å–µ–º —Å–ª–∞–π–¥–∞–º', 'error');
                }
                
            } catch (error) {
                log('template', `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è: ${error.message}`, 'error');
            }
        }

        function testTemplateManagement() {
            try {
                log('template', '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏...', 'info');
                
                const templateManager = window.flashPostApp?.templateManager;
                if (!templateManager) return;
                
                // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
                const stats = templateManager.getTemplateStats();
                log('template', `‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—Å–µ–≥–æ ${stats.total} —à–∞–±–ª–æ–Ω–æ–≤`, 'success');
                
                // –≠–∫—Å–ø–æ—Ä—Ç
                const exportData = templateManager.exportTemplates();
                if (exportData) {
                    log('template', `‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω: ${exportData.length} —Å–∏–º–≤–æ–ª–æ–≤`, 'success');
                } else {
                    log('template', '‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                }
                
                // –í–∞–ª–∏–¥–∞—Ü–∏—è
                const templates = templateManager.getTemplatesFromStorage();
                templates.forEach((template, index) => {
                    const isValid = templateManager.validateTemplate(template);
                    if (isValid) {
                        log('template', `‚úÖ –®–∞–±–ª–æ–Ω ${index + 1} –≤–∞–ª–∏–¥–µ–Ω`, 'success');
                    } else {
                        log('template', `‚ùå –®–∞–±–ª–æ–Ω ${index + 1} –Ω–µ–≤–∞–ª–∏–¥–µ–Ω`, 'error');
                    }
                });
                
            } catch (error) {
                log('template', `‚ùå –û—à–∏–±–∫–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —à–∞–±–ª–æ–Ω–∞–º–∏: ${error.message}`, 'error');
            }
        }

        // –§—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        function runAllTests() {
            log('summary', 'üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è...', 'info');
            
            // –û—á–∏—â–∞–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            testStats = { total: 0, passed: 0, failed: 0, warnings: 0 };
            
            // –ó–∞–ø—É—Å–∫–∞–µ–º –≤—Å–µ —Ç–µ—Å—Ç—ã —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
            const tests = [
                () => { testModuleLoading(); testAppInit(); },
                () => { testStateOperations(); testSlideManagement(); },
                () => { testTextBlockCRUD(); testTextBlockStyles(); testTextBlockEffects(); },
                () => { testManualKeywords(); testAutoKeywords(); testKeywordColors(); },
                () => { testTemplateSave(); testTemplateApply(); testTemplateManagement(); }
            ];
            
            tests.forEach((testGroup, index) => {
                setTimeout(() => {
                    try {
                        testGroup();
                        log('summary', `‚úÖ –ì—Ä—É–ø–ø–∞ —Ç–µ—Å—Ç–æ–≤ ${index + 1} –∑–∞–≤–µ—Ä—à–µ–Ω–∞`, 'success');
                    } catch (error) {
                        log('summary', `‚ùå –û—à–∏–±–∫–∞ –≤ –≥—Ä—É–ø–ø–µ —Ç–µ—Å—Ç–æ–≤ ${index + 1}: ${error.message}`, 'error');
                    }
                }, index * 1000);
            });
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∏—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
            setTimeout(() => {
                generateReport();
            }, tests.length * 1000 + 500);
        }

        function generateReport() {
            log('summary', 'üìä –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏—Ç–æ–≥–æ–≤–æ–≥–æ –æ—Ç—á–µ—Ç–∞...', 'info');
            log('summary', `–í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${testStats.total}`, 'info');
            log('summary', `–£—Å–ø–µ—à–Ω–æ: ${testStats.passed}`, 'success');
            log('summary', `–û—à–∏–±–æ–∫: ${testStats.failed}`, testStats.failed > 0 ? 'error' : 'success');
            log('summary', `–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: ${testStats.warnings}`, testStats.warnings > 0 ? 'warning' : 'success');
            
            const successRate = testStats.total > 0 ? Math.round((testStats.passed / testStats.total) * 100) : 0;
            log('summary', `–ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—Ö–∞: ${successRate}%`, successRate >= 80 ? 'success' : successRate >= 60 ? 'warning' : 'error');
            
            if (successRate >= 90) {
                log('summary', 'üéâ –û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –í—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.', 'success');
            } else if (successRate >= 70) {
                log('summary', 'üëç –•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç! –ë–æ–ª—å—à–∏–Ω—Å—Ç–≤–æ —Ñ—É–Ω–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.', 'success');
            } else {
                log('summary', '‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç—Å—è –≤–Ω–∏–º–∞–Ω–∏–µ! –û–±–Ω–∞—Ä—É–∂–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –≤ —Ä–∞–±–æ—Ç–µ —Ñ—É–Ω–∫—Ü–∏–π.', 'warning');
            }
        }

        function clearResults() {
            sections.forEach(section => {
                testResults[section] = [];
                updateResults(section);
            });
            testStats = { total: 0, passed: 0, failed: 0, warnings: 0 };
            log('summary', 'üóëÔ∏è –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –æ—á–∏—â–µ–Ω—ã', 'info');
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –±–∞–∑–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => {
            setTimeout(() => {
                log('summary', 'üîÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞, –≥–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é', 'info');
                testModuleLoading();
            }, 1000);
        });
    </script>
</body>
</html>