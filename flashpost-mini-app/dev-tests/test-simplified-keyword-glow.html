<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplified Keyword/Glow System - FlashPost</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Inter, sans-serif;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 25%, #fcb045 50%, #f77737 75%, #e1306c 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .title {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .demo-block {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
        }
        
        .slide-container {
            position: relative;
            width: 100%;
            height: 300px;
            border-radius: 12px;
            overflow: hidden;
            border: 2px solid #dee2e6;
            margin-bottom: 16px;
            background: #4ecdc4;
        }
        
        .slide-text-block {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 8px;
            padding: 8px 12px;
            font-weight: 600;
            color: #333;
            text-align: center;
            transform: translate(-50%, -50%);
            user-select: none;
            font-size: 16px;
            font-family: Inter;
        }
        
        /* –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞: glow —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤–∞—Ö */
        .manual-keyword {
            background: linear-gradient(45deg, #48cae4, #0077b6);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 700;
            filter: drop-shadow(0 0 6px rgba(72, 202, 228, 0.8));
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }
        
        .auto-keyword {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 700;
            filter: drop-shadow(0 0 6px rgba(255, 107, 107, 0.8));
            animation: glow-pulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes glow-pulse {
            from { filter: drop-shadow(0 0 6px rgba(72, 202, 228, 0.8)); }
            to { filter: drop-shadow(0 0 12px rgba(72, 202, 228, 1)); }
        }
        
        .info-panel {
            background: #e9ecef;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            margin-top: 16px;
        }
        
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .old-system, .new-system {
            padding: 16px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
        }
        
        .old-system {
            background: #ffebee;
            border: 2px solid #f44336;
        }
        
        .new-system {
            background: #e8f5e8;
            border: 2px solid #4caf50;
        }
        
        .btn {
            padding: 8px 12px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            font-weight: 600;
            margin: 4px;
        }
        
        .btn-primary { background: #833ab4; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-info { background: #17a2b8; color: white; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">üîß –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ keyword/glow</h1>
        
        <div class="comparison">
            <div class="old-system">
                <h4>‚ùå –°—Ç–∞—Ä–∞—è —Å–∏—Å—Ç–µ–º–∞ (—Å–ª–æ–∂–Ω–∞—è)</h4>
                <pre>// –ù–∞ —É—Ä–æ–≤–Ω–µ –±–ª–æ–∫–∞
block.glow = true/false
block.highlightEnabled = true/false  
block.isKeyword = true/false
block.keywordColor = '#ff6b6b'

// –ù–∞ —É—Ä–æ–≤–Ω–µ —Å–ª–∞–π–¥–∞
slide.autoKeywords = []

// –ü—Ä–æ–±–ª–µ–º—ã:
- –ú–Ω–æ–≥–æ —Ñ–ª–∞–≥–æ–≤
- –°–≤–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ –±–ª–æ–∫–∞
- –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞</pre>
            </div>
            
            <div class="new-system">
                <h4>‚úÖ –ù–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è)</h4>
                <pre>// –¢–æ–ª—å–∫–æ –Ω–∞ —É—Ä–æ–≤–Ω–µ —Å–ª–∞–π–¥–∞
slide.autoKeywords = []

// –õ–æ–≥–∏–∫–∞:
1. *—Å–ª–æ–≤–æ* ‚Üí .manual-keyword + glow
2. autoKeywords ‚Üí .auto-keyword + glow  
3. –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç ‚Üí –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤

// –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:
- –ú–µ–Ω—å—à–µ —Ñ–ª–∞–≥–æ–≤
- Glow —Ç–æ–ª—å–∫–æ –Ω–∞ –∫–ª—é—á–µ–≤—ã—Ö
- –ß–µ—Ç–∫–∞—è –ª–æ–≥–∏–∫–∞</pre>
            </div>
        </div>
        
        <div class="demo-section">
            <!-- –î–µ–º–æ —Å–ª–∞–π–¥–∞ -->
            <div class="demo-block">
                <h3>–î–µ–º–æ –Ω–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã</h3>
                
                <div class="slide-container" id="slideContainer">
                    <!-- –°–ª–∞–π–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <div class="info-panel">
                    <strong>–¢–µ—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏:</strong><br>
                    1. "–ò–∑—É—á–∞–π—Ç–µ *—Ä—ã–Ω–æ–∫* –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏"<br>
                    2. "–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–µ"<br>
                    3. "–î–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–≤–æ–±–æ–¥—ã"<br><br>
                    <strong>autoKeywords:</strong> ['–ø—Ä–∏–±—ã–ª—å', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '—Å–≤–æ–±–æ–¥—ã']
                </div>
            </div>
            
            <!-- –ö–æ–Ω—Ç—Ä–æ–ª—ã -->
            <div class="demo-block">
                <h3>–ö–æ–Ω—Ç—Ä–æ–ª—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
                
                <button class="btn btn-primary" onclick="testApp.updateText(0, '–ò–∑—É—á–∞–π—Ç–µ *—Ä—ã–Ω–æ–∫* –∏ *—Ç—Ä–µ–Ω–¥—ã*')">–î–æ–±–∞–≤–∏—Ç—å —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ</button>
                <button class="btn btn-success" onclick="testApp.updateAutoKeywords(['–ø—Ä–∏–±—ã–ª—å', '—Ç—Ä–µ–Ω–¥—ã', '—Ä—ã–Ω–æ–∫'])">–û–±–Ω–æ–≤–∏—Ç—å autoKeywords</button>
                <button class="btn btn-info" onclick="testApp.updateText(1, '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –∏ *—Å—Ç—Ä–∞—Ç–µ–≥–∏–∏* —Ä–∞–±–æ—Ç–∞—é—Ç')">–°–º–µ—à–∞–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ</button>
                <button class="btn btn-primary" onclick="testApp.resetDemo()">–°–±—Ä–æ—Å –¥–µ–º–æ</button>
                
                <div class="info-panel">
                    <strong>–†–µ–∑—É–ª—å—Ç–∞—Ç:</strong><br>
                    ‚Ä¢ <span class="manual-keyword">—Ä—É—á–Ω—ã–µ</span> - —Å–∏–Ω–∏–π –≥—Ä–∞–¥–∏–µ–Ω—Ç + glow<br>
                    ‚Ä¢ <span class="auto-keyword">–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ</span> - –∫—Ä–∞—Å–Ω—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç + glow<br>
                    ‚Ä¢ –æ–±—ã—á–Ω—ã–π —Ç–µ–∫—Å—Ç - –±–µ–∑ —ç—Ñ—Ñ–µ–∫—Ç–æ–≤<br><br>
                    <strong>–£–±—Ä–∞–Ω–æ:</strong><br>
                    ‚ùå block.glow<br>
                    ‚ùå block.highlightEnabled<br>
                    ‚ùå block.isKeyword<br>
                    ‚ùå block.keywordColor
                </div>
            </div>
        </div>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã keyword/glow
        class SimplifiedKeywordGlowApp {
            constructor() {
                // –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö
                this.slide = {
                    id: 'slide_1',
                    background: { type: 'color', color: '#4ecdc4' },
                    textBlocks: [
                        {
                            id: 'block_1',
                            text: '–ò–∑—É—á–∞–π—Ç–µ *—Ä—ã–Ω–æ–∫* –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏',
                            x: 30, y: 30, width: 40,
                            font: 'Inter', size: 16, weight: 600, color: '#ffffff'
                            // ‚ùå –£–±—Ä–∞–Ω–æ: glow, highlightEnabled, isKeyword, keywordColor
                        },
                        {
                            id: 'block_2',
                            text: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–µ',
                            x: 70, y: 50, width: 35,
                            font: 'Inter', size: 14, weight: 600, color: '#ffffff'
                        },
                        {
                            id: 'block_3',
                            text: '–î–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–≤–æ–±–æ–¥—ã',
                            x: 50, y: 80, width: 45,
                            font: 'Inter', size: 15, weight: 600, color: '#ffffff'
                        }
                    ],
                    autoKeywords: ['–ø—Ä–∏–±—ã–ª—å', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '—Å–≤–æ–±–æ–¥—ã']
                };
                
                this.init();
            }
            
            init() {
                this.render();
                console.log('üîß –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ keyword/glow –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            }
            
            // –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ —Å–ª–∞–π–¥–∞
            render() {
                const container = document.getElementById('slideContainer');
                if (!container) return;
                
                // –û—á–∏—â–∞–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
                container.innerHTML = '';
                
                // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –±–ª–æ–∫–∏
                this.slide.textBlocks.forEach(block => {
                    const blockElement = this.createTextBlock(block, this.slide.autoKeywords);
                    container.appendChild(blockElement);
                });
                
                console.log('‚úÖ –°–ª–∞–π–¥ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω —Å —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º–æ–π');
            }
            
            // –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –±–ª–æ–∫–∞
            createTextBlock(block, autoKeywords = []) {
                const blockEl = document.createElement('div');
                blockEl.className = 'slide-text-block';
                blockEl.dataset.blockId = block.id;
                
                // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
                blockEl.style.left = block.x + '%';
                blockEl.style.top = block.y + '%';
                blockEl.style.width = block.width + '%';
                blockEl.style.fontSize = block.size + 'px';
                blockEl.style.fontFamily = block.font;
                blockEl.style.fontWeight = block.weight;
                blockEl.style.color = block.color;
                
                // –í—Å–µ–≥–¥–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (—É–±—Ä–∞–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ highlightEnabled)
                this.setTextWithKeywords(blockEl, block.text, autoKeywords);
                
                return blockEl;
            }
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ–∫—Å—Ç–∞ —Å –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏ (—É–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–µ—Ä—Å–∏—è)
            setTextWithKeywords(element, text, autoKeywords = []) {
                // –û—á–∏—â–∞–µ–º —ç–ª–µ–º–µ–Ω—Ç
                element.innerHTML = '';
                
                let processedText = text;
                const fragments = [];
                
                // 1. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º —Ä—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (*—Å–ª–æ–≤–æ*)
                const manualKeywordRegex = /\*([^*]+)\*/g;
                let lastIndex = 0;
                let match;
                
                while ((match = manualKeywordRegex.exec(text)) !== null) {
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç –¥–æ –∫–ª—é—á–µ–≤–æ–≥–æ —Å–ª–æ–≤–∞
                    if (match.index > lastIndex) {
                        fragments.push({
                            type: 'text',
                            content: text.substring(lastIndex, match.index)
                        });
                    }
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º —Ä—É—á–Ω–æ–µ –∫–ª—é—á–µ–≤–æ–µ —Å–ª–æ–≤–æ
                    fragments.push({
                        type: 'manual-keyword',
                        content: match[1]
                    });
                    
                    lastIndex = match.index + match[0].length;
                }
                
                // –î–æ–±–∞–≤–ª—è–µ–º –æ—Å—Ç–∞–≤—à–∏–π—Å—è —Ç–µ–∫—Å—Ç
                if (lastIndex < text.length) {
                    fragments.push({
                        type: 'text',
                        content: text.substring(lastIndex)
                    });
                }
                
                // 2. –°–æ–∑–¥–∞–µ–º DOM —ç–ª–µ–º–µ–Ω—Ç—ã
                fragments.forEach(fragment => {
                    if (fragment.type === 'manual-keyword') {
                        const span = document.createElement('span');
                        span.className = 'manual-keyword';
                        span.textContent = fragment.content;
                        element.appendChild(span);
                    } else {
                        // 3. –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –≤ –æ–±—ã—á–Ω–æ–º —Ç–µ–∫—Å—Ç–µ
                        this.addTextWithAutoKeywords(element, fragment.content, autoKeywords);
                    }
                });
            }
            
            // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –∫–ª—é—á–µ–≤—ã–º–∏ —Å–ª–æ–≤–∞–º–∏
            addTextWithAutoKeywords(parent, text, autoKeywords) {
                if (autoKeywords.length === 0) {
                    parent.appendChild(document.createTextNode(text));
                    return;
                }
                
                let processedText = text;
                
                // –ó–∞–º–µ–Ω—è–µ–º –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –Ω–∞ –º–∞—Ä–∫–µ—Ä—ã
                autoKeywords.forEach(keyword => {
                    const regex = new RegExp(`\\b(${keyword})\\b`, 'gi');
                    processedText = processedText.replace(regex, `<AUTO_KEYWORD>$1</AUTO_KEYWORD>`);
                });
                
                // –†–∞–∑–±–∏–≤–∞–µ–º –Ω–∞ —á–∞—Å—Ç–∏
                const segments = processedText.split(/<AUTO_KEYWORD>|<\/AUTO_KEYWORD>/);
                let isKeyword = false;
                
                segments.forEach(segment => {
                    if (segment) {
                        if (isKeyword) {
                            const span = document.createElement('span');
                            span.className = 'auto-keyword';
                            span.textContent = segment;
                            parent.appendChild(span);
                        } else {
                            parent.appendChild(document.createTextNode(segment));
                        }
                    }
                    isKeyword = !isKeyword;
                });
            }
            
            // ===== –ú–ï–¢–û–î–´ –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Ø =====
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ –±–ª–æ–∫–∞
            updateText(blockIndex, newText) {
                if (this.slide.textBlocks[blockIndex]) {
                    this.slide.textBlocks[blockIndex].text = newText;
                    this.render();
                    console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω —Ç–µ–∫—Å—Ç –±–ª–æ–∫–∞ ${blockIndex}: ${newText}`);
                }
            }
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤
            updateAutoKeywords(newKeywords) {
                this.slide.autoKeywords = newKeywords;
                this.render();
                console.log(`‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã autoKeywords:`, newKeywords);
            }
            
            // –°–±—Ä–æ—Å –¥–µ–º–æ
            resetDemo() {
                this.slide.textBlocks[0].text = '–ò–∑—É—á–∞–π—Ç–µ *—Ä—ã–Ω–æ–∫* –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏';
                this.slide.textBlocks[1].text = '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ –±—É–¥—É—â–µ–µ';
                this.slide.textBlocks[2].text = '–î–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–≤–æ–±–æ–¥—ã';
                this.slide.autoKeywords = ['–ø—Ä–∏–±—ã–ª—å', '–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏', '—Å–≤–æ–±–æ–¥—ã'];
                this.render();
                console.log('üîÑ –î–µ–º–æ —Å–±—Ä–æ—à–µ–Ω–æ');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let testApp;
        
        document.addEventListener('DOMContentLoaded', () => {
            testApp = new SimplifiedKeywordGlowApp();
        });
    </script>
</body>
</html>