<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashPost - –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</title>
    <link rel="stylesheet" href="app.css">
    <style>
        :root {
            --tg-bg: #ffffff;
            --tg-text: #000000;
            --primary: #833ab4;
        }
        
        .test-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.95);
            border: 1px solid #e5e5e5;
            border-radius: 12px;
            padding: 16px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            z-index: 1000;
            max-width: 300px;
        }
        
        .test-btn {
            display: block;
            width: 100%;
            margin: 8px 0;
            padding: 8px 16px;
            border: 1px solid #ddd;
            background: #fff;
            border-radius: 6px;
            cursor: pointer;
        }
        
        .test-btn:hover {
            background: #f0f0f0;
        }
        
        .status {
            margin: 8px 0;
            padding: 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .status.success {
            background: #e8f5e8;
            color: #2e7d32;
        }
        
        .status.error {
            background: #ffebee;
            color: #c62828;
        }
    </style>
</head>
<body>
    <div class="test-panel">
        <h3>üß™ –¢–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏</h3>
        <button class="test-btn" onclick="testCarousel()">1. –ü–æ–∫–∞–∑–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å</button>
        <button class="test-btn" onclick="testEditor()">2. –û—Ç–∫—Ä—ã—Ç—å —Ä–µ–¥–∞–∫—Ç–æ—Ä</button>
        <button class="test-btn" onclick="testSaveExit()">3. –ì–æ—Ç–æ–≤–æ (–∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞)</button>
        <div class="status" id="status">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
    </div>

    <div id="app">
        <div style="padding: 40px; text-align: center;">
            <h2>–ó–∞–≥—Ä—É–∑–∫–∞...</h2>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        const app = new FlashPostApp();
        
        // –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
        app.slides = [
            {
                title: "Hook",
                text: "üî• –ü–µ—Ä–≤—ã–π —Å–ª–∞–π–¥\n\n–¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–∞–≤–∏–≥–∞—Ü–∏—é –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏."
            },
            {
                title: "Problem", 
                text: "‚ùå –í—Ç–æ—Ä–æ–π —Å–ª–∞–π–¥\n\n–ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–µ—Ä–µ—Ö–æ–¥ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞ –≤ –ø—Ä–æ—Å–º–æ—Ç—Ä."
            },
            {
                title: "Solution",
                text: "‚úÖ –¢—Ä–µ—Ç–∏–π —Å–ª–∞–π–¥\n\n–ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è."
            }
        ];
        
        app.initializeSlideStyles();
        
        // –î–æ–±–∞–≤–ª—è–µ–º Instagram –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        const instagramInput = document.createElement('input');
        instagramInput.id = 'instagramInput';
        instagramInput.value = '@test_account';
        instagramInput.style.display = 'none';
        document.body.appendChild(instagramInput);
        
        function updateStatus(message, type = '') {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = `status ${type}`;
        }
        
        function testCarousel() {
            try {
                console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º showCarousel()');
                app.showCarousel();
                updateStatus('‚úÖ –ö–∞—Ä—É—Å–µ–ª—å –ø–æ–∫–∞–∑–∞–Ω–∞', 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
                setTimeout(() => {
                    const carouselSection = document.getElementById('carouselSection');
                    if (carouselSection) {
                        updateStatus('‚úÖ –ö–∞—Ä—É—Å–µ–ª—å —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω–∞', 'success');
                    } else {
                        updateStatus('‚ùå –ö–∞—Ä—É—Å–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞ –≤ DOM', 'error');
                    }
                }, 200);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ showCarousel():', error);
                updateStatus(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        function testEditor() {
            try {
                console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º openEditor()');
                app.openEditor();
                updateStatus('‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä –æ—Ç–∫—Ä—ã—Ç', 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ —ç–ª–µ–º–µ–Ω—Ç—ã —Å–æ–∑–¥–∞–Ω—ã
                setTimeout(() => {
                    const editorSection = document.getElementById('editorSection');
                    if (editorSection) {
                        updateStatus('‚úÖ –†–µ–¥–∞–∫—Ç–æ—Ä —É—Å–ø–µ—à–Ω–æ –æ—Ç—Ä–µ–Ω–¥–µ—Ä–µ–Ω', 'success');
                    } else {
                        updateStatus('‚ùå –†–µ–¥–∞–∫—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ DOM', 'error');
                    }
                }, 200);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ openEditor():', error);
                updateStatus(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        function testSaveExit() {
            try {
                console.log('üß™ –¢–µ—Å—Ç–∏—Ä—É–µ–º saveAndExit()');
                app.saveAndExit();
                updateStatus('‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –≤—ã—Ö–æ–¥ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã', 'success');
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –∫–∞—Ä—É—Å–µ–ª–∏
                setTimeout(() => {
                    const carouselSection = document.getElementById('carouselSection');
                    const editorSection = document.getElementById('editorSection');
                    
                    if (carouselSection && !editorSection) {
                        updateStatus('‚úÖ –£—Å–ø–µ—à–Ω–æ –≤–µ—Ä–Ω—É–ª–∏—Å—å –∫ –∫–∞—Ä—É—Å–µ–ª–∏', 'success');
                    } else if (editorSection) {
                        updateStatus('‚ùå –û—Å—Ç–∞–ª–∏—Å—å –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ', 'error');
                    } else {
                        updateStatus('‚ùå –ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ', 'error');
                    }
                }, 200);
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –≤ saveAndExit():', error);
                updateStatus(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
            }
        }
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        window.addEventListener('error', (e) => {
            console.error('üö® –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞:', e);
            updateStatus(`üö® –ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ—à–∏–±–∫–∞: ${e.message}`, 'error');
        });
        
        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—É—Å–µ–ª—å —á–µ—Ä–µ–∑ —Å–µ–∫—É–Ω–¥—É
        setTimeout(() => {
            console.log('üöÄ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞—Ä—É—Å–µ–ª—å...');
            testCarousel();
        }, 1000);
        
        console.log('‚úÖ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ –≥–æ—Ç–æ–≤');
    </script>
</body>
</html>