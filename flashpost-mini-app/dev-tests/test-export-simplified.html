<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simplified Export System Test - FlashPost</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Inter, sans-serif;
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 25%, #fcb045 50%, #f77737 75%, #e1306c 100%);
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }
        
        .title {
            text-align: center;
            margin-bottom: 20px;
            color: #333;
        }
        
        .test-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .btn {
            padding: 10px 16px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
        }
        
        .btn-primary { background: #833ab4; color: white; }
        .btn-success { background: #28a745; color: white; }
        .btn-danger { background: #dc3545; color: white; }
        .btn-info { background: #17a2b8; color: white; }
        
        .btn:hover { transform: translateY(-2px); }
        .btn:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }
        
        .demo-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .demo-block {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 16px;
        }
        
        .slides-preview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 16px;
        }
        
        .slide-preview {
            position: relative;
            width: 100%;
            height: 150px;
            border-radius: 8px;
            overflow: hidden;
            border: 2px solid #dee2e6;
            transition: all 0.2s ease;
        }
        
        .slide-preview:hover {
            border-color: #833ab4;
            transform: translateY(-2px);
        }
        
        .slide-text-block {
            position: absolute;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 4px;
            padding: 4px 8px;
            font-size: 10px;
            color: #333;
            text-align: center;
            transform: translate(-50%, -50%);
            user-select: none;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }
        
        .slide-text-block.glow {
            filter: drop-shadow(0 0 4px rgba(255, 255, 255, 0.6));
        }
        
        .auto-keyword {
            background: linear-gradient(45deg, #ff6b6b, #feca57);
            color: white;
            padding: 1px 2px;
            border-radius: 2px;
            font-weight: 600;
            text-shadow: none;
        }
        
        .manual-keyword {
            background: linear-gradient(45deg, #48cae4, #0077b6);
            color: white;
            padding: 1px 2px;
            border-radius: 2px;
            font-weight: 600;
            text-shadow: none;
        }
        
        .export-log {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 12px;
            font-family: monospace;
            font-size: 12px;
            max-height: 200px;
            overflow-y: auto;
            margin-bottom: 16px;
        }
        
        .export-progress {
            background: #e9ecef;
            border-radius: 8px;
            height: 8px;
            margin-bottom: 16px;
            overflow: hidden;
        }
        
        .export-progress-bar {
            background: linear-gradient(45deg, #833ab4, #fd1d1d);
            height: 100%;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .info-panel {
            background: #e9ecef;
            padding: 12px;
            border-radius: 8px;
            font-size: 12px;
            font-family: monospace;
            margin-top: 16px;
        }
        
        .mode-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 16px;
        }
        
        .mode-edit { background: #833ab4; color: white; }
        .mode-export { background: #dc3545; color: white; }
        
        .toast {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 12px 16px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            z-index: 1000;
            transform: translateX(100%);
            transition: transform 0.3s ease;
        }
        
        .toast.show { transform: translateX(0); }
        .toast.success { background: #28a745; }
        .toast.error { background: #dc3545; }
        .toast.info { background: #17a2b8; }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="title">üîß –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞</h1>
        
        <div class="test-controls">
            <button class="btn btn-primary" onclick="testApp.exportAllSlides()" id="exportAllBtn">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Å–ª–∞–π–¥–æ–≤</button>
            <button class="btn btn-success" onclick="testApp.exportCurrentSlide()" id="exportCurrentBtn">üì∏ –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ</button>
            <button class="btn btn-info" onclick="testApp.simulateExport()" id="simulateBtn">üß™ –°–∏–º—É–ª—è—Ü–∏—è —ç–∫—Å–ø–æ—Ä—Ç–∞</button>
            <button class="btn btn-danger" onclick="testApp.resetDemo()">üîÑ –°–±—Ä–æ—Å</button>
        </div>
        
        <div class="demo-section">
            <!-- –ü—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤ -->
            <div class="demo-block">
                <h3>–°–ª–∞–π–¥—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞</h3>
                <div class="mode-indicator" id="modeIndicator">edit</div>
                
                <div class="slides-preview" id="slidesPreview">
                    <!-- –°–ª–∞–π–¥—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã —á–µ—Ä–µ–∑ JS -->
                </div>
                
                <div class="info-panel">
                    <strong>–£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞:</strong><br>
                    1. this.project.mode = 'export'<br>
                    2. this.render()<br>
                    3. await new Promise(r => setTimeout(r, 100))<br>
                    4. for (slide) { renderSlide(slide, false) }<br>
                    5. document.body.appendChild(el)<br>
                    6. html2canvas(el)<br>
                    7. el.remove()<br>
                    8. this.project.mode = 'edit'
                </div>
            </div>
            
            <!-- –õ–æ–≥ —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
            <div class="demo-block">
                <h3>–õ–æ–≥ —ç–∫—Å–ø–æ—Ä—Ç–∞</h3>
                
                <div class="export-progress" id="exportProgress">
                    <div class="export-progress-bar" id="exportProgressBar"></div>
                </div>
                
                <div class="export-log" id="exportLog">
                    –ì–æ—Ç–æ–≤ –∫ —ç–∫—Å–ø–æ—Ä—Ç—É...<br>
                </div>
                
                <div class="test-controls">
                    <button class="btn btn-info" onclick="testApp.clearLog()" style="width: 100%;">–û—á–∏—Å—Ç–∏—Ç—å –ª–æ–≥</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –¢–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–æ—â–µ–Ω–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã —ç–∫—Å–ø–æ—Ä—Ç–∞
        class TestExportApp {
            constructor() {
                this.project = {
                    slides: [],
                    activeSlideId: null,
                    mode: 'edit'
                };
                
                this.isExporting = false;
                
                this.init();
            }
            
            init() {
                this.createTestData();
                this.render();
                this.updateModeIndicator();
            }
            
            createTestData() {
                const slides = [
                    {
                        id: 'slide_1',
                        background: { type: 'color', color: '#ff6b6b' },
                        textBlocks: [
                            {
                                id: 'block_1_1',
                                text: '–ò–∑—É—á–∞–π—Ç–µ *—Ä—ã–Ω–æ–∫* –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏',
                                x: 50, y: 40, width: 80,
                                font: 'Inter', size: 12, weight: 600, color: '#ffffff',
                                glow: false, highlightEnabled: true
                            }
                        ],
                        autoKeywords: ['–ø—Ä–∏–±—ã–ª—å']
                    },
                    {
                        id: 'slide_2',
                        background: { type: 'color', color: '#4ecdc4' },
                        textBlocks: [
                            {
                                id: 'block_2_1',
                                text: '–ò–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏ –≤ *–±—É–¥—É—â–µ–µ*',
                                x: 50, y: 50, width: 70,
                                font: 'Inter', size: 12, weight: 600, color: '#ffffff',
                                glow: true, highlightEnabled: true
                            }
                        ],
                        autoKeywords: ['–∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏']
                    },
                    {
                        id: 'slide_3',
                        background: { type: 'color', color: '#45b7d1' },
                        textBlocks: [
                            {
                                id: 'block_3_1',
                                text: '–î–æ—Å—Ç–∏–≥–∞–π—Ç–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤–æ–π —Å–≤–æ–±–æ–¥—ã',
                                x: 50, y: 60, width: 75,
                                font: 'Inter', size: 12, weight: 600, color: '#ffffff',
                                glow: false, highlightEnabled: true
                            }
                        ],
                        autoKeywords: ['—Å–≤–æ–±–æ–¥—ã']
                    }
                ];
                
                this.project.slides = slides;
                this.project.activeSlideId = 'slide_1';
            }
            
            // ===== –£–ü–†–û–©–ï–ù–ù–ê–Ø –°–ò–°–¢–ï–ú–ê –≠–ö–°–ü–û–†–¢–ê =====
            
            async exportAllSlides() {
                if (this.isExporting) {
                    this.showToast('–≠–∫—Å–ø–æ—Ä—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...', 'info');
                    return;
                }
                
                try {
                    this.isExporting = true;
                    this.disableButtons();
                    this.log('üì• –ù–∞—á–∏–Ω–∞–µ–º —ç–∫—Å–ø–æ—Ä—Ç –≤—Å–µ—Ö —Å–ª–∞–π–¥–æ–≤...');
                    
                    // 1. –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –≤ —Ä–µ–∂–∏–º —ç–∫—Å–ø–æ—Ä—Ç–∞
                    this.project.mode = 'export';
                    this.updateModeIndicator();
                    this.log('üîÑ –†–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –Ω–∞ export');
                    
                    // 2. –†–µ–Ω–¥–µ—Ä–∏–º (–≤ —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏)
                    // this.render();
                    await new Promise(r => setTimeout(r, 100));
                    this.log('‚è≥ –û–∂–∏–¥–∞–Ω–∏–µ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ (100ms)');
                    
                    const images = [];
                    
                    // 3. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ–º –∫–∞–∂–¥—ã–π —Å–ª–∞–π–¥
                    for (let i = 0; i < this.project.slides.length; i++) {
                        const slide = this.project.slides[i];
                        this.log(`üì∏ –≠–∫—Å–ø–æ—Ä—Ç —Å–ª–∞–π–¥–∞ ${i + 1}/${this.project.slides.length}`);
                        this.updateProgress((i / this.project.slides.length) * 100);
                        
                        // –°–æ–∑–¥–∞–µ–º —á–∏—Å—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ª–∞–π–¥–∞
                        const slideElement = this.renderSlide(slide, false);
                        slideElement.style.width = '1080px';
                        slideElement.style.height = '1080px';
                        slideElement.style.position = 'absolute';
                        slideElement.style.top = '-9999px';
                        slideElement.style.left = '-9999px';
                        
                        // –î–æ–±–∞–≤–ª—è–µ–º –≤ DOM
                        document.body.appendChild(slideElement);
                        this.log(`  ‚úÖ –≠–ª–µ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ DOM`);
                        
                        // –°–∏–º—É–ª–∏—Ä—É–µ–º html2canvas
                        await new Promise(r => setTimeout(r, 200));
                        this.log(`  üì∑ html2canvas –∑–∞–≤–µ—Ä—à–µ–Ω`);
                        
                        // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç
                        slideElement.remove();
                        this.log(`  üóëÔ∏è –≠–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω –∏–∑ DOM`);
                        
                        images.push({
                            name: `slide_${i + 1}.png`,
                            data: 'data:image/png;base64,simulated'
                        });
                    }
                    
                    // 4. –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    this.project.mode = 'edit';
                    this.updateModeIndicator();
                    this.log('üîÑ –†–µ–∂–∏–º –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ edit');
                    
                    this.updateProgress(100);
                    this.log(`‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –∑–∞–≤–µ—Ä—à–µ–Ω: ${images.length} —Å–ª–∞–π–¥–æ–≤`);
                    this.showToast('‚úÖ –í—Å–µ —Å–ª–∞–π–¥—ã —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã!', 'success');
                    
                } catch (error) {
                    this.log(`‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message}`);
                    this.showToast('‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                    
                    // –í–æ–∑–≤—Ä–∞—â–∞–µ–º—Å—è –≤ —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                    this.project.mode = 'edit';
                    this.updateModeIndicator();
                    
                } finally {
                    this.isExporting = false;
                    this.enableButtons();
                    setTimeout(() => this.updateProgress(0), 2000);
                }
            }
            
            async exportCurrentSlide() {
                if (this.isExporting) {
                    this.showToast('–≠–∫—Å–ø–æ—Ä—Ç —É–∂–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è...', 'info');
                    return;
                }
                
                try {
                    this.isExporting = true;
                    this.disableButtons();
                    this.log('üì∏ –≠–∫—Å–ø–æ—Ä—Ç —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–∞–π–¥–∞...');
                    
                    const activeSlide = this.getActiveSlide();
                    if (!activeSlide) {
                        throw new Error('–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Å–ª–∞–π–¥–∞');
                    }
                    
                    // –°–æ–∑–¥–∞–µ–º —á–∏—Å—Ç—ã–π —ç–ª–µ–º–µ–Ω—Ç —Å–ª–∞–π–¥–∞
                    const slideElement = this.renderSlide(activeSlide, false);
                    slideElement.style.width = '1080px';
                    slideElement.style.height = '1080px';
                    slideElement.style.position = 'absolute';
                    slideElement.style.top = '-9999px';
                    slideElement.style.left = '-9999px';
                    
                    // –î–æ–±–∞–≤–ª—è–µ–º –≤ DOM
                    document.body.appendChild(slideElement);
                    this.log('‚úÖ –≠–ª–µ–º–µ–Ω—Ç –¥–æ–±–∞–≤–ª–µ–Ω –≤ DOM');
                    
                    // –°–∏–º—É–ª–∏—Ä—É–µ–º html2canvas
                    this.updateProgress(50);
                    await new Promise(r => setTimeout(r, 300));
                    this.log('üì∑ html2canvas –∑–∞–≤–µ—Ä—à–µ–Ω');
                    
                    // –£–¥–∞–ª—è–µ–º —ç–ª–µ–º–µ–Ω—Ç
                    slideElement.remove();
                    this.log('üóëÔ∏è –≠–ª–µ–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω –∏–∑ DOM');
                    
                    this.updateProgress(100);
                    this.log('‚úÖ –¢–µ–∫—É—â–∏–π —Å–ª–∞–π–¥ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω');
                    this.showToast('‚úÖ –°–ª–∞–π–¥ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!', 'success');
                    
                } catch (error) {
                    this.log(`‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message}`);
                    this.showToast('‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞', 'error');
                    
                } finally {
                    this.isExporting = false;
                    this.enableButtons();
                    setTimeout(() => this.updateProgress(0), 2000);
                }
            }
            
            async simulateExport() {
                this.log('üß™ –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞...');
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–∞–∂–¥—ã–π —à–∞–≥
                this.log('1Ô∏è‚É£ this.project.mode = "export"');
                this.project.mode = 'export';
                this.updateModeIndicator();
                
                await new Promise(r => setTimeout(r, 500));
                this.log('2Ô∏è‚É£ this.render()');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('3Ô∏è‚É£ await new Promise(r => setTimeout(r, 100))');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('4Ô∏è‚É£ for (const slide of this.project.slides) {');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('5Ô∏è‚É£   const el = this.renderSlide(slide, false)');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('6Ô∏è‚É£   document.body.appendChild(el)');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('7Ô∏è‚É£   const canvas = await html2canvas(el)');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('8Ô∏è‚É£   el.remove()');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('9Ô∏è‚É£ }');
                
                await new Promise(r => setTimeout(r, 500));
                this.log('üîü this.project.mode = "edit"');
                this.project.mode = 'edit';
                this.updateModeIndicator();
                
                this.log('‚úÖ –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!');
                this.showToast('üß™ –°–∏–º—É–ª—è—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞', 'info');
            }
            
            // ===== –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ú–ï–¢–û–î–´ =====
            
            renderSlide(slide, editable) {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide-preview';
                slideDiv.style.background = slide.background.color;
                slideDiv.style.position = 'relative';
                
                slide.textBlocks.forEach(block => {
                    const blockElement = this.createTextBlock(block, slide.autoKeywords || []);
                    slideDiv.appendChild(blockElement);
                });
                
                return slideDiv;
            }
            
            createTextBlock(block, autoKeywords) {
                const el = document.createElement('div');
                el.className = 'slide-text-block';
                
                el.style.left = block.x + '%';
                el.style.top = block.y + '%';
                el.style.width = block.width + '%';
                el.style.fontSize = block.size + 'px';
                el.style.fontFamily = block.font;
                el.style.color = block.color;
                
                if (block.glow) {
                    el.classList.add('glow');
                }
                
                if (block.highlightEnabled) {
                    el.innerHTML = this.parseTextWithKeywords(block.text, autoKeywords);
                } else {
                    el.textContent = block.text;
                }
                
                return el;
            }
            
            parseTextWithKeywords(text, autoKeywords = []) {
                let processedText = text;
                
                // –†—É—á–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                const manualKeywordRegex = /\*([^*]+)\*/g;
                processedText = processedText.replace(manualKeywordRegex, (match, keyword) => {
                    return `<span class="manual-keyword">${keyword}</span>`;
                });
                
                // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
                autoKeywords.forEach(keyword => {
                    const autoKeywordRegex = new RegExp(`\\b(${keyword})\\b`, 'gi');
                    processedText = processedText.replace(autoKeywordRegex, (match) => {
                        return `<span class="auto-keyword">${match}</span>`;
                    });
                });
                
                return processedText;
            }
            
            getActiveSlide() {
                return this.project.slides.find(slide => slide.id === this.project.activeSlideId);
            }
            
            render() {
                const slidesPreview = document.getElementById('slidesPreview');
                slidesPreview.innerHTML = '';
                
                this.project.slides.forEach(slide => {
                    const slideElement = this.renderSlide(slide, false);
                    slideElement.style.height = '150px';
                    slidesPreview.appendChild(slideElement);
                });
            }
            
            updateModeIndicator() {
                const indicator = document.getElementById('modeIndicator');
                indicator.textContent = this.project.mode;
                indicator.className = `mode-indicator mode-${this.project.mode}`;
            }
            
            updateProgress(percent) {
                const progressBar = document.getElementById('exportProgressBar');
                progressBar.style.width = percent + '%';
            }
            
            log(message) {
                const logElement = document.getElementById('exportLog');
                const timestamp = new Date().toLocaleTimeString();
                logElement.innerHTML += `[${timestamp}] ${message}<br>`;
                logElement.scrollTop = logElement.scrollHeight;
            }
            
            clearLog() {
                document.getElementById('exportLog').innerHTML = '–õ–æ–≥ –æ—á–∏—â–µ–Ω...<br>';
            }
            
            disableButtons() {
                document.getElementById('exportAllBtn').disabled = true;
                document.getElementById('exportCurrentBtn').disabled = true;
                document.getElementById('simulateBtn').disabled = true;
            }
            
            enableButtons() {
                document.getElementById('exportAllBtn').disabled = false;
                document.getElementById('exportCurrentBtn').disabled = false;
                document.getElementById('simulateBtn').disabled = false;
            }
            
            showToast(message, type) {
                const toast = document.createElement('div');
                toast.className = `toast ${type}`;
                toast.textContent = message;
                
                document.body.appendChild(toast);
                
                setTimeout(() => toast.classList.add('show'), 100);
                
                setTimeout(() => {
                    toast.classList.remove('show');
                    setTimeout(() => document.body.removeChild(toast), 300);
                }, 3000);
            }
            
            resetDemo() {
                this.project.mode = 'edit';
                this.updateModeIndicator();
                this.updateProgress(0);
                this.clearLog();
                this.log('üîÑ –î–µ–º–æ —Å–±—Ä–æ—à–µ–Ω–æ');
                this.showToast('üîÑ –î–µ–º–æ —Å–±—Ä–æ—à–µ–Ω–æ', 'info');
            }
        }
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        let testApp;
        
        document.addEventListener('DOMContentLoaded', () => {
            testApp = new TestExportApp();
            console.log('üîß Simplified Export System Test –∑–∞–≥—Ä—É–∂–µ–Ω');
        });
    </script>
</body>
</html>