<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß Simple Module Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background: #f0f0f0;
        }
        
        .test-result {
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-weight: bold;
        }
        
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        
        .console {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
            max-height: 400px;
            overflow-y: auto;
            white-space: pre-wrap;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>üîß Simple Module Test</h1>
    <div id="results"></div>
    <div id="console" class="console"></div>

    <script>
        const results = document.getElementById('results');
        const consoleDiv = document.getElementById('console');
        
        function log(message, type = 'success') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            results.appendChild(div);
            
            consoleDiv.textContent += `[${new Date().toLocaleTimeString()}] ${message}\n`;
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        }
        
        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        window.addEventListener('error', function(event) {
            log(`‚ùå –û—à–∏–±–∫–∞: ${event.message} –≤ ${event.filename}:${event.lineno}`, 'error');
        });
        
        log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º —Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π...');
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–∞–∂–¥—ã–π –º–æ–¥—É–ª—å –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏
        function checkModule(name) {
            if (window[name]) {
                log(`‚úÖ ${name} –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ`);
                return true;
            } else {
                log(`‚ùå ${name} –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω`, 'error');
                return false;
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π
        function checkAllModules() {
            log('üìã –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π...');
            
            const modules = [
                'StateManager',
                'Renderer', 
                'Editor',
                'DragManager',
                'ExportManager',
                'AIManager',
                'TemplateManager',
                'FlashPostApp'
            ];
            
            let loaded = 0;
            modules.forEach(module => {
                if (checkModule(module)) {
                    loaded++;
                }
            });
            
            log(`üìä –ò—Ç–æ–≥–æ –∑–∞–≥—Ä—É–∂–µ–Ω–æ: ${loaded}/${modules.length} –º–æ–¥—É–ª–µ–π`);
            
            if (loaded === modules.length) {
                log('üéâ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! –ü—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...');
                tryInitApp();
            } else {
                log('‚ö†Ô∏è –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–º–µ–Ω–µ–Ω–∞.', 'error');
            }
        }
        
        function tryInitApp() {
            try {
                log('üîß –°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ FlashPostApp...');
                const app = new FlashPostApp();
                log('‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å–ø–µ—à–Ω–æ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–æ!');
                window.testApp = app;
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
                log(`Stack: ${error.stack}`, 'error');
            }
        }
        
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ –∏–Ω—Ç–µ—Ä–≤–∞–ª—ã
        let checkCount = 0;
        const maxChecks = 10;
        
        const checkInterval = setInterval(() => {
            checkCount++;
            log(`üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ #${checkCount}...`);
            
            checkAllModules();
            
            if (checkCount >= maxChecks || window.FlashPostApp) {
                clearInterval(checkInterval);
                if (!window.FlashPostApp) {
                    log('‚ùå –ú–æ–¥—É–ª–∏ –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª–∏—Å—å –∑–∞ –æ—Ç–≤–µ–¥–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è', 'error');
                }
            }
        }, 1000);
    </script>
    
    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª–∏ –ø–æ –æ–¥–Ω–æ–º—É —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π -->
    <script>
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º StateManager...');
    </script>
    <script src="src/state.js"></script>
    <script>
        if (window.StateManager) {
            log('‚úÖ StateManager –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå StateManager –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º Renderer...');
    </script>
    <script src="src/renderer.js"></script>
    <script>
        if (window.Renderer) {
            log('‚úÖ Renderer –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå Renderer –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º Editor...');
    </script>
    <script src="src/editor.js"></script>
    <script>
        if (window.Editor) {
            log('‚úÖ Editor –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå Editor –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º DragManager...');
    </script>
    <script src="src/drag.js"></script>
    <script>
        if (window.DragManager) {
            log('‚úÖ DragManager –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå DragManager –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º ExportManager...');
    </script>
    <script src="src/export.js"></script>
    <script>
        if (window.ExportManager) {
            log('‚úÖ ExportManager –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå ExportManager –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º AIManager...');
    </script>
    <script src="src/ai.js"></script>
    <script>
        if (window.AIManager) {
            log('‚úÖ AIManager –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå AIManager –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º TemplateManager...');
    </script>
    <script src="src/templates.js"></script>
    <script>
        if (window.TemplateManager) {
            log('‚úÖ TemplateManager –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå TemplateManager –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üì¶ –ó–∞–≥—Ä—É–∂–∞–µ–º FlashPostApp...');
    </script>
    <script src="src/app.js"></script>
    <script>
        if (window.FlashPostApp) {
            log('‚úÖ FlashPostApp –∑–∞–≥—Ä—É–∂–µ–Ω');
        } else {
            log('‚ùå FlashPostApp –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω', 'error');
        }
        log('üèÅ –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É...');
    </script>
</body>
</html>