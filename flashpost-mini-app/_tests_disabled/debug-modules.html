<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Debug Modules - FlashPost</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            margin: 0;
        }
        .log {
            background: #2a2a2a;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            border-left: 4px solid #00ff00;
        }
        .error {
            border-left-color: #ff0000;
            color: #ff6666;
        }
        .warning {
            border-left-color: #ffaa00;
            color: #ffcc66;
        }
        .success {
            border-left-color: #00ff00;
            color: #66ff66;
        }
    </style>
</head>
<body>
    <h1>üîç Debug Modules Loading</h1>
    <div id="logs"></div>

    <script>
        const logs = document.getElementById('logs');
        
        function addLog(message, type = 'log') {
            const div = document.createElement('div');
            div.className = `log ${type}`;
            div.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            logs.appendChild(div);
            console.log(message);
        }

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç –æ—à–∏–±–æ–∫
        window.addEventListener('error', (event) => {
            addLog(`‚ùå ERROR: ${event.message} at ${event.filename}:${event.lineno}`, 'error');
        });

        window.addEventListener('unhandledrejection', (event) => {
            addLog(`‚ùå PROMISE REJECTION: ${event.reason}`, 'error');
        });

        addLog('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π...');

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º DOM
        if (document.readyState === 'loading') {
            addLog('üìÑ DOM –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è...', 'warning');
        } else {
            addLog('‚úÖ DOM –≥–æ—Ç–æ–≤', 'success');
        }

        // –§—É–Ω–∫—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –º–æ–¥—É–ª—è
        function checkModule(name) {
            if (typeof window[name] !== 'undefined') {
                addLog(`‚úÖ ${name} –∑–∞–≥—Ä—É–∂–µ–Ω`, 'success');
                return true;
            } else {
                addLog(`‚ùå ${name} –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω`, 'error');
                return false;
            }
        }

        // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ DOM
        document.addEventListener('DOMContentLoaded', () => {
            addLog('üìÑ DOMContentLoaded —Å–æ–±—ã—Ç–∏–µ —Å—Ä–∞–±–æ—Ç–∞–ª–æ');
            
            setTimeout(() => {
                addLog('üîç –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥—É–ª–∏ —á–µ—Ä–µ–∑ 1 —Å–µ–∫—É–Ω–¥—É...');
                
                const modules = [
                    'StateManager',
                    'Renderer', 
                    'Editor',
                    'DragManager',
                    'ExportManager',
                    'AIManager',
                    'TemplateManager',
                    'FlashPostApp'
                ];
                
                let loadedCount = 0;
                modules.forEach(module => {
                    if (checkModule(module)) {
                        loadedCount++;
                    }
                });
                
                addLog(`üìä –ó–∞–≥—Ä—É–∂–µ–Ω–æ –º–æ–¥—É–ª–µ–π: ${loadedCount}/${modules.length}`);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                if (typeof window.flashPostApp !== 'undefined') {
                    addLog('‚úÖ window.flashPostApp —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', 'success');
                    addLog(`üì± –¢–∏–ø: ${typeof window.flashPostApp}`);
                    
                    if (window.flashPostApp.state) {
                        addLog('‚úÖ state –¥–æ—Å—Ç—É–ø–µ–Ω', 'success');
                    } else {
                        addLog('‚ùå state –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    }
                    
                    if (window.flashPostApp.renderer) {
                        addLog('‚úÖ renderer –¥–æ—Å—Ç—É–ø–µ–Ω', 'success');
                    } else {
                        addLog('‚ùå renderer –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    }
                } else {
                    addLog('‚ùå window.flashPostApp –ù–ï —Å—É—â–µ—Å—Ç–≤—É–µ—Ç', 'error');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º DOM —ç–ª–µ–º–µ–Ω—Ç—ã
                const appElement = document.getElementById('app');
                if (appElement) {
                    addLog('‚úÖ #app —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω', 'success');
                } else {
                    addLog('‚ùå #app —ç–ª–µ–º–µ–Ω—Ç –ù–ï –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
                const loadingElement = document.getElementById('loading');
                if (loadingElement) {
                    addLog('‚úÖ #loading —ç–ª–µ–º–µ–Ω—Ç –Ω–∞–π–¥–µ–Ω', 'success');
                } else {
                    addLog('‚ùå #loading —ç–ª–µ–º–µ–Ω—Ç –ù–ï –Ω–∞–π–¥–µ–Ω', 'error');
                }
                
            }, 1000);
            
            // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
            setTimeout(() => {
                addLog('üîç –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã...');
                
                if (typeof window.flashPostApp !== 'undefined') {
                    addLog('‚úÖ FlashPostApp –ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–û!', 'success');
                } else {
                    addLog('‚ùå FlashPostApp –¢–ê–ö –ò –ù–ï –ò–ù–ò–¶–ò–ê–õ–ò–ó–ò–†–û–í–ê–ù–û', 'error');
                    
                    // –ü–æ–ø—Ä–æ–±—É–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –≤—Ä—É—á–Ω—É—é
                    addLog('üîß –ü–æ–ø—ã—Ç–∫–∞ —Ä—É—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏...');
                    
                    if (typeof FlashPostApp !== 'undefined') {
                        try {
                            window.flashPostApp = new FlashPostApp();
                            addLog('‚úÖ –†—É—á–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –£–°–ü–ï–®–ù–ê!', 'success');
                        } catch (error) {
                            addLog(`‚ùå –û—à–∏–±–∫–∞ —Ä—É—á–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
                        }
                    } else {
                        addLog('‚ùå –ö–ª–∞—Å—Å FlashPostApp –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                    }
                }
            }, 3000);
        });
    </script>

    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º –º–æ–¥—É–ª–∏ –≤ —Ç–æ–º –∂–µ –ø–æ—Ä—è–¥–∫–µ —á—Ç–æ –∏ –≤ index.html -->
    <script src="src/state.js" defer></script>
    <script src="src/renderer.js" defer></script>
    <script src="src/editor.js" defer></script>
    <script src="src/drag.js" defer></script>
    <script src="src/export.js" defer></script>
    <script src="src/ai.js" defer></script>
    <script src="src/template-manager.js" defer></script>
    <script src="src/app.js" defer></script>
</body>
</html>