<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>üîß StateManager Test</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .result { padding: 10px; margin: 5px 0; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
    </style>
</head>
<body>
    <h1>üîß StateManager Test</h1>
    <div id="results"></div>

    <script>
        function log(message, type = 'success') {
            const div = document.createElement('div');
            div.className = `result ${type}`;
            div.textContent = message;
            document.getElementById('results').appendChild(div);
            console.log(message);
        }
        
        window.addEventListener('error', function(event) {
            log(`‚ùå –û—à–∏–±–∫–∞: ${event.message}`, 'error');
        });
        
        log('üöÄ –¢–µ—Å—Ç–∏—Ä—É–µ–º –∑–∞–≥—Ä—É–∑–∫—É StateManager...');
    </script>
    
    <script src="src/state.js"></script>
    
    <script>
        try {
            if (typeof StateManager === 'undefined') {
                log('‚ùå StateManager –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏', 'error');
            } else {
                log('‚úÖ StateManager –Ω–∞–π–¥–µ–Ω –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–π –æ–±–ª–∞—Å—Ç–∏');
                
                // –ü—Ä–æ–±—É–µ–º —Å–æ–∑–¥–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä
                const state = new StateManager();
                log('‚úÖ –≠–∫–∑–µ–º–ø–ª—è—Ä StateManager —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ');
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞–∑–æ–≤—ã–µ –º–µ—Ç–æ–¥—ã
                const slide = state.createSlide({ title: '–¢–µ—Å—Ç' });
                if (slide && slide.id) {
                    log('‚úÖ –ú–µ—Ç–æ–¥ createSlide —Ä–∞–±–æ—Ç–∞–µ—Ç');
                } else {
                    log('‚ùå –ú–µ—Ç–æ–¥ createSlide –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç', 'error');
                }
                
                log('üéâ StateManager –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω!');
            }
        } catch (error) {
            log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ StateManager: ${error.message}`, 'error');
            log(`Stack: ${error.stack}`, 'error');
        }
    </script>
</body>
</html>