<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîç Final CSS Diagnosis</title>
    
    <!-- –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –°–¢–ò–õ–ò - –ì–ê–†–ê–ù–¢–ò–†–û–í–ê–ù–ù–û –†–ê–ë–û–¢–ê–Æ–¢ -->
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0f0f14 !important;
            color: #ffffff !important;
            min-height: 100vh;
            padding: 20px;
        }
        
        .diagnosis-container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid #833ab4;
        }
        
        .critical-info {
            background: rgba(255, 0, 0, 0.2);
            border: 2px solid #ff0000;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #ff6666;
        }
        
        .success-info {
            background: rgba(0, 255, 0, 0.2);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            color: #66ff66;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .test-item {
            background: rgba(0, 0, 0, 0.5);
            padding: 15px;
            border-radius: 10px;
            border-left: 4px solid #666;
        }
        
        .test-pass { border-left-color: #00ff00; color: #66ff66; }
        .test-fail { border-left-color: #ff0000; color: #ff6666; }
        .test-warn { border-left-color: #ffaa00; color: #ffcc66; }
        
        .code-block {
            background: rgba(0, 0, 0, 0.8);
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid #333;
        }
        
        .action-btn {
            background: #833ab4;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            margin: 5px;
        }
        
        .action-btn:hover { background: #6a2c91; }
        .action-btn.success { background: #28a745; }
        .action-btn.danger { background: #dc3545; }
    </style>
</head>
<body>
    <div class="diagnosis-container">
        <h1>üîç FINAL CSS DIAGNOSIS</h1>
        <p>–§–∏–Ω–∞–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º —Å CSS –∏ UI</p>
        
        <div id="criticalIssues"></div>
        
        <div class="test-grid" id="testResults"></div>
        
        <div style="text-align: center; margin: 30px 0;">
            <button class="action-btn" onclick="runFullDiagnosis()">üîÑ –ü–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞</button>
            <button class="action-btn success" onclick="fixCSSIssues()">üîß –ò—Å–ø—Ä–∞–≤–∏—Ç—å CSS</button>
            <button class="action-btn" onclick="testMainApp()">üöÄ –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
            <button class="action-btn danger" onclick="showDebugInfo()">üêõ Debug Info</button>
        </div>
        
        <div id="debugInfo" style="display: none;"></div>
    </div>
    
    <!-- –ó–∞–≥—Ä—É–∂–∞–µ–º app.css –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <link rel="stylesheet" href="app.css" id="appCSS">
    
    <script>
        let diagnosticResults = [];
        
        function addResult(title, status, details, solution = '') {
            diagnosticResults.push({ title, status, details, solution });
            updateDisplay();
        }
        
        function updateDisplay() {
            const container = document.getElementById('testResults');
            container.innerHTML = diagnosticResults.map(result => `
                <div class="test-item test-${result.status}">
                    <h4>${result.title}</h4>
                    <p>${result.details}</p>
                    ${result.solution ? `<small><strong>–†–µ—à–µ–Ω–∏–µ:</strong> ${result.solution}</small>` : ''}
                </div>
            `).join('');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
            const criticalIssues = diagnosticResults.filter(r => r.status === 'fail');
            const criticalContainer = document.getElementById('criticalIssues');
            
            if (criticalIssues.length > 0) {
                criticalContainer.innerHTML = `
                    <div class="critical-info">
                        <h3>üö® –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –ü–†–û–ë–õ–ï–ú–´ (${criticalIssues.length})</h3>
                        <p>–≠—Ç–∏ –ø—Ä–æ–±–ª–µ–º—ã –º–æ–≥—É—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ –±–µ–ª–æ–º—É —ç–∫—Ä–∞–Ω—É:</p>
                        <ul>
                            ${criticalIssues.map(issue => `<li>${issue.title}: ${issue.details}</li>`).join('')}
                        </ul>
                    </div>
                `;
            } else {
                criticalContainer.innerHTML = `
                    <div class="success-info">
                        <h3>‚úÖ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–• –ü–†–û–ë–õ–ï–ú –ù–ï –ù–ê–ô–î–ï–ù–û</h3>
                        <p>CSS –∏ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</p>
                    </div>
                `;
            }
        }
        
        function checkCSSLoading() {
            // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É app.css
            const appCSSLink = document.getElementById('appCSS');
            const sheets = Array.from(document.styleSheets);
            const appSheet = sheets.find(sheet => {
                try {
                    return sheet.href && sheet.href.includes('app.css');
                } catch (e) {
                    return false;
                }
            });
            
            if (appSheet) {
                try {
                    const rulesCount = appSheet.cssRules ? appSheet.cssRules.length : 0;
                    addResult('app.css –∑–∞–≥—Ä—É–∑–∫–∞', 'pass', 
                        `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ (${rulesCount} –ø—Ä–∞–≤–∏–ª)`, 
                        'CSS —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ');
                } catch (e) {
                    addResult('app.css –¥–æ—Å—Ç—É–ø', 'fail', 
                        `‚ùå –û—à–∏–±–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø—Ä–∞–≤–∏–ª–∞–º: ${e.message}`, 
                        '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ CORS –∏–ª–∏ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç—å CSS —Ñ–∞–π–ª–∞');
                }
            } else {
                addResult('app.css –∑–∞–≥—Ä—É–∑–∫–∞', 'fail', 
                    '‚ùå CSS —Ñ–∞–π–ª –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω –∏–ª–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 
                    '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É –∏ —Å–µ—Ä–≤–µ—Ä');
            }
        }
        
        function checkComputedStyles() {
            // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º computed styles
            const body = document.body;
            const bodyStyle = window.getComputedStyle(body);
            
            const bgColor = bodyStyle.backgroundColor;
            const textColor = bodyStyle.color;
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –Ω–µ –±–µ–ª—ã–π –ª–∏ —Ñ–æ–Ω
            const isWhiteBg = bgColor === 'rgb(255, 255, 255)' || 
                             bgColor === 'rgba(255, 255, 255, 1)' ||
                             bgColor === '#ffffff';
            
            if (isWhiteBg) {
                addResult('Body background', 'fail', 
                    `‚ùå –ë–µ–ª—ã–π —Ñ–æ–Ω: ${bgColor}`, 
                    '–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Ç–µ–º–Ω—ã–π —Ñ–æ–Ω: background: #0f0f14');
            } else {
                addResult('Body background', 'pass', 
                    `‚úÖ –¢–µ–º–Ω—ã–π —Ñ–æ–Ω: ${bgColor}`, 
                    '–§–æ–Ω –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
            }
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞
            const isWhiteText = textColor.includes('255, 255, 255') || textColor.includes('rgb(255, 255, 255)');
            
            if (isWhiteText) {
                addResult('Text color', 'pass', 
                    `‚úÖ –ë–µ–ª—ã–π —Ç–µ–∫—Å—Ç: ${textColor}`, 
                    '–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ');
            } else {
                addResult('Text color', 'warn', 
                    `‚ö†Ô∏è –ù–µ –±–µ–ª—ã–π —Ç–µ–∫—Å—Ç: ${textColor}`, 
                    '–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –±–µ–ª—ã–π —Ü–≤–µ—Ç –¥–ª—è —Ç–µ–º–Ω–æ–≥–æ —Ñ–æ–Ω–∞');
            }
        }
        
        function checkCSSVariables() {
            // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º CSS –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
            const root = document.documentElement;
            const rootStyle = window.getComputedStyle(root);
            
            const variables = [
                '--tg-bg',
                '--tg-text', 
                '--primary',
                '--instagram-gradient'
            ];
            
            variables.forEach(varName => {
                const value = rootStyle.getPropertyValue(varName);
                if (value.trim()) {
                    addResult(`CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ${varName}`, 'pass', 
                        `‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∞: ${value.trim()}`, 
                        '–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –¥–æ—Å—Ç—É–ø–Ω–∞');
                } else {
                    addResult(`CSS –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è ${varName}`, 'warn', 
                        '‚ö†Ô∏è –ù–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∏–ª–∏ –ø—É—Å—Ç–∞—è', 
                        '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ :root —Å–µ–∫—Ü–∏—é –≤ CSS');
                }
            });
        }
        
        function checkFontLoading() {
            // 4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∑–∞–≥—Ä—É–∑–∫—É —à—Ä–∏—Ñ—Ç–æ–≤
            const testFonts = ['Inter', 'Montserrat', 'Bebas Neue'];
            
            testFonts.forEach(fontName => {
                const testEl = document.createElement('div');
                testEl.style.fontFamily = fontName;
                testEl.style.position = 'absolute';
                testEl.style.visibility = 'hidden';
                testEl.textContent = 'Test';
                document.body.appendChild(testEl);
                
                const computedFont = window.getComputedStyle(testEl).fontFamily;
                const isLoaded = computedFont.toLowerCase().includes(fontName.toLowerCase());
                
                addResult(`–®—Ä–∏—Ñ—Ç ${fontName}`, isLoaded ? 'pass' : 'warn', 
                    isLoaded ? `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω: ${computedFont}` : `‚ö†Ô∏è Fallback: ${computedFont}`, 
                    isLoaded ? '–®—Ä–∏—Ñ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω' : '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ @import –≤ CSS');
                
                document.body.removeChild(testEl);
            });
        }
        
        function checkNetworkResources() {
            // 5. –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–µ—Ç–µ–≤—ã–µ —Ä–µ—Å—É—Ä—Å—ã
            const resources = performance.getEntriesByType('resource');
            const cssResources = resources.filter(r => 
                r.name.includes('.css') || r.name.includes('fonts.googleapis.com')
            );
            
            if (cssResources.length > 0) {
                addResult('–°–µ—Ç–µ–≤—ã–µ CSS —Ä–µ—Å—É—Ä—Å—ã', 'pass', 
                    `‚úÖ –ó–∞–≥—Ä—É–∂–µ–Ω–æ ${cssResources.length} —Ä–µ—Å—É—Ä—Å–æ–≤`, 
                    '–í–Ω–µ—à–Ω–∏–µ —Å—Ç–∏–ª–∏ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è');
                
                cssResources.forEach(resource => {
                    const loadTime = Math.round(resource.responseEnd - resource.startTime);
                    const status = resource.responseEnd > 0 ? 'pass' : 'fail';
                    addResult(`${resource.name.split('/').pop()}`, status, 
                        `${status === 'pass' ? '‚úÖ' : '‚ùå'} ${loadTime}ms`, 
                        status === 'pass' ? '–ó–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ' : '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏');
                });
            } else {
                addResult('–°–µ—Ç–µ–≤—ã–µ CSS —Ä–µ—Å—É—Ä—Å—ã', 'warn', 
                    '‚ö†Ô∏è –í–Ω–µ—à–Ω–∏–µ CSS —Ä–µ—Å—É—Ä—Å—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã', 
                    '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ @import –¥–∏—Ä–µ–∫—Ç–∏–≤—ã');
            }
        }
        
        function runFullDiagnosis() {
            diagnosticResults = [];
            addResult('–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∑–∞–ø—É—â–µ–Ω–∞', 'pass', new Date().toLocaleTimeString(), '');
            
            setTimeout(() => {
                checkCSSLoading();
                checkComputedStyles();
                checkCSSVariables();
                checkFontLoading();
                checkNetworkResources();
                
                const failCount = diagnosticResults.filter(r => r.status === 'fail').length;
                const warnCount = diagnosticResults.filter(r => r.status === 'warn').length;
                
                addResult('–ò—Ç–æ–≥–æ–≤—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç', failCount === 0 ? 'pass' : 'fail', 
                    `${failCount} –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫, ${warnCount} –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π`, 
                    failCount === 0 ? '–í—Å–µ —Å–∏—Å—Ç–µ–º—ã —Ä–∞–±–æ—Ç–∞—é—Ç' : '–¢—Ä–µ–±—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫');
            }, 500);
        }
        
        function fixCSSIssues() {
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
            document.body.style.background = '#0f0f14 !important';
            document.body.style.color = '#ffffff !important';
            
            const app = document.getElementById('app');
            if (app) {
                app.style.background = '#0f0f14 !important';
                app.style.minHeight = '100vh !important';
            }
            
            addResult('CSS –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è', 'pass', 
                '‚úÖ –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ç–∏–ª–µ–π', 
                '–§–æ–Ω –∏ —Ü–≤–µ—Ç–∞ –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã');
        }
        
        function testMainApp() {
            window.open('index.html', '_blank');
        }
        
        function showDebugInfo() {
            const debugContainer = document.getElementById('debugInfo');
            debugContainer.style.display = debugContainer.style.display === 'none' ? 'block' : 'none';
            
            if (debugContainer.style.display === 'block') {
                debugContainer.innerHTML = `
                    <div class="code-block">
                        <h4>üêõ Debug Information</h4>
                        <p><strong>User Agent:</strong> ${navigator.userAgent}</p>
                        <p><strong>Screen:</strong> ${screen.width}x${screen.height}</p>
                        <p><strong>Viewport:</strong> ${window.innerWidth}x${window.innerHeight}</p>
                        <p><strong>CSS Support:</strong> ${CSS.supports('backdrop-filter', 'blur(10px)') ? 'Modern' : 'Legacy'}</p>
                        <p><strong>StyleSheets:</strong> ${document.styleSheets.length}</p>
                        <p><strong>Performance:</strong> ${performance.getEntriesByType('resource').length} resources</p>
                    </div>
                `;
            }
        }
        
        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(runFullDiagnosis, 1000);
        });
        
        // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫
        window.addEventListener('error', (event) => {
            addResult('Runtime Error', 'fail', 
                `‚ùå ${event.message} at ${event.filename}:${event.lineno}`, 
                '–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞');
        });
    </script>
</body>
</html>