<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚úÖ Design Restored Test</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html, body { height: 100%; background: linear-gradient(135deg, #0f0f14 0%, #1a1a2e 50%, #16213e 100%); color: #fff; font-family: Arial, sans-serif; }
        .container { padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-card { background: rgba(255,255,255,0.1); border-radius: 12px; padding: 20px; margin: 20px 0; border: 1px solid rgba(255,255,255,0.2); backdrop-filter: blur(20px); }
        .btn { background: linear-gradient(45deg, #833ab4, #fd1d1d); color: white; border: none; padding: 15px 30px; border-radius: 8px; cursor: pointer; margin: 10px; font-size: 16px; font-weight: 600; transition: transform 0.2s; }
        .btn:hover { transform: translateY(-2px); }
        .status { padding: 15px; margin: 10px 0; border-radius: 8px; font-weight: bold; }
        .success { background: #1a5f1a; border: 2px solid #28a745; }
        .error { background: #5f1a1a; border: 2px solid #dc3545; }
        .info { background: #1a3a5f; border: 2px solid #007bff; }
        .log { background: #2a2a2a; border: 1px solid #444; border-radius: 8px; padding: 15px; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; margin: 10px 0; }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úÖ Design Restored Test</h1>
        <p>–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∏–∑–∞–π–Ω–∞ FlashPost –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</p>
        
        <div id="testStatus" class="status info">üîÑ –ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é...</div>
        
        <div class="test-card">
            <h2>üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
            <button class="btn" onclick="testMainApp()">üì± –¢–µ—Å—Ç –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è</button>
            <button class="btn" onclick="openMainApp()">üåê –û—Ç–∫—Ä—ã—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</button>
            <button class="btn" onclick="testDesignElements()">üé® –¢–µ—Å—Ç —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∏–∑–∞–π–Ω–∞</button>
        </div>

        <div class="test-card">
            <h2>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <div id="testResults" class="log">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –±—É–¥—É—Ç –∑–¥–µ—Å—å...</div>
        </div>
    </div>

    <script>
        let logElement;
        
        function log(message, type = 'info') {
            if (!logElement) logElement = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            const icon = type === 'error' ? '‚ùå' : type === 'success' ? '‚úÖ' : '‚ÑπÔ∏è';
            logElement.innerHTML += `<div style="color: ${type === 'error' ? '#ff6b6b' : type === 'success' ? '#51cf66' : '#74c0fc'}">[${timestamp}] ${icon} ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
            console.log(message);
        }

        function updateStatus(message, type) {
            const status = document.getElementById('testStatus');
            status.textContent = message;
            status.className = `status ${type}`;
        }

        async function testMainApp() {
            log('üì± –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
            updateStatus('üîÑ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
                const response = await fetch('/index.html');
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const html = await response.text();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
                const checks = [
                    { name: '#app —ç–ª–µ–º–µ–Ω—Ç', test: html.includes('id="app"') },
                    { name: '#loading —ç–ª–µ–º–µ–Ω—Ç', test: html.includes('id="loading"') },
                    { name: 'CSS –ø–æ–¥–∫–ª—é—á–µ–Ω', test: html.includes('app.css') },
                    { name: '–ú–æ–¥—É–ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω—ã', test: html.includes('src/app.js') },
                    { name: '–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ', test: html.includes('forceShowApp') },
                    { name: '–≠–∫—Å—Ç—Ä–µ–Ω–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ', test: html.includes('emergency-design-fix') }
                ];
                
                let passed = 0;
                checks.forEach(check => {
                    if (check.test) {
                        log(`‚úÖ ${check.name}: –Ω–∞–π–¥–µ–Ω`, 'success');
                        passed++;
                    } else {
                        log(`‚ùå ${check.name}: –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                    }
                });
                
                const success = passed >= 4;
                updateStatus(
                    success ? '‚úÖ –û—Å–Ω–æ–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ' : '‚ùå –ü—Ä–æ–±–ª–µ–º—ã —Å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º',
                    success ? 'success' : 'error'
                );
                
                log(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç: ${passed}/${checks.length} –ø—Ä–æ–≤–µ—Ä–æ–∫ –ø—Ä–æ–π–¥–µ–Ω–æ`, success ? 'success' : 'error');
                
                return success;
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}`, 'error');
                updateStatus('‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è', 'error');
                return false;
            }
        }

        async function testDesignElements() {
            log('üé® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–∏–∑–∞–π–Ω–∞...', 'info');
            
            try {
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º CSS —Ñ–∞–π–ª
                const cssResponse = await fetch('/app.css');
                if (cssResponse.ok) {
                    const css = await cssResponse.text();
                    
                    const cssChecks = [
                        { name: 'Instagram –≥—Ä–∞–¥–∏–µ–Ω—Ç', test: css.includes('--instagram-gradient') },
                        { name: '–°—Ç–∏–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', test: css.includes('.app') },
                        { name: '–°—Ç–∏–ª–∏ –∫–Ω–æ–ø–æ–∫', test: css.includes('.btn') },
                        { name: '–°—Ç–∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏', test: css.includes('.generation-buttons') },
                        { name: '–°—Ç–µ–∫–ª—è–Ω–Ω—ã–µ –∫–∞—Ä—Ç–æ—á–∫–∏', test: css.includes('.glass-card') }
                    ];
                    
                    let cssPassed = 0;
                    cssChecks.forEach(check => {
                        if (check.test) {
                            log(`‚úÖ CSS ${check.name}: –Ω–∞–π–¥–µ–Ω`, 'success');
                            cssPassed++;
                        } else {
                            log(`‚ùå CSS ${check.name}: –Ω–µ –Ω–∞–π–¥–µ–Ω`, 'error');
                        }
                    });
                    
                    log(`üìä CSS: ${cssPassed}/${cssChecks.length} —Å—Ç–∏–ª–µ–π –Ω–∞–π–¥–µ–Ω–æ`, cssPassed >= 4 ? 'success' : 'error');
                } else {
                    log('‚ùå CSS —Ñ–∞–π–ª –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω', 'error');
                }
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥—É–ª–∏
                const modules = ['state.js', 'renderer.js', 'app.js', 'ai.js'];
                let modulesPassed = 0;
                
                for (const module of modules) {
                    try {
                        const moduleResponse = await fetch(`/src/${module}`);
                        if (moduleResponse.ok) {
                            log(`‚úÖ –ú–æ–¥—É–ª—å ${module}: –¥–æ—Å—Ç—É–ø–µ–Ω`, 'success');
                            modulesPassed++;
                        } else {
                            log(`‚ùå –ú–æ–¥—É–ª—å ${module}: –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`, 'error');
                        }
                    } catch (error) {
                        log(`‚ùå –ú–æ–¥—É–ª—å ${module}: –æ—à–∏–±–∫–∞`, 'error');
                    }
                }
                
                log(`üìä –ú–æ–¥—É–ª–∏: ${modulesPassed}/${modules.length} –¥–æ—Å—Ç—É–ø–Ω–æ`, modulesPassed >= 3 ? 'success' : 'error');
                
                const overallSuccess = modulesPassed >= 3;
                log(`üéØ –û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${overallSuccess ? '–î–∏–∑–∞–π–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω' : '–ï—Å—Ç—å –ø—Ä–æ–±–ª–µ–º—ã'}`, overallSuccess ? 'success' : 'error');
                
            } catch (error) {
                log(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–∏–∑–∞–π–Ω–∞: ${error.message}`, 'error');
            }
        }

        function openMainApp() {
            log('üåê –û—Ç–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...', 'info');
            window.open('/index.html', '_blank');
        }

        // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
        window.addEventListener('load', () => {
            log('‚úÖ Design Restored Test –∑–∞–≥—Ä—É–∂–µ–Ω', 'info');
            setTimeout(() => {
                testMainApp();
            }, 1000);
        });
    </script>
</body>
</html>