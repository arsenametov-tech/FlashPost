<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashPost - AI PRO MODE Test</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
        }

        .header h1 {
            color: #667eea;
            margin: 0 0 10px 0;
            font-size: 2.5em;
            font-weight: 800;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
            margin: 0;
        }

        .test-section {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border-left: 5px solid #667eea;
        }

        .test-section h2 {
            color: #333;
            margin: 0 0 20px 0;
            font-size: 1.5em;
            font-weight: 700;
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .input-group input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e1e5e9;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s ease;
            margin-right: 10px;
            margin-bottom: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
        }

        .btn-success {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
        }

        .results {
            background: white;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #e1e5e9;
            max-height: 400px;
            overflow-y: auto;
        }

        .log-entry {
            padding: 8px 12px;
            margin-bottom: 5px;
            border-radius: 6px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
        }

        .log-info { background: #e3f2fd; color: #1976d2; }
        .log-success { background: #e8f5e8; color: #2e7d32; }
        .log-warning { background: #fff3e0; color: #f57c00; }
        .log-error { background: #ffebee; color: #d32f2f; }

        .slide-preview {
            background: white;
            border-radius: 10px;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #e1e5e9;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .slide-preview h4 {
            margin: 0 0 10px 0;
            color: #333;
            font-size: 1.2em;
        }

        .slide-preview .slide-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .slide-preview .slide-text {
            color: #555;
            line-height: 1.5;
            white-space: pre-line;
        }

        .slide-preview .slide-keywords {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #e1e5e9;
        }

        .keyword-tag {
            display: inline-block;
            background: #f1f3f4;
            color: #333;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            margin-right: 5px;
            margin-bottom: 5px;
        }

        .status {
            padding: 10px 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            font-weight: 600;
        }

        .status-loading {
            background: #e3f2fd;
            color: #1976d2;
            border-left: 4px solid #2196f3;
        }

        .status-success {
            background: #e8f5e8;
            color: #2e7d32;
            border-left: 4px solid #4caf50;
        }

        .status-error {
            background: #ffebee;
            color: #d32f2f;
            border-left: 4px solid #f44336;
        }

        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .metric {
            background: white;
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #e1e5e9;
            text-align: center;
        }

        .metric-value {
            font-size: 2em;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }

        .metric-label {
            color: #666;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üéØ AI PRO MODE Test</h1>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—É—Å–µ–ª–∏ (outline ‚Üí content)</p>
        </div>

        <div class="test-section">
            <h2>üöÄ PRO MODE Generation Test</h2>
            
            <div class="input-group">
                <label for="topicInput">–¢–µ–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—É—Å–µ–ª–∏:</label>
                <input type="text" id="topicInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å, –∏–Ω–≤–µ—Å—Ç–∏—Ü–∏–∏, —Ñ–∏—Ç–Ω–µ—Å..." value="–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å">
            </div>

            <button class="btn" onclick="testProModeGeneration()">üéØ –¢–µ—Å—Ç PRO MODE</button>
            <button class="btn btn-secondary" onclick="testOutlineGeneration()">üìã –¢–µ—Å—Ç Outline</button>
            <button class="btn btn-secondary" onclick="testContentGeneration()">‚úçÔ∏è –¢–µ—Å—Ç Content</button>
            <button class="btn btn-success" onclick="clearResults()">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>

            <div id="status"></div>
            <div id="metrics" class="metrics"></div>
            <div id="results" class="results"></div>
        </div>

        <div class="test-section">
            <h2>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</h2>
            <div id="slidePreview"></div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏ -->
    <script src="src/state.js"></script>
    <script src="src/ai.js"></script>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã
        let stateManager, aiManager;
        let testResults = [];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º StateManager
                stateManager = new StateManager();
                console.log('‚úÖ StateManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');

                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º AIManager
                aiManager = new AIManager(stateManager);
                console.log('‚úÖ AIManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');

                log('info', 'üöÄ –°–∏—Å—Ç–µ–º–∞ PRO MODE –≥–æ—Ç–æ–≤–∞ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é');
                updateStatus('success', '–°–∏—Å—Ç–µ–º–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ');

            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:', error);
                log('error', `‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`);
                updateStatus('error', `–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`);
            }
        });

        // –¢–µ—Å—Ç –ø–æ–ª–Ω–æ–π PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        async function testProModeGeneration() {
            const topic = document.getElementById('topicInput').value.trim();
            if (!topic) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');
                return;
            }

            updateStatus('loading', `üéØ –ó–∞–ø—É—Å–∫ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ–º—ã: "${topic}"`);
            log('info', `üéØ –ù–∞—á–∞–ª–æ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –¥–ª—è —Ç–µ–º—ã: "${topic}"`);

            const startTime = Date.now();

            try {
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
                const result = await aiManager.generateProModeCarousel(topic);
                
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('success', `‚úÖ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ ${duration}ms`);
                log('info', `üìä –°–æ–∑–¥–∞–Ω–æ —Å–ª–∞–π–¥–æ–≤: ${result.slides.length}`);
                log('info', `üé≠ –†–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${result.generatedBy}`);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –º–µ—Ç—Ä–∏–∫–∏
                updateMetrics({
                    slides: result.slides.length,
                    duration: `${duration}ms`,
                    mode: result.generatedBy,
                    topic: result.topic
                });

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤
                displaySlidePreview(result.slides);

                updateStatus('success', `‚úÖ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞! –°–æ–∑–¥–∞–Ω–æ ${result.slides.length} —Å–ª–∞–π–¥–æ–≤`);

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞
                testResults.push({
                    type: 'pro_mode_full',
                    topic: topic,
                    result: result,
                    duration: duration,
                    timestamp: new Date().toISOString()
                });

            } catch (error) {
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('error', `‚ùå –û—à–∏–±–∫–∞ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`);
                updateStatus('error', `‚ùå –û—à–∏–±–∫–∞ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`);
                
                console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error);
            }
        }

        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline
        async function testOutlineGeneration() {
            const topic = document.getElementById('topicInput').value.trim();
            if (!topic) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');
                return;
            }

            updateStatus('loading', `üìã –ì–µ–Ω–µ—Ä–∞—Ü–∏—è outline –¥–ª—è —Ç–µ–º—ã: "${topic}"`);
            log('info', `üìã –ù–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline –¥–ª—è —Ç–µ–º—ã: "${topic}"`);

            const startTime = Date.now();

            try {
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é outline
                const outline = await aiManager.generateCarouselOutline(topic);
                
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('success', `‚úÖ Outline –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ ${duration}ms`);
                log('info', `üìä –°–æ–∑–¥–∞–Ω–æ —Å–ª–∞–π–¥–æ–≤ –≤ outline: ${outline.outline.length}`);
                log('info', `üèóÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞: ${outline.structure}`);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ outline
                outline.outline.forEach((slide, index) => {
                    log('info', `üìÑ –°–ª–∞–π–¥ ${slide.slideNumber} (${slide.type}): ${slide.mainIdea}`);
                });

                updateStatus('success', `‚úÖ Outline —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! ${outline.outline.length} —Å–ª–∞–π–¥–æ–≤`);

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                testResults.push({
                    type: 'outline_only',
                    topic: topic,
                    result: outline,
                    duration: duration,
                    timestamp: new Date().toISOString()
                });

            } catch (error) {
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('error', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline: ${error.message}`);
                updateStatus('error', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline: ${error.message}`);
                
                console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error);
            }
        }

        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        async function testContentGeneration() {
            const topic = document.getElementById('topicInput').value.trim();
            if (!topic) {
                alert('–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏');
                return;
            }

            updateStatus('loading', `‚úçÔ∏è –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ç–µ–º—ã: "${topic}"`);
            log('info', `‚úçÔ∏è –ù–∞—á–∞–ª–æ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è —Ç–µ–º—ã: "${topic}"`);

            const startTime = Date.now();

            try {
                // –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º outline
                const outline = await aiManager.generateCarouselOutline(topic);
                log('info', `üìã Outline —Å–æ–∑–¥–∞–Ω: ${outline.outline.length} —Å–ª–∞–π–¥–æ–≤`);

                // –ó–∞—Ç–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                const content = await aiManager.generateCarouselContent(topic, outline);
                
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('success', `‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ –∑–∞ ${duration}ms`);
                log('info', `üìä –°–æ–∑–¥–∞–Ω–æ —Å–ª–∞–π–¥–æ–≤ —Å –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º: ${content.slides.length}`);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–µ—Ç–∞–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                content.slides.forEach((slide, index) => {
                    const lines = slide.text.split('\n').filter(line => line.trim().length > 0);
                    log('info', `üìÑ –°–ª–∞–π–¥ ${slide.slideNumber} (${slide.type}): ${lines.length} —Å—Ç—Ä–æ–∫`);
                });

                updateStatus('success', `‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω! ${content.slides.length} —Å–ª–∞–π–¥–æ–≤`);

                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
                displayContentPreview(content.slides);

                // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç
                testResults.push({
                    type: 'content_only',
                    topic: topic,
                    result: content,
                    duration: duration,
                    timestamp: new Date().toISOString()
                });

            } catch (error) {
                const endTime = Date.now();
                const duration = endTime - startTime;

                log('error', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${error.message}`);
                updateStatus('error', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${error.message}`);
                
                console.error('–î–µ—Ç–∞–ª–∏ –æ—à–∏–±–∫–∏:', error);
            }
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤
        function displaySlidePreview(slides) {
            const previewContainer = document.getElementById('slidePreview');
            previewContainer.innerHTML = '';

            slides.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide-preview';
                
                const slideType = slide.slideType || slide.metadata?.slideType || 'unknown';
                const keywordType = slide.keywordType || slide.metadata?.keywordType || 'unknown';
                
                slideDiv.innerHTML = `
                    <h4>–°–ª–∞–π–¥ ${index + 1}</h4>
                    <div class="slide-type">${slideType}</div>
                    <div class="slide-text">${slide.textBlocks?.[1]?.text || '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</div>
                    <div class="slide-keywords">
                        <strong>–ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ (${keywordType}):</strong><br>
                        ${(slide.autoKeywords || []).map(keyword => 
                            `<span class="keyword-tag">${keyword}</span>`
                        ).join('')}
                    </div>
                `;
                
                previewContainer.appendChild(slideDiv);
            });
        }

        // –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–µ–≤—å—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        function displayContentPreview(slides) {
            const previewContainer = document.getElementById('slidePreview');
            previewContainer.innerHTML = '';

            slides.forEach((slide, index) => {
                const slideDiv = document.createElement('div');
                slideDiv.className = 'slide-preview';
                
                const lines = slide.text.split('\n').filter(line => line.trim().length > 0);
                
                slideDiv.innerHTML = `
                    <h4>${slide.title}</h4>
                    <div class="slide-type">${slide.type} (${slide.keywordType})</div>
                    <div class="slide-text">${slide.text}</div>
                    <div class="slide-keywords">
                        <strong>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:</strong> ${lines.length} —Å—Ç—Ä–æ–∫, ${slide.text.length} —Å–∏–º–≤–æ–ª–æ–≤
                    </div>
                `;
                
                previewContainer.appendChild(slideDiv);
            });
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
        function updateMetrics(metrics) {
            const metricsContainer = document.getElementById('metrics');
            metricsContainer.innerHTML = `
                <div class="metric">
                    <div class="metric-value">${metrics.slides}</div>
                    <div class="metric-label">–°–ª–∞–π–¥–æ–≤</div>
                </div>
                <div class="metric">
                    <div class="metric-value">${metrics.duration}</div>
                    <div class="metric-label">–í—Ä–µ–º—è</div>
                </div>
                <div class="metric">
                    <div class="metric-value">${metrics.mode}</div>
                    <div class="metric-label">–†–µ–∂–∏–º</div>
                </div>
                <div class="metric">
                    <div class="metric-value">${metrics.topic}</div>
                    <div class="metric-label">–¢–µ–º–∞</div>
                </div>
            `;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
        function updateStatus(type, message) {
            const statusDiv = document.getElementById('status');
            statusDiv.className = `status status-${type}`;
            statusDiv.textContent = message;
        }

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function log(type, message) {
            const resultsDiv = document.getElementById('results');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            resultsDiv.appendChild(logEntry);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            document.getElementById('results').innerHTML = '';
            document.getElementById('slidePreview').innerHTML = '';
            document.getElementById('metrics').innerHTML = '';
            document.getElementById('status').innerHTML = '';
            testResults = [];
            log('info', 'üßπ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—â–µ–Ω—ã');
        }

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(event) {
            log('error', `‚ùå JavaScript –æ—à–∏–±–∫–∞: ${event.error.message}`);
            console.error('JavaScript –æ—à–∏–±–∫–∞:', event.error);
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –ø—Ä–æ–º–∏—Å–æ–≤
        window.addEventListener('unhandledrejection', function(event) {
            log('error', `‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–æ–º–∏—Å–∞: ${event.reason}`);
            console.error('–ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–æ–º–∏—Å–∞:', event.reason);
        });
    </script>
</body>
</html>