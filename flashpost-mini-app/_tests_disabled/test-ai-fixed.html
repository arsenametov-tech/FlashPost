<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ AI –º–æ–¥—É–ª—è</title>
    <style>
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 100vh;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            backdrop-filter: blur(10px);
        }
        
        h1 {
            text-align: center;
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 10px;
            transition: transform 0.2s;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
        }
        
        .test-button:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .input-group {
            margin: 15px 0;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .input-group input {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            background: rgba(255, 255, 255, 0.9);
            color: #333;
        }
        
        .result {
            background: rgba(0, 0, 0, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            max-height: 300px;
            overflow-y: auto;
        }
        
        .status {
            padding: 10px;
            border-radius: 8px;
            margin: 10px 0;
            font-weight: 600;
        }
        
        .status.success {
            background: rgba(46, 204, 113, 0.3);
            border: 1px solid #2ecc71;
        }
        
        .status.error {
            background: rgba(231, 76, 60, 0.3);
            border: 1px solid #e74c3c;
        }
        
        .status.info {
            background: rgba(52, 152, 219, 0.3);
            border: 1px solid #3498db;
        }
        
        .slide-preview {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid #ff6b6b;
        }
        
        .slide-title {
            font-weight: bold;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        
        .slide-content {
            line-height: 1.5;
            opacity: 0.9;
        }
        
        .keywords {
            margin-top: 10px;
            font-size: 0.9em;
            opacity: 0.8;
        }
        
        .keyword-tag {
            background: rgba(255, 107, 107, 0.3);
            padding: 3px 8px;
            border-radius: 15px;
            margin: 2px;
            display: inline-block;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ –¢–µ—Å—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–æ–≥–æ AI –º–æ–¥—É–ª—è</h1>
        
        <div class="test-section">
            <h2>üìä –°—Ç–∞—Ç—É—Å AI –º–æ–¥—É–ª—è</h2>
            <button class="test-button" onclick="checkAIStatus()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å AI</button>
            <div id="aiStatus"></div>
        </div>
        
        <div class="test-section">
            <h2>üéØ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—É—Å–µ–ª–∏</h2>
            <div class="input-group">
                <label for="topicInput">–¢–µ–º–∞ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:</label>
                <input type="text" id="topicInput" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å" value="–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å">
            </div>
            <button class="test-button" onclick="testCarouselGeneration()">–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å</button>
            <button class="test-button" onclick="testProModeGeneration()">PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏—è</button>
            <button class="test-button" onclick="testFallbackGeneration()">–¢–µ—Å—Ç Fallback</button>
            <div id="generationResult"></div>
        </div>
        
        <div class="test-section">
            <h2>üîç –¢–µ—Å—Ç –º–µ—Ç–æ–¥–æ–≤ AI</h2>
            <button class="test-button" onclick="testKeywordExtraction()">–¢–µ—Å—Ç –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤</button>
            <button class="test-button" onclick="testOutlineGeneration()">–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline</button>
            <button class="test-button" onclick="testContentGeneration()">–¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞</button>
            <div id="methodsResult"></div>
        </div>
        
        <div class="test-section">
            <h2>üõ°Ô∏è –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫</h2>
            <button class="test-button" onclick="testErrorHandling()">–¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫</button>
            <button class="test-button" onclick="testFallbackSystem()">–¢–µ—Å—Ç fallback —Å–∏—Å—Ç–µ–º—ã</button>
            <div id="errorResult"></div>
        </div>
        
        <div class="test-section">
            <h2>üìã –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h2>
            <div id="testResults"></div>
        </div>
    </div>

    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –º–æ–¥—É–ª–∏ -->
    <script src="src/state.js"></script>
    <script src="src/ai.js"></script>
    
    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        let stateManager;
        let aiManager;
        let testResults = [];
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.addEventListener('DOMContentLoaded', function() {
            initializeTestEnvironment();
        });
        
        function initializeTestEnvironment() {
            try {
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º StateManager
                if (typeof StateManager !== 'undefined') {
                    stateManager = new StateManager();
                    addTestResult('‚úÖ StateManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');
                } else {
                    addTestResult('‚ùå StateManager –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    return;
                }
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º AIManager
                if (typeof AIManager !== 'undefined') {
                    aiManager = new AIManager(stateManager);
                    addTestResult('‚úÖ AIManager –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω', 'success');
                } else {
                    addTestResult('‚ùå AIManager –Ω–µ –Ω–∞–π–¥–µ–Ω', 'error');
                    return;
                }
                
                addTestResult('üéØ –¢–µ—Å—Ç–æ–≤–∞—è —Å—Ä–µ–¥–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ', 'info');
                
            } catch (error) {
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏: ${error.message}`, 'error');
                console.error('Initialization error:', error);
            }
        }
        
        function addTestResult(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            testResults.push({ message, type, timestamp });
            updateTestResults();
        }
        
        function updateTestResults() {
            const resultsDiv = document.getElementById('testResults');
            resultsDiv.innerHTML = testResults.map(result => 
                `<div class="status ${result.type}">[${result.timestamp}] ${result.message}</div>`
            ).join('');
        }
        
        async function checkAIStatus() {
            const statusDiv = document.getElementById('aiStatus');
            
            try {
                if (!aiManager) {
                    throw new Error('AIManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                const isAvailable = aiManager.isAvailable();
                const hasSetApiKey = typeof aiManager.setApiKey === 'function';
                const hasGenerateCarousel = typeof aiManager.generateCarousel === 'function';
                const hasGenerateProMode = typeof aiManager.generateProModeCarousel === 'function';
                const hasExtractKeywords = typeof aiManager.extractSimpleKeywords === 'function';
                
                const status = `
                    <div class="status success">‚úÖ AI –º–æ–¥—É–ª—å –∑–∞–≥—Ä—É–∂–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ</div>
                    <div class="result">
–°—Ç–∞—Ç—É—Å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏: ${isAvailable ? '‚úÖ –î–æ—Å—Ç—É–ø–µ–Ω' : '‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω—ã–π —Ä–µ–∂–∏–º'}
–ú–µ—Ç–æ–¥ setApiKey: ${hasSetApiKey ? '‚úÖ' : '‚ùå'}
–ú–µ—Ç–æ–¥ generateCarousel: ${hasGenerateCarousel ? '‚úÖ' : '‚ùå'}
–ú–µ—Ç–æ–¥ generateProModeCarousel: ${hasGenerateProMode ? '‚úÖ' : '‚ùå'}
–ú–µ—Ç–æ–¥ extractSimpleKeywords: ${hasExtractKeywords ? '‚úÖ' : '‚ùå'}

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä: ${aiManager.constructor.name}
State Manager: ${aiManager.state ? '‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω' : '‚ùå –ù–µ –ø–æ–¥–∫–ª—é—á–µ–Ω'}
                    </div>
                `;
                
                statusDiv.innerHTML = status;
                addTestResult('‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ AI –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ', 'success');
                
            } catch (error) {
                statusDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞: ${error.message}`, 'error');
            }
        }
        
        async function testCarouselGeneration() {
            const resultDiv = document.getElementById('generationResult');
            const topic = document.getElementById('topicInput').value || '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
            
            try {
                addTestResult(`üéØ –ù–∞—á–∏–Ω–∞–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–∞—Ä—É—Å–µ–ª–∏ –¥–ª—è —Ç–µ–º—ã: ${topic}`, 'info');
                
                const startTime = Date.now();
                const result = await aiManager.generateCarousel(topic);
                const endTime = Date.now();
                
                const generationTime = endTime - startTime;
                
                let html = `
                    <div class="status success">‚úÖ –ö–∞—Ä—É—Å–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞ ${generationTime}–º—Å</div>
                    <div class="result">
–¢–µ–º–∞: ${result.topic}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${result.slides.length}
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: ${result.generatedBy}
–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date(result.timestamp).toLocaleString()}
                    </div>
                `;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤
                if (result.slides && result.slides.length > 0) {
                    html += '<h3>üìã –ü—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤:</h3>';
                    result.slides.forEach((slide, index) => {
                        const textBlock = slide.textBlocks && slide.textBlocks[0];
                        const keywords = slide.autoKeywords || [];
                        
                        html += `
                            <div class="slide-preview">
                                <div class="slide-title">–°–ª–∞–π–¥ ${index + 1}</div>
                                <div class="slide-content">${textBlock ? textBlock.text : '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</div>
                                <div class="keywords">
                                    –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ${keywords.map(k => `<span class="keyword-tag">${k}</span>`).join('')}
                                </div>
                            </div>
                        `;
                    });
                }
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ –ö–∞—Ä—É—Å–µ–ª—å —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞: ${result.slides.length} —Å–ª–∞–π–¥–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–∞—Ä—É—Å–µ–ª–∏: ${error.message}`, 'error');
                console.error('Generation error:', error);
            }
        }
        
        async function testProModeGeneration() {
            const resultDiv = document.getElementById('generationResult');
            const topic = document.getElementById('topicInput').value || '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
            
            try {
                addTestResult(`üéØ –ù–∞—á–∏–Ω–∞–µ–º PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ–º—ã: ${topic}`, 'info');
                
                const startTime = Date.now();
                const result = await aiManager.generateProModeCarousel(topic);
                const endTime = Date.now();
                
                const generationTime = endTime - startTime;
                
                let html = `
                    <div class="status success">‚úÖ PRO MODE –∫–∞—Ä—É—Å–µ–ª—å —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞ ${generationTime}–º—Å</div>
                    <div class="result">
–¢–µ–º–∞: ${result.topic}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${result.slides.length}
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: ${result.generatedBy}
–†–µ–∂–∏–º: ${result.mode}
–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date(result.timestamp).toLocaleString()}
                    </div>
                `;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–µ–≤—å—é —Å–ª–∞–π–¥–æ–≤ —Å —Ç–∏–ø–∞–º–∏
                if (result.slides && result.slides.length > 0) {
                    html += '<h3>üìã PRO MODE —Å–ª–∞–π–¥—ã:</h3>';
                    result.slides.forEach((slide, index) => {
                        const textBlock = slide.textBlocks && slide.textBlocks[0];
                        const keywords = slide.autoKeywords || [];
                        
                        html += `
                            <div class="slide-preview">
                                <div class="slide-title">–°–ª–∞–π–¥ ${index + 1} (${slide.slideType || 'unknown'})</div>
                                <div class="slide-content">${textBlock ? textBlock.text : '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</div>
                                <div class="keywords">
                                    –¢–∏–ø –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${slide.keywordType || '–Ω–µ —É–∫–∞–∑–∞–Ω'}<br>
                                    –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ${keywords.map(k => `<span class="keyword-tag">${k}</span>`).join('')}
                                </div>
                            </div>
                        `;
                    });
                }
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ PRO MODE –∫–∞—Ä—É—Å–µ–ª—å: ${result.slides.length} —Å–ª–∞–π–¥–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ PRO MODE: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ PRO MODE –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
                console.error('PRO MODE error:', error);
            }
        }
        
        async function testFallbackGeneration() {
            const resultDiv = document.getElementById('generationResult');
            const topic = document.getElementById('topicInput').value || '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
            
            try {
                addTestResult(`üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –¥–ª—è —Ç–µ–º—ã: ${topic}`, 'info');
                
                const startTime = Date.now();
                const result = aiManager.generateFallbackCarousel(topic);
                const endTime = Date.now();
                
                const generationTime = endTime - startTime;
                
                let html = `
                    <div class="status success">‚úÖ Fallback –∫–∞—Ä—É—Å–µ–ª—å —Å–æ–∑–¥–∞–Ω–∞ –∑–∞ ${generationTime}–º—Å</div>
                    <div class="result">
–¢–µ–º–∞: ${result.topic}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${result.slides.length}
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: ${result.generatedBy}
–í—Ä–µ–º—è —Å–æ–∑–¥–∞–Ω–∏—è: ${new Date(result.timestamp).toLocaleString()}
                    </div>
                `;
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º fallback —Å–ª–∞–π–¥—ã
                if (result.slides && result.slides.length > 0) {
                    html += '<h3>üìã Fallback —Å–ª–∞–π–¥—ã:</h3>';
                    result.slides.forEach((slide, index) => {
                        const textBlock = slide.textBlocks && slide.textBlocks[0];
                        
                        html += `
                            <div class="slide-preview">
                                <div class="slide-title">Fallback —Å–ª–∞–π–¥ ${index + 1}</div>
                                <div class="slide-content">${textBlock ? textBlock.text : '–ù–µ—Ç —Ç–µ–∫—Å—Ç–∞'}</div>
                            </div>
                        `;
                    });
                }
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç: ${result.slides.length} —Å–ª–∞–π–¥–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ fallback: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`, 'error');
                console.error('Fallback error:', error);
            }
        }
        
        function testKeywordExtraction() {
            const resultDiv = document.getElementById('methodsResult');
            
            try {
                const testText = "–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å - —ç—Ç–æ –∫–ª—é—á –∫ —É—Å–ø–µ—Ö—É –≤ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–º –º–∏—Ä–µ. –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –ø–æ–º–æ–≥–∞–µ—Ç –¥–æ—Å—Ç–∏–≥–∞—Ç—å —Ü–µ–ª–µ–π –±—ã—Å—Ç—Ä–µ–µ.";
                
                const keywords = aiManager.extractSimpleKeywords(testText);
                
                const html = `
                    <div class="status success">‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ —Ä–∞–±–æ—Ç–∞–µ—Ç</div>
                    <div class="result">
–¢–µ—Å—Ç–æ–≤—ã–π —Ç–µ–∫—Å—Ç: "${testText}"

–ò–∑–≤–ª–µ—á–µ–Ω–Ω—ã–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞: ${keywords.join(', ')}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ: ${keywords.length}
                    </div>
                `;
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ –ò–∑–≤–ª–µ—á–µ–Ω–æ ${keywords.length} –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${error.message}`, 'error');
            }
        }
        
        async function testOutlineGeneration() {
            const resultDiv = document.getElementById('methodsResult');
            const topic = document.getElementById('topicInput').value || '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
            
            try {
                addTestResult(`üìã –¢–µ—Å—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é outline –¥–ª—è: ${topic}`, 'info');
                
                const outline = await aiManager.generateCarouselOutline(topic);
                
                let html = `
                    <div class="status success">‚úÖ Outline —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω</div>
                    <div class="result">
–¢–µ–º–∞: ${outline.topic}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${outline.totalSlides}
–°—Ç—Ä—É–∫—Ç—É—Ä–∞: ${outline.structure}

–î–µ—Ç–∞–ª–∏ outline:
                    </div>
                `;
                
                outline.outline.forEach(slide => {
                    html += `
                        <div class="slide-preview">
                            <div class="slide-title">–°–ª–∞–π–¥ ${slide.slideNumber} (${slide.type})</div>
                            <div class="slide-content">
                                <strong>–ò–¥–µ—è:</strong> ${slide.mainIdea}<br>
                                <strong>–¶–µ–ª—å:</strong> ${slide.purpose}<br>
                                <strong>–°–≤—è–∑—å:</strong> ${slide.connectionToPrevious}
                            </div>
                        </div>
                    `;
                });
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ Outline —Å–æ–∑–¥–∞–Ω: ${outline.totalSlides} —Å–ª–∞–π–¥–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ outline: ${error.message}`, 'error');
            }
        }
        
        async function testContentGeneration() {
            const resultDiv = document.getElementById('methodsResult');
            const topic = document.getElementById('topicInput').value || '–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—å';
            
            try {
                addTestResult(`‚úçÔ∏è –¢–µ—Å—Ç–∏—Ä—É–µ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏—é –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –¥–ª—è: ${topic}`, 'info');
                
                // –°–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞–µ–º outline
                const outline = await aiManager.generateCarouselOutline(topic);
                
                // –ó–∞—Ç–µ–º –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º –∫–æ–Ω—Ç–µ–Ω—Ç
                const content = await aiManager.generateCarouselContent(topic, outline);
                
                let html = `
                    <div class="status success">‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω</div>
                    <div class="result">
–¢–µ–º–∞: ${content.topic}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${content.slides.length}
                    </div>
                `;
                
                content.slides.forEach(slide => {
                    html += `
                        <div class="slide-preview">
                            <div class="slide-title">${slide.title} (${slide.type})</div>
                            <div class="slide-content">${slide.text}</div>
                            <div class="keywords">–¢–∏–ø –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤: ${slide.keywordType}</div>
                        </div>
                    `;
                });
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ –ö–æ–Ω—Ç–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω: ${content.slides.length} —Å–ª–∞–π–¥–æ–≤`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–æ–Ω—Ç–µ–Ω—Ç–∞: ${error.message}`, 'error');
            }
        }
        
        async function testErrorHandling() {
            const resultDiv = document.getElementById('errorResult');
            
            try {
                addTestResult('üõ°Ô∏è –¢–µ—Å—Ç–∏—Ä—É–µ–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫...', 'info');
                
                // –¢–µ—Å—Ç 1: –ü—É—Å—Ç–∞—è —Ç–µ–º–∞
                let errorCount = 0;
                let successCount = 0;
                
                try {
                    await aiManager.generateCarousel('');
                    successCount++;
                } catch (error) {
                    errorCount++;
                }
                
                // –¢–µ—Å—Ç 2: –û—á–µ–Ω—å –¥–ª–∏–Ω–Ω–∞—è —Ç–µ–º–∞
                try {
                    const longTopic = '–ê'.repeat(1000);
                    await aiManager.generateCarousel(longTopic);
                    successCount++;
                } catch (error) {
                    errorCount++;
                }
                
                // –¢–µ—Å—Ç 3: –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ —Å–∏–º–≤–æ–ª—ã
                try {
                    await aiManager.generateCarousel('!@#$%^&*()');
                    successCount++;
                } catch (error) {
                    errorCount++;
                }
                
                const html = `
                    <div class="status success">‚úÖ –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω</div>
                    <div class="result">
–£—Å–ø–µ—à–Ω—ã—Ö –≥–µ–Ω–µ—Ä–∞—Ü–∏–π: ${successCount}
–û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –æ—à–∏–±–æ–∫: ${errorCount}
–û–±—â–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${errorCount === 0 ? '–í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—à–ª–∏ —É—Å–ø–µ—à–Ω–æ' : '–ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–µ—Å—Ç—ã –≤—ã–∑–≤–∞–ª–∏ –æ—à–∏–±–∫–∏ (—ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ)'}
                    </div>
                `;
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫: ${successCount} —É—Å–ø–µ—à–Ω—ã—Ö, ${errorCount} –æ—à–∏–±–æ–∫`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}</div>`;
                addTestResult(`‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è: ${error.message}`, 'error');
            }
        }
        
        async function testFallbackSystem() {
            const resultDiv = document.getElementById('errorResult');
            
            try {
                addTestResult('üîÑ –¢–µ—Å—Ç–∏—Ä—É–µ–º fallback —Å–∏—Å—Ç–µ–º—É...', 'info');
                
                const topic = '–¢–µ—Å—Ç–æ–≤–∞—è —Ç–µ–º–∞';
                
                // –¢–µ—Å—Ç –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å fallback
                const result = await aiManager.generateHighQualityCarousel(topic);
                
                const html = `
                    <div class="status success">‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ</div>
                    <div class="result">
–¢–µ–º–∞: ${result.topic}
–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: ${result.generatedBy}
–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ª–∞–π–¥–æ–≤: ${result.slides.length}
–†–µ–∂–∏–º: ${result.mode || 'standard'}

Fallback —Ü–µ–ø–æ—á–∫–∞:
1. PRO MODE ‚Üí 2. Standard Mode ‚Üí 3. Fallback Mode ‚Üí 4. Emergency Mode

–†–µ–∑—É–ª—å—Ç–∞—Ç: –°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–ª–∞ –∫–∞—Ä—É—Å–µ–ª—å –Ω–∞ –æ–¥–Ω–æ–º –∏–∑ —É—Ä–æ–≤–Ω–µ–π
                    </div>
                `;
                
                resultDiv.innerHTML = html;
                addTestResult(`‚úÖ Fallback —Å–∏—Å—Ç–µ–º–∞: ${result.generatedBy}`, 'success');
                
            } catch (error) {
                resultDiv.innerHTML = `<div class="status error">‚ùå –û—à–∏–±–∫–∞ fallback —Å–∏—Å—Ç–µ–º—ã: ${error.message}</div>`;
                addTestResult(`‚ùå –û—à–∏–±–∫–∞ fallback —Å–∏—Å—Ç–µ–º—ã: ${error.message}`, 'error');
            }
        }
    </script>
</body>
</html>