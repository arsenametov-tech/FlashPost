<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete System Validation</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: #333;
        }
        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #667eea;
            margin: 0;
            font-size: 2.5em;
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .test-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            border-left: 5px solid #667eea;
        }
        .test-section h3 {
            margin: 0 0 15px 0;
            color: #333;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            width: 100%;
        }
        .btn:hover {
            transform: translateY(-2px);
        }
        .btn-success { background: linear-gradient(135deg, #00b894 0%, #00cec9 100%); }
        .btn-warning { background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%); }
        .btn-danger { background: linear-gradient(135deg, #fd79a8 0%, #ff7675 100%); }
        .results {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            border: 1px solid #e1e5e9;
            max-height: 300px;
            overflow-y: auto;
        }
        .log-entry {
            padding: 5px 10px;
            margin-bottom: 3px;
            border-radius: 4px;
            font-family: monospace;
            font-size: 12px;
        }
        .log-info { background: #e3f2fd; color: #1976d2; }
        .log-success { background: #e8f5e8; color: #2e7d32; }
        .log-error { background: #ffebee; color: #d32f2f; }
        .log-warning { background: #fff3e0; color: #f57c00; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîç Complete System Validation</h1>
            <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ FlashPost —Å–∏—Å—Ç–µ–º—ã</p>
        </div>

        <div class="test-grid">
            <div class="test-section">
                <h3>üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞</h3>
                <button class="btn" onclick="testModuleLoading()">–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π</button>
                <button class="btn" onclick="testDependencies()">–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏</button>
                <button class="btn" onclick="testExports()">–≠–∫—Å–ø–æ—Ä—Ç—ã</button>
            </div>

            <div class="test-section">
                <h3>ü§ñ AI System</h3>
                <button class="btn" onclick="testAIManager()">AIManager</button>
                <button class="btn" onclick="testProMode()">PRO MODE</button>
                <button class="btn" onclick="testFallbacks()">Fallback —Å–∏—Å—Ç–µ–º–∞</button>
            </div>

            <div class="test-section">
                <h3>üöÄ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ</h3>
                <button class="btn" onclick="testAppInit()">–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è</button>
                <button class="btn" onclick="testUIElements()">UI —ç–ª–µ–º–µ–Ω—Ç—ã</button>
                <button class="btn" onclick="testEventHandlers()">–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏</button>
            </div>

            <div class="test-section">
                <h3>üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å</h3>
                <button class="btn" onclick="testGeneration()">–ì–µ–Ω–µ—Ä–∞—Ü–∏—è</button>
                <button class="btn" onclick="testTemplates()">–®–∞–±–ª–æ–Ω—ã</button>
                <button class="btn" onclick="testExport()">–≠–∫—Å–ø–æ—Ä—Ç</button>
            </div>
        </div>

        <div class="test-section">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            <button class="btn btn-success" onclick="runAllTests()">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn btn-warning" onclick="runCriticalTests()">‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn btn-danger" onclick="clearResults()">üßπ –û—á–∏—Å—Ç–∏—Ç—å</button>
            <div id="results" class="results"></div>
        </div>
    </div>
    <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –≤—Å–µ –º–æ–¥—É–ª–∏ -->
    <script src="src/state.js"></script>
    <script src="src/renderer.js"></script>
    <script src="src/editor.js"></script>
    <script src="src/drag.js"></script>
    <script src="src/export.js"></script>
    <script src="src/ai.js"></script>
    <script src="src/template-manager.js"></script>
    <script src="src/app.js"></script>

    <script>
        let testResults = {
            total: 0,
            passed: 0,
            failed: 0,
            warnings: 0
        };

        // –¢–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π
        function testModuleLoading() {
            log('info', 'üì¶ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π...');
            
            const modules = [
                { name: 'StateManager', class: window.StateManager },
                { name: 'Renderer', class: window.Renderer },
                { name: 'Editor', class: window.Editor },
                { name: 'DragManager', class: window.DragManager },
                { name: 'ExportManager', class: window.ExportManager },
                { name: 'AIManager', class: window.AIManager },
                { name: 'TemplateManager', class: window.TemplateManager },
                { name: 'FlashPostApp', class: window.FlashPostApp }
            ];

            let passed = 0;
            modules.forEach(module => {
                testResults.total++;
                if (typeof module.class === 'function') {
                    log('success', `‚úÖ ${module.name} –∑–∞–≥—Ä—É–∂–µ–Ω`);
                    testResults.passed++;
                    passed++;
                } else {
                    log('error', `‚ùå ${module.name} –ù–ï –ó–ê–ì–†–£–ñ–ï–ù`);
                    testResults.failed++;
                }
            });

            log('info', `üìä –ú–æ–¥—É–ª–∏: ${passed}/${modules.length} –∑–∞–≥—Ä—É–∂–µ–Ω—ã`);
        }

        // –¢–µ—Å—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        function testDependencies() {
            log('info', 'üîó –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π...');
            
            try {
                const state = new StateManager();
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ StateManager —Å–æ–∑–¥–∞–µ—Ç—Å—è –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π');

                const renderer = new Renderer(state);
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ Renderer –ø—Ä–∏–Ω–∏–º–∞–µ—Ç StateManager');

                const aiManager = new AIManager(state);
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ AIManager –ø—Ä–∏–Ω–∏–º–∞–µ—Ç StateManager');

            } catch (error) {
                testResults.total += 3;
                testResults.failed += 3;
                log('error', `‚ùå –û—à–∏–±–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç —ç–∫—Å–ø–æ—Ä—Ç–æ–≤
        function testExports() {
            log('info', 'üì§ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–æ–≤...');
            
            const exports = [
                'StateManager',
                'Renderer', 
                'Editor',
                'DragManager',
                'ExportManager',
                'AIManager',
                'TemplateManager',
                'FlashPostApp'
            ];

            exports.forEach(exportName => {
                testResults.total++;
                if (window[exportName]) {
                    log('success', `‚úÖ ${exportName} —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω –≤ window`);
                    testResults.passed++;
                } else {
                    log('error', `‚ùå ${exportName} –Ω–µ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω`);
                    testResults.failed++;
                }
            });
        }

        // –¢–µ—Å—Ç AIManager
        function testAIManager() {
            log('info', 'ü§ñ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AIManager...');
            
            try {
                const state = new StateManager();
                const aiManager = new AIManager(state);
                
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ AIManager —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã
                const methods = [
                    'isAvailable',
                    'generateHighQualityCarousel',
                    'generateProModeCarousel',
                    'generateCarouselOutline',
                    'generateCarouselContent'
                ];

                methods.forEach(method => {
                    testResults.total++;
                    if (typeof aiManager[method] === 'function') {
                        log('success', `‚úÖ –ú–µ—Ç–æ–¥ ${method} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('error', `‚ùå –ú–µ—Ç–æ–¥ ${method} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.failed++;
                    }
                });

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å
                testResults.total++;
                const available = aiManager.isAvailable();
                log('info', `‚ÑπÔ∏è AI –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å: ${available}`);
                testResults.passed++;

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ AIManager: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç PRO MODE
        async function testProMode() {
            log('info', 'üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ PRO MODE...');
            
            try {
                const state = new StateManager();
                const aiManager = new AIManager(state);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã PRO MODE
                const proMethods = [
                    'generateProModeCarousel',
                    'generateCarouselOutline', 
                    'generateCarouselContent',
                    'convertToProModeSlides',
                    'parseOutlineResponse',
                    'parseContentResponse',
                    'validateOutlineQuality',
                    'validateContentQuality'
                ];

                proMethods.forEach(method => {
                    testResults.total++;
                    if (typeof aiManager[method] === 'function') {
                        log('success', `‚úÖ PRO MODE –º–µ—Ç–æ–¥ ${method} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('error', `‚ùå PRO MODE –º–µ—Ç–æ–¥ ${method} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.failed++;
                    }
                });

                log('info', 'üìä PRO MODE –º–µ—Ç–æ–¥—ã –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã');

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ PRO MODE: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç fallback —Å–∏—Å—Ç–µ–º—ã
        function testFallbacks() {
            log('info', 'üõ°Ô∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ fallback —Å–∏—Å—Ç–µ–º—ã...');
            
            try {
                const state = new StateManager();
                const aiManager = new AIManager(state);
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º fallback –º–µ—Ç–æ–¥—ã
                const fallbackMethods = [
                    'generateFallbackOutline',
                    'generateFallbackContent',
                    'generateHighQualityCarouselLegacy'
                ];

                fallbackMethods.forEach(method => {
                    testResults.total++;
                    if (typeof aiManager[method] === 'function') {
                        log('success', `‚úÖ Fallback –º–µ—Ç–æ–¥ ${method} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('warning', `‚ö†Ô∏è Fallback –º–µ—Ç–æ–¥ ${method} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.warnings++;
                    }
                });

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ fallback —Å–∏—Å—Ç–µ–º—ã: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
        function testAppInit() {
            log('info', 'üöÄ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è...');
            
            try {
                const app = new FlashPostApp();
                
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ FlashPostApp —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
                const components = ['state', 'renderer', 'editor', 'aiManager', 'templateManager'];
                components.forEach(component => {
                    testResults.total++;
                    if (app[component]) {
                        log('success', `‚úÖ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ${component} –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω`);
                        testResults.passed++;
                    } else {
                        log('error', `‚ùå –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ${component} –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω`);
                        testResults.failed++;
                    }
                });

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        function testUIElements() {
            log('info', 'üé® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ UI —ç–ª–µ–º–µ–Ω—Ç–æ–≤...');
            
            // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è —Ç–µ—Å—Ç–∞
            const elements = [
                { id: 'app', tag: 'div' },
                { id: 'topicInput', tag: 'input' },
                { id: 'generateBtn', tag: 'button' }
            ];

            elements.forEach(element => {
                testResults.total++;
                let el = document.getElementById(element.id);
                if (!el) {
                    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç
                    el = document.createElement(element.tag);
                    el.id = element.id;
                    document.body.appendChild(el);
                    log('warning', `‚ö†Ô∏è –≠–ª–µ–º–µ–Ω—Ç ${element.id} —Å–æ–∑–¥–∞–Ω –≤—Ä–µ–º–µ–Ω–Ω–æ`);
                    testResults.warnings++;
                } else {
                    log('success', `‚úÖ –≠–ª–µ–º–µ–Ω—Ç ${element.id} –Ω–∞–π–¥–µ–Ω`);
                    testResults.passed++;
                }
            });
        }

        // –¢–µ—Å—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π
        function testEventHandlers() {
            log('info', '‚ö° –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ —Å–æ–±—ã—Ç–∏–π...');
            
            try {
                const app = new FlashPostApp();
                
                const handlers = ['handleAIGenerate', 'handleGenerate', 'handleManualGenerate'];
                handlers.forEach(handler => {
                    testResults.total++;
                    if (typeof app[handler] === 'function') {
                        log('success', `‚úÖ –û–±—Ä–∞–±–æ—Ç—á–∏–∫ ${handler} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('error', `‚ùå –û–±—Ä–∞–±–æ—Ç—á–∏–∫ ${handler} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.failed++;
                    }
                });

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
        async function testGeneration() {
            log('info', 'üéØ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...');
            
            try {
                const state = new StateManager();
                const aiManager = new AIManager(state);
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º fallback –≥–µ–Ω–µ—Ä–∞—Ü–∏—é (–±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–≥–æ AI)
                testResults.total++;
                const fallbackOutline = aiManager.generateFallbackOutline('—Ç–µ—Å—Ç');
                if (fallbackOutline && fallbackOutline.outline) {
                    log('success', `‚úÖ Fallback outline: ${fallbackOutline.outline.length} —Å–ª–∞–π–¥–æ–≤`);
                    testResults.passed++;
                } else {
                    log('error', '‚ùå Fallback outline –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç');
                    testResults.failed++;
                }

                testResults.total++;
                const fallbackContent = aiManager.generateFallbackContent('—Ç–µ—Å—Ç', fallbackOutline);
                if (fallbackContent && fallbackContent.slides) {
                    log('success', `‚úÖ Fallback content: ${fallbackContent.slides.length} —Å–ª–∞–π–¥–æ–≤`);
                    testResults.passed++;
                } else {
                    log('error', '‚ùå Fallback content –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç');
                    testResults.failed++;
                }

            } catch (error) {
                testResults.total += 2;
                testResults.failed += 2;
                log('error', `‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç —à–∞–±–ª–æ–Ω–æ–≤
        function testTemplates() {
            log('info', 'üé® –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —à–∞–±–ª–æ–Ω–æ–≤...');
            
            try {
                const state = new StateManager();
                const templateManager = new TemplateManager(state);
                
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ TemplateManager —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã —à–∞–±–ª–æ–Ω–æ–≤
                const templateMethods = ['saveTemplate', 'loadTemplate', 'getTemplates'];
                templateMethods.forEach(method => {
                    testResults.total++;
                    if (typeof templateManager[method] === 'function') {
                        log('success', `‚úÖ –ú–µ—Ç–æ–¥ —à–∞–±–ª–æ–Ω–æ–≤ ${method} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('warning', `‚ö†Ô∏è –ú–µ—Ç–æ–¥ —à–∞–±–ª–æ–Ω–æ–≤ ${method} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.warnings++;
                    }
                });

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ —à–∞–±–ª–æ–Ω–æ–≤: ${error.message}`);
            }
        }

        // –¢–µ—Å—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞
        function testExport() {
            log('info', 'üì§ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞...');
            
            try {
                const state = new StateManager();
                const exportManager = new ExportManager(state);
                
                testResults.total++;
                testResults.passed++;
                log('success', '‚úÖ ExportManager —Å–æ–∑–¥–∞–µ—Ç—Å—è —É—Å–ø–µ—à–Ω–æ');

                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–µ—Ç–æ–¥—ã —ç–∫—Å–ø–æ—Ä—Ç–∞
                const exportMethods = ['downloadCurrentSlide', 'downloadAllSlides'];
                exportMethods.forEach(method => {
                    testResults.total++;
                    if (typeof exportManager[method] === 'function') {
                        log('success', `‚úÖ –ú–µ—Ç–æ–¥ —ç–∫—Å–ø–æ—Ä—Ç–∞ ${method} –¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.passed++;
                    } else {
                        log('error', `‚ùå –ú–µ—Ç–æ–¥ —ç–∫—Å–ø–æ—Ä—Ç–∞ ${method} –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`);
                        testResults.failed++;
                    }
                });

            } catch (error) {
                testResults.total++;
                testResults.failed++;
                log('error', `‚ùå –û—à–∏–±–∫–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message}`);
            }
        }

        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        async function runAllTests() {
            log('info', 'üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã...');
            testResults = { total: 0, passed: 0, failed: 0, warnings: 0 };
            
            testModuleLoading();
            testDependencies();
            testExports();
            testAIManager();
            await testProMode();
            testFallbacks();
            testAppInit();
            testUIElements();
            testEventHandlers();
            await testGeneration();
            testTemplates();
            testExport();
            
            // –ò—Ç–æ–≥–æ–≤—ã–π –æ—Ç—á–µ—Ç
            log('info', 'üìä –ò–¢–û–ì–û–í–´–ô –û–¢–ß–ï–¢:');
            log('success', `‚úÖ –ü—Ä–æ–π–¥–µ–Ω–æ: ${testResults.passed}`);
            log('warning', `‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è: ${testResults.warnings}`);
            log('error', `‚ùå –û—à–∏–±–∫–∏: ${testResults.failed}`);
            log('info', `üìà –í—Å–µ–≥–æ —Ç–µ—Å—Ç–æ–≤: ${testResults.total}`);
            
            const successRate = ((testResults.passed / testResults.total) * 100).toFixed(1);
            log('info', `üéØ –£—Å–ø–µ—à–Ω–æ—Å—Ç—å: ${successRate}%`);
            
            if (testResults.failed === 0) {
                log('success', 'üéâ –í–°–ï –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –¢–ï–°–¢–´ –ü–†–û–ô–î–ï–ù–´!');
            } else {
                log('error', `üö® –ù–ê–ô–î–ï–ù–´ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï –û–®–ò–ë–ö–ò: ${testResults.failed}`);
            }
        }

        // –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
        async function runCriticalTests() {
            log('info', '‚ö° –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤...');
            testResults = { total: 0, passed: 0, failed: 0, warnings: 0 };
            
            testModuleLoading();
            testAIManager();
            await testProMode();
            testAppInit();
            
            const criticalPassed = testResults.passed;
            const criticalTotal = testResults.total;
            
            log('info', `‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã: ${criticalPassed}/${criticalTotal}`);
            
            if (testResults.failed === 0) {
                log('success', '‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã');
            } else {
                log('error', `‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏: ${testResults.failed}`);
            }
        }

        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function log(type, message) {
            const resultsDiv = document.getElementById('results');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            resultsDiv.appendChild(logEntry);
            resultsDiv.scrollTop = resultsDiv.scrollHeight;
        }

        // –û—á–∏—Å—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function clearResults() {
            document.getElementById('results').innerHTML = '';
            testResults = { total: 0, passed: 0, failed: 0, warnings: 0 };
            log('info', 'üßπ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ—á–∏—â–µ–Ω—ã');
        }

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', function() {
            log('info', 'üöÄ –°–∏—Å—Ç–µ–º–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–∞–≥—Ä—É–∂–µ–Ω–∞');
            log('info', '‚ÑπÔ∏è –í—ã–±–µ—Ä–∏—Ç–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∏–ª–∏ –Ω–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã"');
        });

        // –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
        window.addEventListener('error', function(event) {
            log('error', `‚ùå JavaScript –æ—à–∏–±–∫–∞: ${event.error.message}`);
        });

        window.addEventListener('unhandledrejection', function(event) {
            log('error', `‚ùå –ù–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–æ–º–∏—Å–∞: ${event.reason}`);
        });
    </script>
</body>
</html>