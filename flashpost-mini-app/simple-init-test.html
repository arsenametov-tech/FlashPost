<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üöÄ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .log { background: #1a1a1a; color: #fff; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 12px; }
        .success { color: #4CAF50; }
        .error { color: #f44336; }
        .warning { color: #ff9800; }
    </style>
</head>
<body>
    <h1>üöÄ –ü—Ä–æ—Å—Ç–æ–π —Ç–µ—Å—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ FlashPost</h1>
    <div id="log" class="log"></div>

    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const timestamp = new Date().toLocaleTimeString();
            const className = type === 'success' ? 'success' : type === 'error' ? 'error' : type === 'warning' ? 'warning' : '';
            
            logDiv.innerHTML += `<div class="${className}">[${timestamp}] ${message}</div>`;
            console.log(`${type.toUpperCase()}: ${message}`);
        }

        // –ü–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ–º –æ—à–∏–±–∫–∏
        window.addEventListener('error', (event) => {
            log(`–û–®–ò–ë–ö–ê: ${event.error?.message || event.message}`, 'error');
            log(`–§–∞–π–ª: ${event.filename}:${event.lineno}`, 'error');
        });

        // –ü—Ä–æ–≤–µ—Ä—è–µ–º –º–æ–¥—É–ª–∏ –ø–æ—Å–ª–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–∞–∂–¥–æ–≥–æ
        function checkModuleAfterLoad(moduleName) {
            if (typeof window[moduleName] !== 'undefined') {
                log(`‚úÖ ${moduleName} –∑–∞–≥—Ä—É–∂–µ–Ω —É—Å–ø–µ—à–Ω–æ`, 'success');
            } else {
                log(`‚ùå ${moduleName} –ù–ï –∑–∞–≥—Ä—É–∂–µ–Ω`, 'error');
            }
        }

        // –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
        function finalCheck() {
            log('=== –§–ò–ù–ê–õ–¨–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê ===', 'info');
            
            const modules = ['StateManager', 'Renderer', 'Editor', 'DragManager', 'ExportManager', 'AIManager', 'TemplateManager'];
            let allLoaded = true;
            
            modules.forEach(module => {
                if (typeof window[module] !== 'undefined') {
                    log(`‚úÖ ${module} –¥–æ—Å—Ç—É–ø–µ–Ω`, 'success');
                } else {
                    log(`‚ùå ${module} –ù–ï –¥–æ—Å—Ç—É–ø–µ–Ω`, 'error');
                    allLoaded = false;
                }
            });
            
            if (allLoaded) {
                log('üéâ –í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã! –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ...', 'success');
                
                try {
                    window.flashPostApp = new FlashPostApp();
                    log('‚úÖ FlashPostApp —Å–æ–∑–¥–∞–Ω —É—Å–ø–µ—à–Ω–æ!', 'success');
                    log(`–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –∫–∞–∫ window.flashPostApp: ${typeof window.flashPostApp}`, 'success');
                } catch (error) {
                    log(`‚ùå –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è FlashPostApp: ${error.message}`, 'error');
                    log(`Stack: ${error.stack}`, 'error');
                }
            } else {
                log('‚ùå –ù–µ –≤—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ —Å–æ–∑–¥–∞–Ω–æ.', 'error');
            }
        }

        log('üöÄ –ù–∞—á–∏–Ω–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É –º–æ–¥—É–ª–µ–π...', 'info');
    </script>

    <script src="src/state.js" onload="checkModuleAfterLoad('StateManager')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ state.js', 'error')"></script>
    <script src="src/renderer.js" onload="checkModuleAfterLoad('Renderer')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ renderer.js', 'error')"></script>
    <script src="src/editor.js" onload="checkModuleAfterLoad('Editor')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ editor.js', 'error')"></script>
    <script src="src/drag.js" onload="checkModuleAfterLoad('DragManager')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ drag.js', 'error')"></script>
    <script src="src/export.js" onload="checkModuleAfterLoad('ExportManager')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ export.js', 'error')"></script>
    <script src="src/ai.js" onload="checkModuleAfterLoad('AIManager')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ ai.js', 'error')"></script>
    <script src="src/templates.js" onload="checkModuleAfterLoad('TemplateManager')" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ templates.js', 'error')"></script>
    <script src="src/app.js" onload="checkModuleAfterLoad('FlashPostApp'); setTimeout(finalCheck, 100);" onerror="log('‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ app.js', 'error')"></script>
</body>
</html>