# üéØ –°–ò–°–¢–ï–ú–ê –†–ï–ñ–ò–ú–û–í - –ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

## üìã –û–±–∑–æ—Ä

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∂–∏–º–æ–≤ —Ä–∞–∑–¥–µ–ª—è–µ—Ç –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ —á–µ—Ç—ã—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å —Ä–∞–∑–ª–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–æ–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

- **START** - –°—Ç–∞—Ä—Ç–æ–≤—ã–π —ç–∫—Ä–∞–Ω —Å —Ñ–æ—Ä–º–æ–π —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—É—Å–µ–ª–∏
- **PREVIEW** - –ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ä—É—Å–µ–ª–∏ —Å–æ —Å—Ç–∞—Ç–∏—á–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **EDIT** - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é
- **EXPORT** - –≠–∫—Å–ø–æ—Ä—Ç —Å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏—è

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```javascript
// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∂–∏–º–∞ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ
this.mode = "start"; // "start" | "preview" | "edit" | "export"

// –ú–µ—Ç–æ–¥—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞–º–∏
setMode(newMode)           // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∂–∏–º–∞ —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π
getMode()                  // –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞
isMode(mode)              // –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–∞
updateModeUI()            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –¥–ª—è —Ä–µ–∂–∏–º–∞
```

### –ú–µ—Ç–æ–¥—ã –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏

```javascript
enterStartMode()          // ‚Üí "start"
enterPreviewMode()        // ‚Üí "preview" 
enterEditMode()           // ‚Üí "edit"
enterExportMode()         // ‚Üí "export"
```

## üé® –†–µ–∂–∏–º—ã –∏ –∏—Ö –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### 1. START MODE
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—É—Å–µ–ª–∏
**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ü–æ–ª–Ω–∞—è (—Ñ–æ—Ä–º—ã, –∫–Ω–æ–ø–∫–∏)
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: 
- –§–æ—Ä–º–∞ –≤–≤–æ–¥–∞ —Ç–µ–º—ã
- –ë—ã—Å—Ç—Ä—ã–µ –∏–¥–µ–∏
- –ö–Ω–æ–ø–∫–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

```javascript
enterStartMode() {
    this.setMode("start");
    this.showApp();
}
```

### 2. PREVIEW MODE  
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –ü—Ä–æ—Å–º–æ—Ç—Ä –≥–æ—Ç–æ–≤–æ–π –∫–∞—Ä—É—Å–µ–ª–∏
**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –¢–æ–ª—å–∫–æ –Ω–∞–≤–∏–≥–∞—Ü–∏—è
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –°—Ç–∞—Ç–∏—á–Ω—ã–µ —Å–ª–∞–π–¥—ã –±–µ–∑ drag/resize

```javascript
enterPreviewMode() {
    this.setMode("preview");
    this.showCarousel();
}
```

**–ö–ª—é—á–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è**:
- ‚ùå –ù–µ—Ç drag & drop —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
- ‚ùå –ù–µ—Ç resize handles
- ‚ùå –ù–µ—Ç inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- ‚úÖ –¢–æ–ª—å–∫–æ –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ª–∞–π–¥–∞–º

### 3. EDIT MODE
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–∞–π–¥–æ–≤
**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –ü–æ–ª–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä —Å drag/resize

```javascript
enterEditMode() {
    this.setMode("edit");
    this.openEditor();
}
```

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**:
- ‚úÖ Drag & drop —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –±–ª–æ–∫–æ–≤
- ‚úÖ Resize handles
- ‚úÖ Inline-—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫)
- ‚úÖ –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
- ‚úÖ –í—ã–±–æ—Ä –±–ª–æ–∫–æ–≤

### 4. EXPORT MODE
**–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ**: –≠–∫—Å–ø–æ—Ä—Ç –∏ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
**–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –¢–æ–ª—å–∫–æ –∫–Ω–æ–ø–∫–∏ —ç–∫—Å–ø–æ—Ä—Ç–∞
**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**: –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —ç–∫—Å–ø–æ—Ä—Ç–∞

```javascript
enterExportMode() {
    this.setMode("export");
    this.showExportInterface();
}
```

## üîÑ –õ–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
```javascript
// –ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ä—É—Å–µ–ª–∏
handleGenerate() ‚Üí enterPreviewMode()

// –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ  
saveAndExitEditor() ‚Üí enterPreviewMode()

// –ü—Ä–∏ –≤—ã—Ö–æ–¥–µ –∏–∑ —Ä–µ–¥–∞–∫—Ç–æ—Ä–∞
exitEditor() ‚Üí enterPreviewMode()
```

### –†—É—á–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
```javascript
// –ö–Ω–æ–ø–∫–∏ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ
"‚Üê –ù–æ–≤–∞—è –∫–∞—Ä—É—Å–µ–ª—å" ‚Üí enterStartMode()
"‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å" ‚Üí enterEditMode()  
"üì• –≠–∫—Å–ø–æ—Ä—Ç" ‚Üí enterExportMode()
"‚Üê –ù–∞–∑–∞–¥" ‚Üí enterPreviewMode()
```

## üéõÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å—é

### updatePreview() —Å —É—á–µ—Ç–æ–º —Ä–µ–∂–∏–º–∞

```javascript
updatePreview() {
    // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ä–µ–∂–∏–º –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
    const isInteractiveMode = this.isMode("edit");
    const isStaticMode = this.isMode("preview") || this.isMode("export");
    
    // –ü—Ä–∏–º–µ–Ω—è–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Å—Ç–∏–ª–∏ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    if (isInteractiveMode) {
        // –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å
        blockElement.style.cursor = 'grab';
        this.initTextBlockDragging(blockElement, block.id);
        this.initTextBlockResizing(blockElement, block.id);
    } else {
        // –°—Ç–∞—Ç–∏—á–Ω—ã–π —Ä–µ–∂–∏–º
        blockElement.style.cursor = 'default';
        // –ù–∏–∫–∞–∫–∏—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ drag/resize
    }
}
```

### CSS –∫–ª–∞—Å—Å—ã –¥–ª—è —Ä–µ–∂–∏–º–æ–≤

```css
/* Preview Mode - —Å—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã */
.mode-preview .preview-text-block {
    cursor: default !important;
    pointer-events: none;
}

.mode-preview .text-block-resize-handle {
    display: none !important;
}

/* Edit Mode - –ø–æ–ª–Ω–∞—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å */
.mode-edit .preview-text-block {
    cursor: grab;
    pointer-events: auto;
}

.mode-edit .preview-text-block:hover {
    outline: 2px dashed rgba(131, 58, 180, 0.5);
}
```

## üîß Telegram WebApp –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ö–Ω–æ–ø–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞

```javascript
updateTelegramButtons() {
    switch (this.mode) {
        case "start":
            this.tg.MainButton.setText('–°–æ–∑–¥–∞—Ç—å –∫–∞—Ä—É—Å–µ–ª—å');
            this.tg.MainButton.onClick(() => this.handleGenerate());
            break;
            
        case "preview":
            this.tg.MainButton.setText('–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å');
            this.tg.MainButton.onClick(() => this.enterEditMode());
            break;
            
        case "edit":
            this.tg.MainButton.setText('–°–æ—Ö—Ä–∞–Ω–∏—Ç—å');
            this.tg.MainButton.onClick(() => this.saveAndExitEditor());
            break;
            
        case "export":
            this.tg.MainButton.setText('–°–∫–∞—á–∞—Ç—å');
            this.tg.MainButton.onClick(() => this.downloadAllSlides());
            break;
    }
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª
`test-mode-system.html` - –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö —Ä–µ–∂–∏–º–æ–≤

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏**:
- üéÆ –ö–Ω–æ–ø–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
- üìä –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä —Ç–µ–∫—É—â–µ–≥–æ —Ä–µ–∂–∏–º–∞  
- üîç –û—Ç–ª–∞–¥–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- ‚ö° –†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∂–∏–º–æ–≤

1. **START** ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ä—É—Å–µ–ª–∏
2. **PREVIEW** ‚Üí –ù–∞–≤–∏–≥–∞—Ü–∏—è –±–µ–∑ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
3. **EDIT** ‚Üí –ü–æ–ª–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **EXPORT** ‚Üí –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å —ç–∫—Å–ø–æ—Ä—Ç–∞

## ‚úÖ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ —Å–∏—Å—Ç–µ–º—ã

### üéØ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- –ö–∞–∂–¥—ã–π —Ä–µ–∂–∏–º –∏–º–µ–µ—Ç —Å–≤–æ—é –ª–æ–≥–∏–∫—É
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏
- –õ–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ä–µ–∂–∏–º—ã

### üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –°—Ç–∞—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ preview/export
- –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –Ω—É–∂–Ω–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥

### üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö

### üé® UX/UI
- –ò–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∫–Ω–æ–ø–∫–∏ Telegram
- –í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å

## üîÆ –†–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ä–µ–∂–∏–º–∞

```javascript
// 1. –î–æ–±–∞–≤–∏—Ç—å –≤ –≤–∞–ª–∏–¥–∞—Ü–∏—é
const validModes = ["start", "preview", "edit", "export", "newMode"];

// 2. –°–æ–∑–¥–∞—Ç—å –º–µ—Ç–æ–¥ –ø–µ—Ä–µ—Ö–æ–¥–∞
enterNewMode() {
    this.setMode("newMode");
    this.showNewModeInterface();
}

// 3. –î–æ–±–∞–≤–∏—Ç—å —Ä–µ–Ω–¥–µ—Ä –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
showNewModeInterface() {
    // –õ–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è
}

// 4. –û–±–Ω–æ–≤–∏—Ç—å CSS –∏ –∫–Ω–æ–ø–∫–∏
updateTelegramButtons() {
    // –î–æ–±–∞–≤–∏—Ç—å case "newMode"
}
```

## üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- ‚úÖ **4 —Ä–µ–∂–∏–º–∞** –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
- ‚úÖ **12 –º–µ—Ç–æ–¥–æ–≤** —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ–∂–∏–º–∞–º–∏
- ‚úÖ **–í–∞–ª–∏–¥–∞—Ü–∏—è** –ø–µ—Ä–µ—Ö–æ–¥–æ–≤
- ‚úÖ **CSS —Å—Ç–∏–ª–∏** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–µ–∂–∏–º–∞
- ‚úÖ **Telegram –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- ‚úÖ **–¢–µ—Å—Ç–æ–≤—ã–π —Ñ–∞–π–ª** –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

**–°–∏—Å—Ç–µ–º–∞ —Ä–µ–∂–∏–º–æ–≤ –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üöÄ