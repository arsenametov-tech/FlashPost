<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FlashPost - –¢–µ—Å—Ç —É–ª—É—á—à–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            background: linear-gradient(135deg, #0f0f14 0%, #1a1a2e 50%, #16213e 100%);
            font-family: 'Inter', sans-serif;
            color: white;
            padding: 20px;
            min-height: 100vh;
        }
        
        .test-container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        .test-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .test-section h2 {
            margin-bottom: 15px;
            color: #667eea;
        }
        
        .test-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: none;
            border-radius: 10px;
            padding: 12px 20px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }
        
        .test-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 10px;
            color: white;
            margin: 10px 0;
        }
        
        .test-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .test-results {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 14px;
            max-height: 200px;
            overflow-y: auto;
        }
        
        .status-indicator {
            display: inline-block;
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-success { background: #4CAF50; }
        .status-warning { background: #FF9800; }
        .status-error { background: #F44336; }
        
        .performance-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .stat-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 24px;
            font-weight: bold;
            color: #667eea;
        }
        
        .stat-label {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>üöÄ FlashPost - –¢–µ—Å—Ç —É–ª—É—á—à–µ–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π</h1>
        
        <!-- –¢–µ—Å—Ç AI —Å–∏—Å—Ç–µ–º—ã -->
        <div class="test-section">
            <h2>ü§ñ –£–ª—É—á—à–µ–Ω–Ω–∞—è AI —Å–∏—Å—Ç–µ–º–∞</h2>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å –ª–∏–º–∏—Ç–∞–º–∏ –∏ –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –∑–∞–≥—Ä—É–∑–∫–∏</p>
            
            <input type="text" class="test-input" id="ai-topic" placeholder="–í–≤–µ–¥–∏—Ç–µ —Ç–µ–º—É –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...">
            
            <div>
                <button class="test-button" onclick="testAIGeneration()">–¢–µ—Å—Ç AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏</button>
                <button class="test-button" onclick="testAILimits()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã AI</button>
                <button class="test-button" onclick="testLoadingIndicator()">–¢–µ—Å—Ç –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –∑–∞–≥—Ä—É–∑–∫–∏</button>
            </div>
            
            <div class="test-results" id="ai-results">
                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã AI —Ç–µ—Å—Ç–æ–≤ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...
            </div>
        </div>
        
        <!-- –¢–µ—Å—Ç —Å–∏—Å—Ç–µ–º—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ -->
        <div class="test-section">
            <h2>üì§ –£–ª—É—á—à–µ–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞</h2>
            <p>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö –∏ –∫–∞—á–µ—Å—Ç–≤–µ</p>
            
            <div>
                <select class="test-input" id="export-format" style="width: auto; margin-right: 10px;">
                    <option value="PNG">PNG</option>
                    <option value="JPEG">JPEG</option>
                    <option value="PDF">PDF (PRO)</option>
                </select>
                
                <select class="test-input" id="export-quality" style="width: auto;">
                    <option value="720p">720p (FREE)</option>
                    <option value="1080p">1080p (PRO)</option>
                    <option value="4K">4K (PRO)</option>
                </select>
            </div>
            
            <div>
                <button class="test-button" onclick="testExportLimits()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–∏–º–∏—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞</button>
                <button class="test-button" onclick="testExportProgress()">–¢–µ—Å—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞</button>
                <button class="test-button" onclick="testUpgradeModal()">–ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª –∞–ø–≥—Ä–µ–π–¥–∞</button>
            </div>
            
            <div class="test-results" id="export-results">
                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...
            </div>
        </div>
        
        <!-- –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ -->
        <div class="test-section">
            <h2>‚ö° –°–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</h2>
            <p>–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</p>
            
            <div>
                <button class="test-button" onclick="testDebouncing()">–¢–µ—Å—Ç debouncing</button>
                <button class="test-button" onclick="testDOMOptimization()">–¢–µ—Å—Ç DOM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏</button>
                <button class="test-button" onclick="testAPISupport()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É API</button>
                <button class="test-button" onclick="testMemoryUsage()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–∞–º—è—Ç—å</button>
            </div>
            
            <div class="performance-stats">
                <div class="stat-card">
                    <div class="stat-value" id="memory-usage">-</div>
                    <div class="stat-label">–ü–∞–º—è—Ç—å (MB)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="fps-counter">-</div>
                    <div class="stat-label">FPS</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="api-support">-</div>
                    <div class="stat-label">API –ø–æ–¥–¥–µ—Ä–∂–∫–∞</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="debounce-count">0</div>
                    <div class="stat-label">Debounce –≤—ã–∑–æ–≤—ã</div>
                </div>
            </div>
            
            <div class="test-results" id="performance-results">
                –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ—è–≤—è—Ç—Å—è –∑–¥–µ—Å—å...
            </div>
        </div>
        
        <!-- –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å -->
        <div class="test-section">
            <h2>üìä –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã</h2>
            <div id="system-status">
                <div><span class="status-indicator status-warning"></span>–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π...</div>
            </div>
        </div>
    </div>

    <!-- –ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π FlashPost -->
    <script src="src/dom-update-queue.js"></script>
    <script src="src/event-manager.js"></script>
    <script src="src/state.js"></script>
    <script src="src/renderer.js"></script>
    <script src="src/editor.js"></script>
    <script src="src/drag.js"></script>
    <script src="src/export.js"></script>
    <script src="src/ai.js"></script>
    <script src="src/template-manager.js"></script>
    <script src="src/performance-manager.js"></script>

    <script>
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        let testApp = null;
        let debounceTestCount = 0;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                // –°–æ–∑–¥–∞–µ–º –º–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                console.log('üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è...');
                
                const state = new StateManager();
                console.log('‚úÖ StateManager —Å–æ–∑–¥–∞–Ω');
                
                const aiManager = new AIManager(state);
                console.log('‚úÖ AIManager —Å–æ–∑–¥–∞–Ω');
                
                const exportManager = new ExportManager(state);
                console.log('‚úÖ ExportManager —Å–æ–∑–¥–∞–Ω');
                
                const performanceManager = new PerformanceManager();
                console.log('‚úÖ PerformanceManager —Å–æ–∑–¥–∞–Ω');
                
                testApp = {
                    state,
                    aiManager,
                    exportManager,
                    performanceManager
                };
                
                updateSystemStatus('success', '–í—Å–µ –º–æ–¥—É–ª–∏ –∑–∞–≥—Ä—É–∂–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ');
                
                // –ó–∞–ø—É—Å–∫–∞–µ–º –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
                startPerformanceMonitoring();
                
            } catch (error) {
                console.error('‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤:', error);
                updateSystemStatus('error', '–û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –º–æ–¥—É–ª–µ–π: ' + error.message);
                
                // –°–æ–∑–¥–∞–µ–º –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
                testApp = {
                    state: null,
                    aiManager: null,
                    exportManager: null,
                    performanceManager: null
                };
            }
        });
        
        // ===== AI –¢–ï–°–¢–´ =====
        
        async function testAIGeneration() {
            const topic = document.getElementById('ai-topic').value || '–¢–µ—Å—Ç–æ–≤–∞—è —Ç–µ–º–∞';
            const results = document.getElementById('ai-results');
            
            results.innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏...';
            
            try {
                if (!testApp || !testApp.aiManager) {
                    throw new Error('AIManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                const startTime = performance.now();
                
                // –¢–µ—Å—Ç–∏—Ä—É–µ–º –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É AI
                const result = await testApp.aiManager.generateHighQualityCarousel(topic);
                
                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(2);
                
                results.innerHTML = `
                    ‚úÖ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —É—Å–ø–µ—à–Ω–∞<br>
                    üìä –í—Ä–µ–º—è: ${duration}ms<br>
                    üìù –°–ª–∞–π–¥–æ–≤: ${result.slides ? result.slides.length : 'N/A'}<br>
                    üéØ –¢–µ–º–∞: ${topic}<br>
                    ü§ñ –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä: ${result.generatedBy || 'Unknown'}
                `;
                
            } catch (error) {
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ AI –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏: ${error.message}`;
            }
        }
        
        function testAILimits() {
            const results = document.getElementById('ai-results');
            
            try {
                if (!testApp || !testApp.aiManager) {
                    throw new Error('AIManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                const canUseAI = testApp.aiManager.checkAIUsageLimits();
                const userPlan = testApp.state ? testApp.state.getUserPlan() : 'FREE';
                
                // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—É—â–µ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ
                const today = new Date().toDateString();
                const usageKey = `ai_usage_${today}`;
                const todayUsage = parseInt(localStorage.getItem(usageKey) || '0');
                
                results.innerHTML = `
                    üìä –°—Ç–∞—Ç—É—Å –ª–∏–º–∏—Ç–æ–≤ AI:<br>
                    üë§ –ü–ª–∞–Ω: ${userPlan}<br>
                    üìà –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ —Å–µ–≥–æ–¥–Ω—è: ${todayUsage}/3<br>
                    ‚úÖ –ú–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: ${canUseAI ? '–î–∞' : '–ù–µ—Ç'}<br>
                    üìÖ –î–∞—Ç–∞: ${today}
                `;
                
            } catch (error) {
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤: ${error.message}`;
            }
        }
        
        function testLoadingIndicator() {
            try {
                if (!testApp || !testApp.aiManager) {
                    throw new Error('AIManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä
                testApp.aiManager.showLoadingIndicator('–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞...');
                
                // –°–∫—Ä—ã–≤–∞–µ–º —á–µ—Ä–µ–∑ 3 —Å–µ–∫—É–Ω–¥—ã
                setTimeout(() => {
                    testApp.aiManager.hideLoadingIndicator();
                    
                    const results = document.getElementById('ai-results');
                    results.innerHTML = '‚úÖ –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω';
                }, 3000);
                
            } catch (error) {
                const results = document.getElementById('ai-results');
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞: ${error.message}`;
            }
        }
        
        // ===== –≠–ö–°–ü–û–†–¢ –¢–ï–°–¢–´ =====
        
        function testExportLimits() {
            const format = document.getElementById('export-format').value;
            const quality = document.getElementById('export-quality').value;
            const results = document.getElementById('export-results');
            
            try {
                if (!testApp || !testApp.exportManager) {
                    throw new Error('ExportManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                const canExport = testApp.exportManager.checkExportLimits(format, quality);
                const userPlan = testApp.state ? testApp.state.getUserPlan() : 'FREE';
                
                results.innerHTML = `
                    üìä –°—Ç–∞—Ç—É—Å –ª–∏–º–∏—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞:<br>
                    üë§ –ü–ª–∞–Ω: ${userPlan}<br>
                    üìÑ –§–æ—Ä–º–∞—Ç: ${format}<br>
                    üéØ –ö–∞—á–µ—Å—Ç–≤–æ: ${quality}<br>
                    ‚úÖ –ú–æ–∂–Ω–æ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å: ${canExport ? '–î–∞' : '–ù–µ—Ç (–Ω—É–∂–µ–Ω PRO)'}
                `;
                
            } catch (error) {
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ª–∏–º–∏—Ç–æ–≤ —ç–∫—Å–ø–æ—Ä—Ç–∞: ${error.message}`;
            }
        }
        
        function testExportProgress() {
            const results = document.getElementById('export-results');
            
            try {
                if (!testApp || !testApp.exportManager) {
                    throw new Error('ExportManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                results.innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ —ç–∫—Å–ø–æ—Ä—Ç–∞...';
                
                // –°–∏–º—É–ª–∏—Ä—É–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å —ç–∫—Å–ø–æ—Ä—Ç–∞
                let progress = 0;
                const interval = setInterval(() => {
                    progress += 10;
                    testApp.exportManager.showExportProgress(progress);
                    
                    if (progress >= 100) {
                        clearInterval(interval);
                        setTimeout(() => {
                            testApp.exportManager.hideExportProgress();
                            results.innerHTML = '‚úÖ –ü—Ä–æ–≥—Ä–µ—Å—Å —ç–∫—Å–ø–æ—Ä—Ç–∞ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω';
                        }, 1000);
                    }
                }, 200);
                
            } catch (error) {
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞: ${error.message}`;
            }
        }
        
        function testUpgradeModal() {
            const results = document.getElementById('export-results');
            
            try {
                if (!testApp || !testApp.exportManager) {
                    throw new Error('ExportManager –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω');
                }
                
                testApp.exportManager.showUpgradeModal();
                results.innerHTML = '‚úÖ –ú–æ–¥–∞–ª –∞–ø–≥—Ä–µ–π–¥–∞ –ø–æ–∫–∞–∑–∞–Ω';
                
            } catch (error) {
                results.innerHTML = `‚ùå –û—à–∏–±–∫–∞ –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª–∞: ${error.message}`;
            }
        }
        
        // ===== –ü–†–û–ò–ó–í–û–î–ò–¢–ï–õ–¨–ù–û–°–¢–¨ –¢–ï–°–¢–´ =====
        
        function testDebouncing() {
            const results = document.getElementById('performance-results');
            debounceTestCount = 0;
            
            results.innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ debouncing...';
            
            // –ë—ã—Å—Ç—Ä–æ –≤—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –º–Ω–æ–≥–æ —Ä–∞–∑
            for (let i = 0; i < 10; i++) {
                testApp.performanceManager.debounce('test-key', () => {
                    debounceTestCount++;
                    document.getElementById('debounce-count').textContent = debounceTestCount;
                }, 500);
            }
            
            setTimeout(() => {
                results.innerHTML = `‚úÖ Debouncing –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –í—ã–∑–æ–≤–æ–≤: ${debounceTestCount} (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å 1)`;
            }, 600);
        }
        
        function testDOMOptimization() {
            const results = document.getElementById('performance-results');
            results.innerHTML = '–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ DOM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏...';
            
            // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
            const testElement = document.createElement('div');
            testElement.style.position = 'absolute';
            testElement.style.top = '-1000px';
            document.body.appendChild(testElement);
            
            const startTime = performance.now();
            
            // –¢–µ—Å—Ç–∏—Ä—É–µ–º –±–∞—Ç—á–∏–Ω–≥ DOM –æ–ø–µ—Ä–∞—Ü–∏–π
            testApp.performanceManager.batchDOMUpdates(() => {
                testApp.performanceManager.updateStylesOptimized(testElement, {
                    width: '100px',
                    height: '100px',
                    background: 'red'
                });
                
                testApp.performanceManager.updateClassesOptimized(testElement, ['test-class'], []);
            });
            
            setTimeout(() => {
                const endTime = performance.now();
                const duration = (endTime - startTime).toFixed(2);
                
                results.innerHTML = `‚úÖ DOM –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ –∑–∞ ${duration}ms`;
                
                // –û—á–∏—â–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç
                document.body.removeChild(testElement);
            }, 100);
        }
        
        function testAPISupport() {
            const results = document.getElementById('performance-results');
            
            const apis = [
                'requestAnimationFrame',
                'IntersectionObserver',
                'ResizeObserver',
                'localStorage',
                'canvas',
                'webgl'
            ];
            
            let supportedCount = 0;
            const supportResults = [];
            
            apis.forEach(api => {
                const supported = testApp.performanceManager.checkAPISupport(api);
                if (supported) supportedCount++;
                supportResults.push(`${api}: ${supported ? '‚úÖ' : '‚ùå'}`);
            });
            
            document.getElementById('api-support').textContent = `${supportedCount}/${apis.length}`;
            
            results.innerHTML = `
                üìä –ü–æ–¥–¥–µ—Ä–∂–∫–∞ API:<br>
                ${supportResults.join('<br>')}
            `;
        }
        
        function testMemoryUsage() {
            const results = document.getElementById('performance-results');
            
            if ('memory' in performance) {
                const memory = performance.memory;
                const usedMB = Math.round(memory.usedJSHeapSize / 1048576);
                const limitMB = Math.round(memory.jsHeapSizeLimit / 1048576);
                const usagePercent = (usedMB / limitMB) * 100;
                
                document.getElementById('memory-usage').textContent = usedMB;
                
                results.innerHTML = `
                    üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏:<br>
                    üíæ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: ${usedMB} MB<br>
                    üéØ –õ–∏–º–∏—Ç: ${limitMB} MB<br>
                    üìà –ü—Ä–æ—Ü–µ–Ω—Ç: ${usagePercent.toFixed(1)}%<br>
                    ${usagePercent > 80 ? '‚ö†Ô∏è –í—ã—Å–æ–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ!' : '‚úÖ –ù–æ—Ä–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ'}
                `;
            } else {
                results.innerHTML = '‚ùå API –ø–∞–º—è—Ç–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ –≤ —ç—Ç–æ–º –±—Ä–∞—É–∑–µ—Ä–µ';
            }
        }
        
        // ===== –ú–û–ù–ò–¢–û–†–ò–ù–ì =====
        
        function startPerformanceMonitoring() {
            // –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ FPS
            let frameCount = 0;
            let lastTime = performance.now();
            
            function measureFPS(currentTime) {
                frameCount++;
                
                if (currentTime - lastTime >= 1000) {
                    const fps = Math.round((frameCount * 1000) / (currentTime - lastTime));
                    document.getElementById('fps-counter').textContent = fps;
                    
                    frameCount = 0;
                    lastTime = currentTime;
                }
                
                requestAnimationFrame(measureFPS);
            }
            
            requestAnimationFrame(measureFPS);
            
            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
            setInterval(() => {
                if (testApp && testApp.performanceManager) {
                    testApp.performanceManager.checkMemoryUsage();
                }
            }, 5000);
        }
        
        function updateSystemStatus(status, message) {
            const statusEl = document.getElementById('system-status');
            const statusClass = `status-${status}`;
            
            statusEl.innerHTML = `
                <div><span class="status-indicator ${statusClass}"></span>${message}</div>
            `;
        }
    </script>
</body>
</html>