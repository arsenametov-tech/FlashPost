# FlashPost Telegram Mini App — UX Wireframe Specification

**ЭТАП 4 — UX WIREFRAME ONLY**

Дата: 30.01.2026  
Статус: Зафиксировано  
Цель: Документировать UX-логику и UI-структуру без изменения архитектуры

---

## 📱 ЭКРАННАЯ СТРУКТУРА ПРИЛОЖЕНИЯ

### Основной Layout (Telegram Mini App)
```
┌──────────────────────────────────┐
│ HEADER                           │
│  @nickname          ⚙️          │
├──────────────────────────────────┤
│ CANVAS AREA                      │
│  ┌──────────────────────────┐    │
│  │   SLIDE PREVIEW          │    │
│  │   280x200px              │    │
│  │   [Slide Content]        │    │
│  └──────────────────────────┘    │
│  ←  →  (Navigation)              │
│  👆 Листай → (Swipe hint)        │
├──────────────────────────────────┤
│ SLIDE TOOLBAR                    │
│ [BG] [TXT] [AI] [FX] [🧩]       │
├──────────────────────────────────┤
│ CONTEXT PANELS (динамические)    │
│ • BG Controls (при BG активном)  │
│ • TXT Controls (при TXT активном)│
│ • AI Controls (при AI активном)  │
├──────────────────────────────────┤
│ GLOBAL ACTIONS                   │
│ [+ Slide] [Apply All] [💾]      │
└──────────────────────────────────┘
```

### Размеры и Адаптивность
- **Контейнер**: max-width 400px, центрирован
- **Slide Preview**: 280x200px (фиксированный)
- **Высота**: 100vh (полный экран)
- **Мобильная адаптация**: border убирается на <400px

---

## 🎯 UX-ПОТОКИ И ЛОГИКА

### 1. РАБОТА СО СЛАЙДАМИ

#### Ограничения по количеству:
- **FREE**: 8-11 слайдов (базовый лимит)
- **PRO**: до 20 слайдов (расширенный лимит)

#### Навигация между слайдами:
```
Способы навигации:
├── Стрелки ← → (кнопки)
├── Свайпы (touch gestures)
├── Клавиши ← → (keyboard)
└── Индикатор: "N / Total 🌐🧩"
```

#### Добавление слайдов:
```
Кнопка [+ Slide]:
├── Создает новый слайд с ID = totalSlides + 1
├── Применяет глобальный фон (если активен)
├── Добавляет стандартные тексты
├── Переключает на новый слайд
└── Haptic feedback (success)
```

#### Структура данных слайда:
```javascript
{
  id: number,
  background: {
    type: 'gradient' | 'image' | 'color',
    value: string,
    opacity: number,
    isGlobal: boolean
  },
  texts: [
    {
      id: string,
      content: string,
      x: number, y: number,
      fontSize: number,
      fontWeight: string,
      color: string,
      textAlign: string,
      width: number,
      opacity: number
    }
  ],
  styles: {
    borderRadius: number,
    boxShadow: string,
    padding: number
  },
  effects: {
    animation: string | null,
    filter: string | null,
    transform: string | null
  },
  isTemplateApplied: boolean
}
```

### 2. ЗАГРУЗКА ФОНА

#### UX-логика фонов:
```
Режимы работы:
├── ЛОКАЛЬНЫЙ (галочка выключена)
│   ├── Фон применяется только к текущему слайду
│   ├── Каждый слайд может иметь свой фон
│   └── При заблокированном глобальном: предупреждение
│
└── ГЛОБАЛЬНЫЙ (галочка включена)
    ├── Фон применяется ко всем слайдам
    ├── Фон блокируется (🔒 Locked)
    └── Новые слайды получают глобальный фон
```

#### UI элементы фона:
```
BG Controls Panel:
├── Пресеты фонов (6 градиентов)
│   ├── Размер: 40x40px
│   ├── Активный: border + ✓
│   └── Hover: scale(1.1)
│
├── Чекбокс "Применить ко всем"
│   ├── Стиль: custom checkbox
│   └── Состояния: enabled/disabled
│
└── Статус индикатор
    ├── 🔒 Locked (заблокирован)
    ├── 🌐 Global (глобальный)
    └── "" (локальный)
```

#### Логика блокировки:
```
Разблокировка глобального фона:
├── Снятие галочки при isGlobalBackgroundLocked
├── Показ confirm("Разблокировать глобальный фон?")
├── При подтверждении:
│   ├── isGlobalBackgroundLocked = false
│   ├── globalBackground = null
│   └── Снятие isGlobal со всех слайдов
└── При отмене: возврат галочки
```

### 3. РУЧНОЙ ТЕКСТ

#### Возможности редактирования:
```
Текстовые блоки:
├── DRAG & DROP
│   ├── Перетаскивание по canvas
│   ├── Позиционирование x, y (%)
│   └── Визуальная обратная связь
│
├── ШИРИНА ТЕКСТА
│   ├── Контрол ширины (width %)
│   ├── Адаптивное изменение
│   └── Минимум/максимум границы
│
├── ЦВЕТ ТЕКСТА
│   ├── Color picker
│   ├── Предустановленные цвета
│   └── Прозрачность (opacity)
│
└── ШРИФТ
    ├── Размер (fontSize)
    ├── Вес (fontWeight)
    ├── Выравнивание (textAlign)
    └── Семейство шрифтов
```

#### TXT Controls Panel:
```
При активном TXT инструменте:
├── Список текстовых блоков
├── Кнопка [+ Добавить текст]
├── Настройки выбранного текста:
│   ├── Размер: slider (12-48px)
│   ├── Цвет: color picker
│   ├── Ширина: slider (20-100%)
│   └── Выравнивание: [L][C][R]
└── Кнопка [Удалить текст]
```

### 4. AI-ТЕКСТ

#### Многоабзацный контент:
```
AI генерация:
├── ВВОД ТЕМЫ
│   ├── Текстовое поле для темы
│   ├── Placeholder: "О чем создать пост?"
│   └── Кнопка [Генерировать]
│
├── ОБРАБОТКА
│   ├── Loading состояние
│   ├── Прогресс индикатор
│   └── Возможность отмены
│
├── РЕЗУЛЬТАТ
│   ├── Многоабзацный текст
│   ├── Автоматическое разбиение на блоки
│   ├── Размещение по слайдам
│   └── Кнопки [Принять] [Регенерировать]
│
└── ПОСТОБРАБОТКА
    ├── Извлечение ключевых слов
    ├── Применение подсветки
    └── Оптимизация размещения
```

#### AI Controls Panel:
```
При активном AI инструменте:
├── Поле ввода темы
├── Настройки генерации:
│   ├── Длина: [Короткий][Средний][Длинный]
│   ├── Стиль: [Деловой][Креативный][Продающий]
│   └── Язык: [RU][EN]
├── Кнопка [🤖 Генерировать]
└── История генераций (последние 3)
```

### 5. КЛЮЧЕВЫЕ СЛОВА + ПОДСВЕТКА

#### Система выделения:
```
Keyword Highlighting:
├── АВТОМАТИЧЕСКОЕ ИЗВЛЕЧЕНИЕ
│   ├── Анализ текста на русском/английском
│   ├── Фильтрация стоп-слов
│   ├── Весовые коэффициенты по типам слов
│   └── Топ 5-10 ключевых слов
│
├── ВИЗУАЛЬНАЯ ПОДСВЕТКА
│   ├── Glow эффект вокруг слов
│   ├── Цвет: accent color приложения
│   ├── Анимация: subtle pulse
│   └── Интенсивность по важности
│
├── РУЧНОЕ УПРАВЛЕНИЕ
│   ├── Включение/выключение подсветки
│   ├── Выбор конкретных слов
│   ├── Настройка интенсивности
│   └── Цветовые схемы
│
└── ИНТЕГРАЦИЯ С AI
    ├── Подсветка в AI-сгенерированном тексте
    ├── Приоритет важных терминов
    └── Адаптация под контекст
```

#### Keywords Controls:
```
Панель управления ключевыми словами:
├── Переключатель [Подсветка ON/OFF]
├── Список найденных слов с весами
├── Настройки эффекта:
│   ├── Интенсивность: slider
│   ├── Цвет: color picker
│   └── Анимация: [None][Pulse][Glow]
└── Кнопка [Обновить анализ]
```

### 6. ШАБЛОНЫ

#### Система шаблонов:
```
Template System:
├── КАТЕГОРИИ ШАБЛОНОВ
│   ├── Бизнес (деловые презентации)
│   ├── Креатив (яркие дизайны)
│   ├── Минимализм (чистые макеты)
│   ├── Социальные сети (Instagram, etc.)
│   └── Образование (инфографика)
│
├── СТРУКТУРА ШАБЛОНА
│   ├── background: настройки фона
│   ├── texts: предустановленные тексты
│   ├── styles: стили оформления
│   ├── effects: визуальные эффекты
│   └── metadata: название, категория, теги
│
├── ПРИМЕНЕНИЕ ШАБЛОНА
│   ├── Замена всех настроек слайда
│   ├── Сохранение пользовательского контента
│   ├── Установка флага isTemplateApplied
│   └── Возможность отмены (undo)
│
└── КАСТОМИЗАЦИЯ
    ├── Изменение цветовой схемы
    ├── Адаптация под контент
    ├── Сохранение как новый шаблон
    └── Экспорт/импорт шаблонов
```

#### Templates Controls Panel:
```
При активном 🧩 инструменте:
├── Категории шаблонов (табы)
├── Превью шаблонов (grid 2x3)
├── Поиск по названию/тегам
├── Кнопки для каждого шаблона:
│   ├── [Применить]
│   ├── [Превью]
│   └── [Избранное ⭐]
└── Управление:
    ├── [Создать шаблон]
    ├── [Импорт]
    └── [Мои шаблоны]
```

---

## 🎨 UI КОМПОНЕНТЫ И СОСТОЯНИЯ

### Toolbar Buttons
```css
.toolbar-btn {
  /* Базовое состояние */
  background: none;
  border: 1px solid #dee2e6;
  color: #495057;
  
  /* Активное состояние */
  &.active {
    background: var(--tg-theme-button-color);
    color: var(--tg-theme-button-text-color);
  }
  
  /* Hover состояние */
  &:hover {
    background: var(--tg-theme-button-color);
    color: var(--tg-theme-button-text-color);
  }
}
```

### Context Panels
```css
.context-panel {
  /* Показывается только при активном инструменте */
  display: none;
  background: #f8f9fa;
  border-top: 1px solid #e9ecef;
  padding: 16px;
  
  /* Анимация появления */
  &.active {
    display: block;
    animation: slideDown 0.3s ease;
  }
}
```

### Slide Indicator
```
Формат: "N / Total [Icons]"
Иконки:
├── 🧩 = шаблон применен
├── 🌐 = глобальный фон
├── 🔒 = заблокированный фон
└── ✨ = AI контент
```

---

## 🔄 СОСТОЯНИЯ ПРИЛОЖЕНИЯ

### Глобальные переменные состояния:
```javascript
// Навигация
currentSlide: number (1-based)
totalSlides: number (8-20)

// Инструменты
activeTool: 'bg' | 'txt' | 'ai' | 'fx' | 'templates'

// Фоны
globalBackground: BackgroundObject | null
isGlobalBackgroundLocked: boolean

// Режимы
isEditMode: boolean
isPreviewMode: boolean
```

### Переходы между состояниями:
```
Смена слайда:
├── updateSlideDisplay()
├── Сохранение текущих изменений
├── Загрузка данных нового слайда
├── Обновление UI индикаторов
└── Применение глобальных настроек

Смена инструмента:
├── Скрытие предыдущей панели
├── Показ новой панели управления
├── Обновление активных состояний
├── Haptic feedback
└── Логирование действия
```

---

## 📊 ОГРАНИЧЕНИЯ И ПРАВИЛА

### Технические ограничения:
- **Размер слайда**: фиксированный 280x200px
- **Количество текстов**: до 10 на слайд
- **Размер шрифта**: 12-48px
- **Ширина текста**: 20-100%
- **Длина контента**: до 500 символов на текстовый блок

### UX правила:
- **Одна панель**: только одна context panel активна
- **Автосохранение**: изменения сохраняются мгновенно
- **Feedback**: все действия сопровождаются обратной связью
- **Отмена**: критические действия требуют подтверждения
- **Производительность**: плавные анимации 60fps

### Telegram Mini App интеграция:
- **Тема**: автоматическое применение цветов Telegram
- **Haptic**: вибрация при взаимодействии
- **Expand**: автоматическое разворачивание
- **Back button**: обработка кнопки "Назад"

---

## 🚀 ГОТОВНОСТЬ К СЛЕДУЮЩЕМУ ЭТАПУ

### Зафиксированные элементы:
✅ Экранная структура и layout  
✅ UX-потоки для всех инструментов  
✅ Логика работы с фонами  
✅ Система управления текстом  
✅ AI-генерация и ключевые слова  
✅ Шаблоны и их применение  
✅ Состояния и переходы  

### Архитектура НЕ изменена:
✅ Bootstrap система сохранена  
✅ Render функции не тронуты  
✅ AI модули остались как есть  
✅ Существующий код не рефакторился  

### Документ готов для:
- Этапа 5: Реализация функционала
- Передачи другим разработчикам
- Использования как техническое задание
- Валидации с заказчиком

---

**Статус: ЗАВЕРШЕНО ✅**  
**Дата фиксации: 30.01.2026**  
**Следующий этап: Реализация функционала**