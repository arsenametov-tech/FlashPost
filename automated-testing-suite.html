<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ü§ñ FlashPost Ultimate - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f0f14 0%, #1a1a2e 50%, #16213e 100%);
            color: white;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .header {
            text-align: center;
            margin-bottom: 40px;
        }
        
        .title {
            font-size: 36px;
            font-weight: 800;
            background: linear-gradient(45deg, #f09433 0%, #e6683c 25%, #dc2743 50%, #cc2366 75%, #bc1888 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }
        
        .test-controls {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(135deg, #833ab4 0%, #fd1d1d 50%, #fcb045 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(131, 58, 180, 0.4);
        }
        
        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-section {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 4px;
            overflow: hidden;
            margin: 15px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #4CAF50, #45a049);
            border-radius: 4px;
            transition: width 0.3s ease;
            width: 0%;
        }
        
        .progress-text {
            text-align: center;
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .test-category {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-radius: 16px;
            padding: 25px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .category-title {
            font-size: 18px;
            font-weight: 700;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .test-item:last-child {
            border-bottom: none;
        }
        
        .test-name {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.9);
        }
        
        .test-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
        }
        
        .status-pending {
            background: rgba(255, 152, 0, 0.2);
            color: #ff9800;
            border: 1px solid #ff9800;
        }
        
        .status-running {
            background: rgba(33, 150, 243, 0.2);
            color: #2196F3;
            border: 1px solid #2196F3;
        }
        
        .status-pass {
            background: rgba(76, 175, 80, 0.2);
            color: #4CAF50;
            border: 1px solid #4CAF50;
        }
        
        .status-fail {
            background: rgba(244, 67, 54, 0.2);
            color: #f44336;
            border: 1px solid #f44336;
        }
        
        .status-skip {
            background: rgba(158, 158, 158, 0.2);
            color: #9e9e9e;
            border: 1px solid #9e9e9e;
        }
        
        .results-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 16px;
            padding: 25px;
            margin-top: 30px;
        }
        
        .results-summary {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .summary-item {
            text-align: center;
            padding: 15px;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.1);
        }
        
        .summary-value {
            font-size: 24px;
            font-weight: 700;
            margin-bottom: 5px;
        }
        
        .summary-label {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
        }
        
        .log-area {
            background: #000;
            color: #00ff00;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 11px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 15px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .error { color: #ff4444; }
        .warning { color: #ffaa00; }
        .success { color: #44ff44; }
        .info { color: #4488ff; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="title">ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ</h1>
            <p>–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö —Ñ—É–Ω–∫—Ü–∏–π FlashPost Ultimate</p>
        </div>
        
        <!-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–∞–º–∏ -->
        <div class="test-controls">
            <button class="btn" onclick="runAllTests()" id="runAllBtn">üöÄ –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn" onclick="runCriticalTests()" id="runCriticalBtn">‚ö° –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn" onclick="runRegressionTests()" id="runRegressionBtn">üîÑ –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã</button>
            <button class="btn" onclick="runPerformanceTests()" id="runPerfBtn">üìä –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏</button>
            <button class="btn" onclick="stopTests()" id="stopBtn" disabled>‚èπÔ∏è –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
        </div>
        
        <!-- –ü—Ä–æ–≥—Ä–µ—Å—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è -->
        <div class="progress-section">
            <div class="progress-text" id="progressText">–ì–æ—Ç–æ–≤ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é</div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
            <div style="display: flex; justify-content: space-between; font-size: 12px; color: rgba(255,255,255,0.6);">
                <span id="currentTest">-</span>
                <span id="testCounter">0/0</span>
            </div>
        </div>
        
        <!-- –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ—Å—Ç–æ–≤ -->
        <div class="test-grid">
            <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ -->
            <div class="test-category">
                <div class="category-title">
                    üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏
                </div>
                <div id="coreTests"></div>
            </div>
            
            <!-- AI —Å–∏—Å—Ç–µ–º–∞ -->
            <div class="test-category">
                <div class="category-title">
                    ü§ñ AI —Å–∏—Å—Ç–µ–º–∞
                </div>
                <div id="aiTests"></div>
            </div>
            
            <!-- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
            <div class="test-category">
                <div class="category-title">
                    üé® –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
                </div>
                <div id="uiTests"></div>
            </div>
            
            <!-- –≠–∫—Å–ø–æ—Ä—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ -->
            <div class="test-category">
                <div class="category-title">
                    üíæ –≠–∫—Å–ø–æ—Ä—Ç –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ
                </div>
                <div id="exportTests"></div>
            </div>
            
            <!-- –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å -->
            <div class="test-category">
                <div class="category-title">
                    üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
                </div>
                <div id="performanceTests"></div>
            </div>
            
            <!-- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å -->
            <div class="test-category">
                <div class="category-title">
                    üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
                </div>
                <div id="securityTests"></div>
            </div>
        </div>
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div class="results-section">
            <h3>üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è</h3>
            
            <div class="results-summary">
                <div class="summary-item">
                    <div class="summary-value success" id="passedCount">0</div>
                    <div class="summary-label">–ü—Ä–æ–π–¥–µ–Ω–æ</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value error" id="failedCount">0</div>
                    <div class="summary-label">–ü—Ä–æ–≤–∞–ª–µ–Ω–æ</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value warning" id="skippedCount">0</div>
                    <div class="summary-label">–ü—Ä–æ–ø—É—â–µ–Ω–æ</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value info" id="totalCount">0</div>
                    <div class="summary-label">–í—Å–µ–≥–æ</div>
                </div>
                <div class="summary-item">
                    <div class="summary-value" id="executionTime">0s</div>
                    <div class="summary-label">–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</div>
                </div>
            </div>
            
            <div class="log-area" id="testLog">
                –ñ—É—Ä–Ω–∞–ª —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è –∑–¥–µ—Å—å...
            </div>
        </div>
    </div>

    <script>
        // –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤
        const testSuites = {
            core: [
                { name: '–ó–∞–≥—Ä—É–∑–∫–∞ DOM', func: 'testDOMLoading', critical: true },
                { name: '–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è', func: 'testAppInitialization', critical: true },
                { name: '–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π', func: 'testEventHandling', critical: true },
                { name: '–ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ —Å–ª–∞–π–¥–∞–º', func: 'testSlideNavigation', critical: false },
                { name: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º', func: 'testStateManagement', critical: true }
            ],
            ai: [
                { name: 'AI Pipeline –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è', func: 'testAIPipelineInit', critical: true },
                { name: '–ì–µ–Ω–µ—Ä–∞—Ü–∏—è outline', func: 'testOutlineGeneration', critical: true },
                { name: '–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞', func: 'testContentGeneration', critical: true },
                { name: '–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∏–ª–µ–π', func: 'testStyleApplication', critical: false },
                { name: '–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ AI', func: 'testAIErrorHandling', critical: true }
            ],
            ui: [
                { name: '–û—Ç—Ä–∏—Å–æ–≤–∫–∞ —Å–ª–∞–π–¥–æ–≤', func: 'testSlideRendering', critical: true },
                { name: 'Drag & Drop', func: 'testDragDrop', critical: false },
                { name: '–°–∏—Å—Ç–µ–º–∞ —à—Ä–∏—Ñ—Ç–æ–≤', func: 'testFontSystem', critical: true },
                { name: '–í—ã–¥–µ–ª–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤', func: 'testKeywordHighlighting', critical: true },
                { name: '–ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å', func: 'testResponsiveness', critical: false }
            ],
            export: [
                { name: '–≠–∫—Å–ø–æ—Ä—Ç PNG', func: 'testPNGExport', critical: true },
                { name: '–≠–∫—Å–ø–æ—Ä—Ç JPEG', func: 'testJPEGExport', critical: true },
                { name: '–≠–∫—Å–ø–æ—Ä—Ç PDF', func: 'testPDFExport', critical: false },
                { name: '–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–æ–≤', func: 'testProjectSaving', critical: true },
                { name: '–ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–µ–∫—Ç–æ–≤', func: 'testProjectLoading', critical: true }
            ],
            performance: [
                { name: '–í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏', func: 'testLoadTime', critical: false },
                { name: '–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏', func: 'testMemoryUsage', critical: false },
                { name: 'FPS —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞', func: 'testRenderingFPS', critical: false },
                { name: '–û—Ç–∑—ã–≤—á–∏–≤–æ—Å—Ç—å UI', func: 'testUIResponsiveness', critical: false },
                { name: '–°—Ç—Ä–µ—Å—Å-—Ç–µ—Å—Ç', func: 'testStressLoad', critical: false }
            ],
            security: [
                { name: 'RegExp –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å', func: 'testRegexSecurity', critical: true },
                { name: 'XSS –∑–∞—â–∏—Ç–∞', func: 'testXSSProtection', critical: true },
                { name: '–í–∞–ª–∏–¥–∞—Ü–∏—è –≤–≤–æ–¥–∞', func: 'testInputValidation', critical: true },
                { name: '–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å localStorage', func: 'testLocalStorageSecurity', critical: false },
                { name: 'CSP —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ', func: 'testCSPCompliance', critical: false }
            ]
        };
        
        // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let currentTestRun = null;
        let testResults = {};
        let startTime = null;
        let isRunning = false;
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        window.onload = function() {
            initializeTestSuites();
            log('ü§ñ –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≥–æ—Ç–æ–≤–∞', 'info');
        };
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –Ω–∞–±–æ—Ä–æ–≤
        function initializeTestSuites() {
            Object.keys(testSuites).forEach(category => {
                const container = document.getElementById(category + 'Tests');
                testSuites[category].forEach(test => {
                    const testItem = document.createElement('div');
                    testItem.className = 'test-item';
                    testItem.innerHTML = `
                        <span class="test-name">${test.name}</span>
                        <span class="test-status status-pending" id="status-${test.func}">–û–ñ–ò–î–ê–ù–ò–ï</span>
                    `;
                    container.appendChild(testItem);
                });
            });
            
            updateTotalCount();
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤
        function updateTotalCount() {
            let total = 0;
            Object.values(testSuites).forEach(suite => {
                total += suite.length;
            });
            document.getElementById('totalCount').textContent = total;
        }
        
        // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        function log(message, type = 'info') {
            const timestamp = new Date().toLocaleTimeString();
            const logElement = document.getElementById('testLog');
            const colorClass = type;
            
            logElement.innerHTML += `<div class="${colorClass}">[${timestamp}] ${message}</div>`;
            logElement.scrollTop = logElement.scrollHeight;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞ —Ç–µ—Å—Ç–∞
        function updateTestStatus(testFunc, status, message = '') {
            const statusElement = document.getElementById(`status-${testFunc}`);
            if (statusElement) {
                statusElement.className = `test-status status-${status}`;
                statusElement.textContent = status.toUpperCase();
                
                if (message) {
                    statusElement.title = message;
                }
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
        function updateProgress(current, total, currentTestName) {
            const progress = (current / total) * 100;
            document.getElementById('progressFill').style.width = progress + '%';
            document.getElementById('progressText').textContent = `–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤: ${progress.toFixed(1)}%`;
            document.getElementById('currentTest').textContent = currentTestName || '-';
            document.getElementById('testCounter').textContent = `${current}/${total}`;
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
        function updateResults() {
            let passed = 0, failed = 0, skipped = 0;
            
            Object.values(testResults).forEach(result => {
                if (result.status === 'pass') passed++;
                else if (result.status === 'fail') failed++;
                else if (result.status === 'skip') skipped++;
            });
            
            document.getElementById('passedCount').textContent = passed;
            document.getElementById('failedCount').textContent = failed;
            document.getElementById('skippedCount').textContent = skipped;
            
            if (startTime) {
                const elapsed = ((Date.now() - startTime) / 1000).toFixed(1);
                document.getElementById('executionTime').textContent = elapsed + 's';
            }
        }
        
        // –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤
        async function runAllTests() {
            if (isRunning) return;
            
            isRunning = true;
            startTime = Date.now();
            testResults = {};
            
            setButtonsState(true);
            log('üöÄ –ó–∞–ø—É—Å–∫ –ø–æ–ª–Ω–æ–≥–æ –Ω–∞–±–æ—Ä–∞ —Ç–µ—Å—Ç–æ–≤...', 'info');
            
            let testCount = 0;
            let totalTests = 0;
            
            // –ü–æ–¥—Å—á–µ—Ç –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ç–µ—Å—Ç–æ–≤
            Object.values(testSuites).forEach(suite => {
                totalTests += suite.length;
            });
            
            // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤ –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
            for (const [category, tests] of Object.entries(testSuites)) {
                log(`üìÇ –ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${category.toUpperCase()}`, 'info');
                
                for (const test of tests) {
                    if (!isRunning) break;
                    
                    testCount++;
                    updateProgress(testCount, totalTests, test.name);
                    updateTestStatus(test.func, 'running');
                    
                    try {
                        await executeTest(test);
                        testResults[test.func] = { status: 'pass', message: '–¢–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω —É—Å–ø–µ—à–Ω–æ' };
                        updateTestStatus(test.func, 'pass');
                        log(`‚úÖ ${test.name}: –ü–†–û–ô–î–ï–ù`, 'success');
                    } catch (error) {
                        testResults[test.func] = { status: 'fail', message: error.message };
                        updateTestStatus(test.func, 'fail', error.message);
                        log(`‚ùå ${test.name}: –ü–†–û–í–ê–õ–ï–ù - ${error.message}`, 'error');
                    }
                    
                    updateResults();
                    await new Promise(resolve => setTimeout(resolve, 200));
                }
            }
            
            finishTesting();
        }
        
        // –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤
        async function runCriticalTests() {
            if (isRunning) return;
            
            isRunning = true;
            startTime = Date.now();
            testResults = {};
            
            setButtonsState(true);
            log('‚ö° –ó–∞–ø—É—Å–∫ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ç–µ—Å—Ç–æ–≤...', 'warning');
            
            const criticalTests = [];
            Object.values(testSuites).forEach(suite => {
                suite.forEach(test => {
                    if (test.critical) {
                        criticalTests.push(test);
                    }
                });
            });
            
            for (let i = 0; i < criticalTests.length; i++) {
                const test = criticalTests[i];
                if (!isRunning) break;
                
                updateProgress(i + 1, criticalTests.length, test.name);
                updateTestStatus(test.func, 'running');
                
                try {
                    await executeTest(test);
                    testResults[test.func] = { status: 'pass', message: '–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç –ø—Ä–æ–π–¥–µ–Ω' };
                    updateTestStatus(test.func, 'pass');
                    log(`‚úÖ ${test.name}: –ü–†–û–ô–î–ï–ù (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô)`, 'success');
                } catch (error) {
                    testResults[test.func] = { status: 'fail', message: error.message };
                    updateTestStatus(test.func, 'fail', error.message);
                    log(`‚ùå ${test.name}: –ü–†–û–í–ê–õ–ï–ù (–ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô) - ${error.message}`, 'error');
                }
                
                updateResults();
                await new Promise(resolve => setTimeout(resolve, 300));
            }
            
            finishTesting();
        }
        
        // –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞
        async function executeTest(test) {
            // –°–∏–º—É–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–∞
            const testFunction = window[test.func];
            if (typeof testFunction === 'function') {
                return await testFunction();
            } else {
                // –°–∏–º—É–ª—è—Ü–∏—è —Ç–µ—Å—Ç–∞, –µ—Å–ª–∏ —Ñ—É–Ω–∫—Ü–∏—è –Ω–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞
                await new Promise(resolve => setTimeout(resolve, Math.random() * 1000 + 500));
                
                // –°–ª—É—á–∞–π–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ (–≤ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –Ω–∞—Å—Ç–æ—è—â–∏–π —Ç–µ—Å—Ç)
                if (Math.random() > 0.1) { // 90% —É—Å–ø–µ—Ö–∞
                    return true;
                } else {
                    throw new Error('–°–∏–º—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ —Ç–µ—Å—Ç–∞');
                }
            }
        }
        
        // –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        function finishTesting() {
            isRunning = false;
            setButtonsState(false);
            
            const totalTests = Object.keys(testResults).length;
            const passedTests = Object.values(testResults).filter(r => r.status === 'pass').length;
            const failedTests = Object.values(testResults).filter(r => r.status === 'fail').length;
            
            log(`üéâ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!`, 'info');
            log(`üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã: ${passedTests}/${totalTests} –ø—Ä–æ–π–¥–µ–Ω–æ, ${failedTests} –ø—Ä–æ–≤–∞–ª–µ–Ω–æ`, 'info');
            
            updateProgress(totalTests, totalTests, '–ó–∞–≤–µ—Ä—à–µ–Ω–æ');
        }
        
        // –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤
        function stopTests() {
            isRunning = false;
            setButtonsState(false);
            log('‚èπÔ∏è –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º', 'warning');
        }
        
        // –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∫–Ω–æ–ø–æ–∫
        function setButtonsState(running) {
            document.getElementById('runAllBtn').disabled = running;
            document.getElementById('runCriticalBtn').disabled = running;
            document.getElementById('runRegressionBtn').disabled = running;
            document.getElementById('runPerfBtn').disabled = running;
            document.getElementById('stopBtn').disabled = !running;
        }
        
        // –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã
        async function runRegressionTests() {
            log('üîÑ –†–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã', 'warning');
        }
        
        // –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
        async function runPerformanceTests() {
            log('üìä –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ–∫–∞ –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã', 'warning');
        }
        
        // –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
        async function testDOMLoading() {
            if (!document.getElementById('progressFill')) {
                throw new Error('–û—Å–Ω–æ–≤–Ω—ã–µ DOM —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã');
            }
            await new Promise(resolve => setTimeout(resolve, 500));
        }
        
        async function testAppInitialization() {
            // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
            await new Promise(resolve => setTimeout(resolve, 800));
        }
        
        async function testRegexSecurity() {
            const problematicKeywords = ['+250% —Ä–æ—Å—Ç–∞', '$100', '(–≤–∞–∂–Ω–æ)', '[–Ω–æ–≤–æ–µ]'];
            
            problematicKeywords.forEach(keyword => {
                try {
                    const escapedKeyword = keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    new RegExp(`\\b(${escapedKeyword})\\b`, 'gi');
                } catch (error) {
                    throw new Error(`RegExp –æ—à–∏–±–∫–∞ –¥–ª—è "${keyword}": ${error.message}`);
                }
            });
            
            await new Promise(resolve => setTimeout(resolve, 300));
        }
        
        async function testXSSProtection() {
            const maliciousInput = '<script>alert("XSS")</script>';
            const sanitized = maliciousInput.replace(/[<>]/g, '');
            
            if (sanitized.includes('<script>')) {
                throw new Error('XSS —É—è–∑–≤–∏–º–æ—Å—Ç—å –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞');
            }
            
            await new Promise(resolve => setTimeout(resolve, 400));
        }
    </script>
</body>
</html>